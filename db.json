{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/debug.log","path":"debug.log","modified":0,"renderable":0},{"_id":"source/logo.png","path":"logo.png","modified":0,"renderable":0},{"_id":"source/assets/161129_usearea_01.png","path":"assets/161129_usearea_01.png","modified":0,"renderable":0},{"_id":"source/assets/161129_autocopybuidevent_04.png","path":"assets/161129_autocopybuidevent_04.png","modified":0,"renderable":0},{"_id":"source/assets/161129_update_03.png","path":"assets/161129_update_03.png","modified":0,"renderable":0},{"_id":"source/favicon.png","path":"favicon.png","modified":0,"renderable":0},{"_id":"source/assets/elasticsearch/9200status.png","path":"assets/elasticsearch/9200status.png","modified":0,"renderable":0},{"_id":"source/assets/dev_tools/go_env.png","path":"assets/dev_tools/go_env.png","modified":0,"renderable":0},{"_id":"source/assets/elasticsearch/ik_detail.png","path":"assets/elasticsearch/ik_detail.png","modified":0,"renderable":0},{"_id":"source/assets/elasticsearch/ik_version.png","path":"assets/elasticsearch/ik_version.png","modified":0,"renderable":0},{"_id":"source/assets/elasticsearch/elasticsearch_head.png","path":"assets/elasticsearch/elasticsearch_head.png","modified":0,"renderable":0},{"_id":"source/assets/elasticsearch/elasticsearch511.png","path":"assets/elasticsearch/elasticsearch511.png","modified":0,"renderable":0},{"_id":"source/assets/elasticsearch/java_home.png","path":"assets/elasticsearch/java_home.png","modified":0,"renderable":0},{"_id":"source/assets/elasticsearch/path_java_home.png","path":"assets/elasticsearch/path_java_home.png","modified":0,"renderable":0},{"_id":"source/assets/img/favicon.jpg","path":"assets/img/favicon.jpg","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/1.server_manager_add_features.png","path":"assets/webdeploy/1.server_manager_add_features.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/11.iis_allow_user.png","path":"assets/webdeploy/11.iis_allow_user.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/12.select_user.png","path":"assets/webdeploy/12.select_user.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/13.pubish.png","path":"assets/webdeploy/13.pubish.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/16.check.png","path":"assets/webdeploy/16.check.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/15.connection.png","path":"assets/webdeploy/15.connection.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/17.floder_peimission.png","path":"assets/webdeploy/17.floder_peimission.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/18.full_setting.png","path":"assets/webdeploy/18.full_setting.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/2.iis_management_service.png","path":"assets/webdeploy/2.iis_management_service.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/3.as_service_started.png","path":"assets/webdeploy/3.as_service_started.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/6.management_service_setting.png","path":"assets/webdeploy/6.management_service_setting.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/7.iis_user.png","path":"assets/webdeploy/7.iis_user.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/8.iis_user_add.png","path":"assets/webdeploy/8.iis_user_add.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/9.iis_user_name_pass.png","path":"assets/webdeploy/9.iis_user_name_pass.png","modified":0,"renderable":0},{"_id":"themes/obsidian/source/css/ball-atom.min.css","path":"css/ball-atom.min.css","modified":0,"renderable":1},{"_id":"themes/obsidian/source/css/codemirror.styl","path":"css/codemirror.styl","modified":0,"renderable":1},{"_id":"themes/obsidian/source/css/theme.styl","path":"css/theme.styl","modified":0,"renderable":1},{"_id":"themes/obsidian/source/font/Rubik-Bold-kern-latin.woff2","path":"font/Rubik-Bold-kern-latin.woff2","modified":0,"renderable":1},{"_id":"themes/obsidian/source/font/Rubik-Regular-kern-latin.woff2","path":"font/Rubik-Regular-kern-latin.woff2","modified":0,"renderable":1},{"_id":"themes/obsidian/source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":1},{"_id":"themes/obsidian/source/img/logo.png","path":"img/logo.png","modified":0,"renderable":1},{"_id":"themes/obsidian/source/img/logo1.png","path":"img/logo1.png","modified":0,"renderable":1},{"_id":"themes/obsidian/source/img/logo_icon.png","path":"img/logo_icon.png","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/busuanzi.min.js","path":"js/busuanzi.min.js","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/busuanzi.js","path":"js/busuanzi.js","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/jquery.truncate.js","path":"js/jquery.truncate.js","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/jquery.truncate.min.js","path":"js/jquery.truncate.min.js","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/obsidian.js","path":"js/obsidian.js","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/obsidian.min.js","path":"js/obsidian.min.js","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/plugin.js","path":"js/plugin.js","modified":0,"renderable":1},{"_id":"themes/obsidian/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"source/assets/webdeploy/10.iis_user_permission.png","path":"assets/webdeploy/10.iis_user_permission.png","modified":0,"renderable":0},{"_id":"source/assets/webdeploy/5.iis_home.png","path":"assets/webdeploy/5.iis_home.png","modified":0,"renderable":0},{"_id":"themes/obsidian/source/css/obsidian.styl","path":"css/obsidian.styl","modified":1,"renderable":1},{"_id":"themes/obsidian/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"source/assets/webdeploy/4.error.png","path":"assets/webdeploy/4.error.png","modified":0,"renderable":0},{"_id":"themes/obsidian/source/img/cover.jpg","path":"img/cover.jpg","modified":0,"renderable":1},{"_id":"source/assets/161129_error_02.png","path":"assets/161129_error_02.png","modified":0,"renderable":0},{"_id":"source/assets/angular2/plugin/ngx-datatable/1.png","path":"assets/angular2/plugin/ngx-datatable/1.png","modified":0,"renderable":0},{"_id":"themes/obsidian/source/img/welcome-cover.jpg","path":"img/welcome-cover.jpg","modified":0,"renderable":1},{"_id":"themes/obsidian/source/img/profile.jpg","path":"img/profile.jpg","modified":0,"renderable":1},{"_id":"themes/obsidian/source/statics/chengdu.mp3","path":"statics/chengdu.mp3","modified":0,"renderable":1}],"Cache":[{"_id":"source/about.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1578601278094},{"_id":"themes/obsidian/.gitignore","hash":"64409734e88d18b7acac08e7cbf970531f63faeb","modified":1583859332375},{"_id":"themes/obsidian/CHANGELOG.md","hash":"3554812029b05f2fa1e8c717e8f30005b3cc7c25","modified":1583859332375},{"_id":"themes/obsidian/CHANGELOG_CN.md","hash":"dfc5570319a0bac991ea823760bad5140c78bdef","modified":1583859332375},{"_id":"themes/obsidian/LICENSE","hash":"5433bef2c6c055447443802b3538cf37adabd705","modified":1583859332375},{"_id":"themes/obsidian/README.md","hash":"8286dc053570ebd272903ce45f040171dac3f104","modified":1583859332376},{"_id":"themes/obsidian/README_CN.md","hash":"89e4729a7d324ec74e892b8fa2d878c39cf3e059","modified":1583859332376},{"_id":"themes/obsidian/_config.yml","hash":"805210e341bd4dc083c7f65f071d0d3425f921c0","modified":1583860734456},{"_id":"themes/obsidian/package.json","hash":"4c9f6efc7f844e54d15fe47b7ef026ba61ce47c0","modified":1583859332383},{"_id":"source/404.html","hash":"d102c0bc8313f7388674cf718aad38ee4f120ad9","modified":1578601278089},{"_id":"source/CNAME","hash":"0bc7dc7da8474f83194d7c67d1b0b9f9ccfbeba4","modified":1578601278089},{"_id":"source/debug.log","hash":"6e6a5e778a3a12574c4adcdf987e4898cb0a24a8","modified":1578601278110},{"_id":"themes/obsidian/.DS_Store","hash":"648031b1dc2c4367ef2763f169c63cf46ef544d1","modified":1583862601918},{"_id":"source/logo.png","hash":"e11aa5f3f968805a97ce7d4d52c85b24fec8e8b2","modified":1583862940836},{"_id":"themes/obsidian/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1583859332368},{"_id":"themes/obsidian/.git/config","hash":"db52da145491ce2dd8818ac54ec384acf13bf246","modified":1583859332370},{"_id":"themes/obsidian/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1583859285593},{"_id":"themes/obsidian/.git/index","hash":"0c31e279e5823b696504898b58ea00785d660572","modified":1583859332457},{"_id":"themes/obsidian/.git/packed-refs","hash":"319e691638b028ce2e8dca56714b28b92c009613","modified":1583859332366},{"_id":"themes/obsidian/languages/default.yml","hash":"79c90d32b88bf865be8c27d63e4364ede6b2abab","modified":1583859332376},{"_id":"themes/obsidian/languages/fr.yml","hash":"fa0dbaf1464c62ce6e9e7ad315edb287a18a992f","modified":1583859332376},{"_id":"themes/obsidian/languages/it.yml","hash":"d7fd4985abff51f40034f107aacc515f45d632b6","modified":1583859332377},{"_id":"themes/obsidian/languages/nl.yml","hash":"0f1ec0333eb993ba8a40e2d32009f618738e4d47","modified":1583859332377},{"_id":"themes/obsidian/languages/ru.yml","hash":"f3e6ea6ac5073583ab306c383b0160f7e4891a83","modified":1583859332377},{"_id":"themes/obsidian/languages/no.yml","hash":"5235962d6d8198185db9c288e3eb88f7aa63ac39","modified":1583859332377},{"_id":"themes/obsidian/languages/zh-CN.yml","hash":"10b50135da5d34930cefd630c5c824c2029e6180","modified":1583859332377},{"_id":"themes/obsidian/languages/zh-TW.yml","hash":"891bbfc18194ef3f1c39fd2cafdf93d6d6844ccf","modified":1583859332377},{"_id":"themes/obsidian/layout/archive.ejs","hash":"17eb8f480c30e1de60e5f696942c697e20dc6d3a","modified":1583859332381},{"_id":"themes/obsidian/layout/category.ejs","hash":"e0c36bded984989c864227801dcd289207241f76","modified":1583859332382},{"_id":"themes/obsidian/layout/layout.ejs","hash":"c9a44e84e19189f42aef85ad2b074fa1285072b8","modified":1583859332382},{"_id":"themes/obsidian/layout/index.ejs","hash":"7873010b22819f17b08c67edb60fa01fba94589c","modified":1583859332382},{"_id":"themes/obsidian/layout/page.ejs","hash":"db7051aba9f46e48808236a3887d440d2369d74e","modified":1583859332382},{"_id":"themes/obsidian/layout/post.ejs","hash":"e585d8b4680c52dccfc40ffa6b2c5df515bf20d2","modified":1583859332383},{"_id":"themes/obsidian/layout/tag.ejs","hash":"920114db892fe39fab097c4f65d8ffc9b2a76b69","modified":1583859332383},{"_id":"themes/obsidian/source/.DS_Store","hash":"b05acfcc6acbe92931ccc1ba8610eebb56c729a4","modified":1583862601919},{"_id":"source/404/index.html","hash":"d6cd47ba4ab178269d9e7be773e521a3f74a738b","modified":1578601278089},{"_id":"source/_posts/app.Use-vs-app.Run.md","hash":"83ebfab41dd53374a11c9faa04d7b8163ef03cf1","modified":1578601278089},{"_id":"source/_posts/asynchronous_program_in_dotnet.md","hash":"562cda2ed448b13b165e2f89d4b6114e17b6afff","modified":1578601278090},{"_id":"source/_posts/asynchronous_programming_model.md","hash":"a956ab02db2ba2775a33c5a988229860647148c9","modified":1578601278090},{"_id":"source/_posts/bower_in_vs2013.md","hash":"31785f93fd85e04816755c7f9c6a95c9f2ec4075","modified":1578601278090},{"_id":"source/_posts/covarianceAndContravariance.md","hash":"0469c3df62f8e0c1ffb09e4f5bfbbb92477e62a9","modified":1578601278090},{"_id":"source/_posts/csharp-syntax.md","hash":"1ddfa9445a7d6721dab977b5bbc1fe1bdd973b1a","modified":1578601278091},{"_id":"source/_posts/elasticsearch-windows-1_install_plugins.md","hash":"67821e4fa60eca203b9565dfd47ebe53bd043e7c","modified":1578601278091},{"_id":"source/_posts/elasticsearch-windows-2_basic_usage.md","hash":"56602d3e95dc172012e01608b0ce375cce9152f2","modified":1578601278091},{"_id":"source/_posts/elasticsearch-windows-5.1.1.md","hash":"f865b066126fb1d4c1f200d95c512d078499b421","modified":1578601278091},{"_id":"source/_posts/event-based_asynchronous_pattern.md","hash":"af6eb420159b7ec27917d2b75dcdca054da04369","modified":1578601278091},{"_id":"source/_posts/git_command.md","hash":"299fcb24ab27c7a5b7ed8b56b19db373f92c798e","modified":1578601278092},{"_id":"source/_posts/go-beego-config.md","hash":"a7419c259f33f734ae74b7f0eb73836f8393d898","modified":1578601278092},{"_id":"source/_posts/golang-beego-config.md","hash":"a7419c259f33f734ae74b7f0eb73836f8393d898","modified":1578601278092},{"_id":"source/_posts/go指针使用情况.md","hash":"976924b9b2bdf592505b6dc0a92047dd5f032718","modified":1578601278092},{"_id":"source/_posts/go指针和结构体.md","hash":"12bc32576d8a340336d1e6811862fe90e18bd95d","modified":1578601278092},{"_id":"source/_posts/go编码基本规范.md","hash":"619177495a871725f601b4ca5cfbfa17fc532f2e","modified":1578601278093},{"_id":"source/_posts/gulp_in_visualStudio.md","hash":"9b7fc8381b91551f86da82a2abbc03369a7b4b5f","modified":1578601278093},{"_id":"source/_posts/hexo_exceptions.md","hash":"4e748e8fa061796225bdcd62eafa58d2330d8863","modified":1578601278093},{"_id":"source/_posts/keep_private_setting_out_of_source_control.md","hash":"dd44b393f769a6edfa35d81b44c6d31388838f1c","modified":1578601278093},{"_id":"source/_posts/markdown.md","hash":"d255755615a73e66d11d0a7744977a254b320fa4","modified":1578601278093},{"_id":"source/_posts/readonly_const.md","hash":"f0ce20013ae94c1528e175d1b79344f85b9f7a97","modified":1578601278094},{"_id":"source/_posts/rules.md","hash":"b88339ed818feae479d239bf2ccab048503dd10d","modified":1578601278094},{"_id":"source/_posts/steps.md","hash":"06d3b81abd9dcc35a68408f5155d43391e99c16e","modified":1578601278094},{"_id":"source/_posts/use_area_in_mvc.md","hash":"b2369bb18e1cea1ba45d8be67c6bdb1bf5dc1c35","modified":1578601278094},{"_id":"source/_posts/vs_remote_deployment_webapp.md","hash":"15e0702938588a73a8bd4f69bba1ab09f6794fef","modified":1578601278094},{"_id":"source/_posts/yarn_basic_use.md","hash":"15752e26ae4db67805d6ba16fa2a1fd13452c56f","modified":1578601278094},{"_id":"source/about/index.md","hash":"969202ec02eca7dafbc0112989a148728e0e89d0","modified":1578601278095},{"_id":"source/angular2/angular2_1.md","hash":"cbf4ce10c0624bc38ec12a2fd250720a1d077afe","modified":1578601278095},{"_id":"source/angular2/angular2_plugin_ngx-datatable.md","hash":"d1822792c4473c84aa030d434ca492205d5f7610","modified":1578601278095},{"_id":"source/angular2/nginx_intasll_config.md","hash":"46c51d06dfd816a047a0d03b4545ab85889df8ba","modified":1578601278095},{"_id":"source/assets/161129_usearea_01.png","hash":"a8f4d7dee7c04d7d78b6cf8057bb40b043c313a5","modified":1578601278098},{"_id":"source/categories/index.md","hash":"edafd1d47e5f37fa82e82266690a11fd51079fef","modified":1578601278109},{"_id":"source/csharp/app.Use-vs-app.Run.md","hash":"e59dbdb2361319a35cd8e20b5795ecb49a706dc2","modified":1578601278110},{"_id":"source/csharp/csharp-syntax.md","hash":"7f36654554d640560a7dbdcb29192639a4799aa4","modified":1578601278110},{"_id":"source/ef_code_first/09.01 FluentApi-EntityTypeConfiguration.md","hash":"589a6d791caf3d9ccdd7ee4f1e7c46f9c6c5c3ac","modified":1578601278111},{"_id":"source/ef_code_first/16.00 DB-Initialization-Strategy.md","hash":"8f02e0abe8702e6e5e5d09426c76c737dccd143c","modified":1578601278111},{"_id":"source/design_patterns/proxy.md","hash":"e9d77bab0adadc401645c776e0b9de014f628475","modified":1578601278111},{"_id":"source/dev_tools/Resharper-nssm.md","hash":"674dae3a49db89ff035ca9ed9aa18dabe3f0c5ee","modified":1578601278111},{"_id":"source/dev_tools/go.md","hash":"83df0bd924ca0e6abb0ea86eead36d475944f642","modified":1578601278111},{"_id":"source/essay/index.md","hash":"db0fb279a102449b81b07a5e80704c04dafe8abf","modified":1578601278111},{"_id":"source/golang/golang-beego-config.md","hash":"a7419c259f33f734ae74b7f0eb73836f8393d898","modified":1578601278114},{"_id":"source/golang/go指针和结构体.md","hash":"fcb704f9177c954777f71ec1b5f1f98e0985ebde","modified":1578601278114},{"_id":"source/inner_monologue/index.md","hash":"49e2cec46279f2d244f603f748b6ede2cb651881","modified":1578601278114},{"_id":"source/tags/index.md","hash":"095905d7f0328c0f99b18f60a0e043532881f447","modified":1578601278114},{"_id":"source/assets/161129_autocopybuidevent_04.png","hash":"37e4d044083d79b92779ec159b1163fcde84da52","modified":1578601278096},{"_id":"source/assets/161129_update_03.png","hash":"fabea5a3c643caef9054d1deae282613cdfda070","modified":1578601278097},{"_id":"source/favicon.png","hash":"e14035198ad177f2a76790019b103f2f65400980","modified":1578601278113},{"_id":"themes/obsidian/.git/info/exclude","hash":"bb5a85730dcf100facee799c05cc4f6affec0745","modified":1583859285592},{"_id":"themes/obsidian/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1583859285594},{"_id":"themes/obsidian/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1583859285593},{"_id":"themes/obsidian/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1583859285595},{"_id":"themes/obsidian/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1583859285596},{"_id":"themes/obsidian/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1583859285597},{"_id":"themes/obsidian/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1583859285594},{"_id":"themes/obsidian/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1583859285597},{"_id":"themes/obsidian/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1583859285593},{"_id":"themes/obsidian/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1583859285595},{"_id":"themes/obsidian/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1583859285596},{"_id":"themes/obsidian/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1583859285598},{"_id":"themes/obsidian/.git/logs/HEAD","hash":"64aa1c4fb9ca4c3338406eabb24823340e5d467b","modified":1583859332369},{"_id":"themes/obsidian/layout/_partial/categories.ejs","hash":"db45b83951cd4dca8b9f1fac289e0f38e13c3dc1","modified":1583859332377},{"_id":"themes/obsidian/layout/_partial/google-analytics.ejs","hash":"4806289a1c3de19a1cc4e6242c82cdd429c3bfe8","modified":1583859332378},{"_id":"themes/obsidian/layout/_partial/head.ejs","hash":"df52b2adcbdd40b3bbe6925312f3dece240e55f1","modified":1583859332378},{"_id":"themes/obsidian/layout/_partial/list.ejs","hash":"8e03499580aa81ec0b4c8316347b4e3839849007","modified":1583859332378},{"_id":"themes/obsidian/layout/_partial/mathjax.ejs","hash":"3aae1c6eb8795525090f83b4e2ab00a1c04db13d","modified":1583859332378},{"_id":"themes/obsidian/layout/_partial/menu.ejs","hash":"34c14e4d39fda3f4b0f6ec7e393529ebb33c1139","modified":1583859332378},{"_id":"themes/obsidian/layout/_partial/pagination.ejs","hash":"23bf862b3b8a3cd831850504d9b5a24d21b005e7","modified":1583859332379},{"_id":"themes/obsidian/layout/_partial/photoswipe.ejs","hash":"9cd0571569a37aef1c6c4a5bf074dc1dc7b0558b","modified":1583859332379},{"_id":"themes/obsidian/layout/_partial/screen.ejs","hash":"919c1a9ab04ba22eac1e2e66f46e69b362dea93a","modified":1583859332381},{"_id":"themes/obsidian/layout/_partial/scripts.ejs","hash":"24a310d9a666e35f371e99277d4a042a13e76940","modified":1583859332381},{"_id":"themes/obsidian/layout/_partial/tags.ejs","hash":"fc037d52e956ed280d2d69f9683461ef86b5b453","modified":1583859332381},{"_id":"themes/obsidian/scripts/helpers/hexo-html-truncate.js","hash":"72733931cbe4841f3da9a680e7549718f13bd0b7","modified":1583859332384},{"_id":"themes/obsidian/scripts/helpers/hexo-symbols-count-time.js","hash":"dc213a7d2533f4624bd6c41217657c9ab4e9ce85","modified":1583859332384},{"_id":"themes/obsidian/scripts/helpers/page_title.js","hash":"35dbc39e4edd53b20f5433dc0d1708024049186d","modified":1583859332384},{"_id":"themes/obsidian/source/css/ball-atom.min.css","hash":"c226472e3b8f09c1a30c55a4e1575fc2b22bd4a5","modified":1583859332387},{"_id":"themes/obsidian/source/css/codemirror.styl","hash":"b2e335244baf9703d2281eb41bbbf37ddf820713","modified":1583859332387},{"_id":"themes/obsidian/source/css/theme.styl","hash":"bd1edc12656c7dc6d2fbeac9c44286b0d509c7b6","modified":1583859332388},{"_id":"themes/obsidian/source/font/Rubik-Bold-kern-latin.woff2","hash":"5ffc50abee67c11cfe7c174e6407119dda79bffe","modified":1583859332389},{"_id":"themes/obsidian/source/font/Rubik-Regular-kern-latin.woff2","hash":"f6220f2824efbdb57afe2165886aa7e8ca9345b3","modified":1583859332389},{"_id":"themes/obsidian/source/img/favicon.png","hash":"763e5dd543412266eb38bb66d1e2ed79391c75b6","modified":1583859332391},{"_id":"themes/obsidian/source/img/logo.png","hash":"e11aa5f3f968805a97ce7d4d52c85b24fec8e8b2","modified":1583862940836},{"_id":"themes/obsidian/source/img/logo1.png","hash":"956a5c90eba01360e5576178122cf29e3df1b3e4","modified":1583859332391},{"_id":"themes/obsidian/source/img/logo_icon.png","hash":"763e5dd543412266eb38bb66d1e2ed79391c75b6","modified":1583859332391},{"_id":"themes/obsidian/source/js/busuanzi.min.js","hash":"c31e1244ea9c6da70f306b76ea0c001486e4ea78","modified":1583859332405},{"_id":"themes/obsidian/source/js/busuanzi.js","hash":"8148df0753f8fdcddb306dc36003a6a636b44691","modified":1583859332405},{"_id":"themes/obsidian/source/js/jquery.truncate.js","hash":"9bfb5e6e567458aff86e0cc4bc8c53917387ce13","modified":1583859332406},{"_id":"themes/obsidian/source/js/jquery.truncate.min.js","hash":"a71f558be59d47c2e896bea46e605eb93aa26786","modified":1583859332407},{"_id":"themes/obsidian/source/js/obsidian.js","hash":"e6c91439919715344dd7c05dff9f0a7476909a50","modified":1583859332407},{"_id":"themes/obsidian/source/js/obsidian.min.js","hash":"609c0f9fe552687d3d4bca1f58da8bc603911410","modified":1583859332407},{"_id":"themes/obsidian/source/js/plugin.js","hash":"0ac6bf36a9a11ca6fad0af1f20e5705bc326abf4","modified":1583859332408},{"_id":"themes/obsidian/source/js/search.js","hash":"ccd638c9f9a1e4c4e94dfdbbde5fcc5e7a4eba0c","modified":1583859332408},{"_id":"source/assets/elasticsearch/9200status.png","hash":"abbb933366421ecad687f02b0324e02f1e4a52e0","modified":1578601278099},{"_id":"source/assets/dev_tools/go_env.png","hash":"5c4e3c337df97e8d4b0900094ce32c7251e9b89e","modified":1578601278098},{"_id":"source/assets/elasticsearch/ik_detail.png","hash":"b5b4da9a082bace6a96af9a4d1de5cda0120c33a","modified":1578601278100},{"_id":"source/assets/elasticsearch/ik_version.png","hash":"3f7a63dbfb58355b68a3ca281f2cdea78a16e31a","modified":1578601278101},{"_id":"source/assets/elasticsearch/elasticsearch_head.png","hash":"2904ca861abe4a0a83e0fa4443510d8915864ba7","modified":1578601278100},{"_id":"source/assets/elasticsearch/elasticsearch511.png","hash":"67d87473c5538eacd90c8b658e7585ce6c8a02ca","modified":1578601278099},{"_id":"source/assets/elasticsearch/java_home.png","hash":"cd3cdf0562fcbd2ed546c56d30a2c6594b074c70","modified":1578601278101},{"_id":"source/assets/elasticsearch/path_java_home.png","hash":"9fe55e2456c97b19ffd21992b5aa4f62567fec3a","modified":1578601278101},{"_id":"source/assets/img/favicon.jpg","hash":"cb58426b37941c21ffd23d1047f5ba453db7f01a","modified":1578601278102},{"_id":"source/assets/webdeploy/1.server_manager_add_features.png","hash":"21b1aa97c4fb9e7d68d7a68c1516f0e5de3d201b","modified":1578601278102},{"_id":"source/assets/webdeploy/11.iis_allow_user.png","hash":"82a71bbaf40ba17dd546ed32f3953fc32962d0e6","modified":1578601278104},{"_id":"source/assets/webdeploy/12.select_user.png","hash":"5a107d7c89802de2cb1d151e287bb8c7d0f37ffe","modified":1578601278104},{"_id":"source/assets/webdeploy/13.pubish.png","hash":"b2bb27b5d16296d0f32d5d0ea8ac852c85f9b527","modified":1578601278104},{"_id":"source/assets/webdeploy/16.check.png","hash":"e3127eed79d33654d52a30e155c3ab0c6642980c","modified":1578601278105},{"_id":"source/assets/webdeploy/15.connection.png","hash":"4168d5c57fae76ef95a1d5c0169ca664a6ae5ccd","modified":1578601278105},{"_id":"source/assets/webdeploy/17.floder_peimission.png","hash":"78aceb68dc96839599a4621c2b05d05e1292d343","modified":1578601278105},{"_id":"source/assets/webdeploy/18.full_setting.png","hash":"936870baad7b496680e3fe6e8b9e8098eb829404","modified":1578601278106},{"_id":"source/assets/webdeploy/2.iis_management_service.png","hash":"b5b452e0ce74be4584b80e8d54c508a0af1f9e6b","modified":1578601278106},{"_id":"source/assets/webdeploy/3.as_service_started.png","hash":"5c5994ba7a8d0bb8d19dcafc64723d5a3e2101bd","modified":1578601278107},{"_id":"source/assets/webdeploy/6.management_service_setting.png","hash":"2f07efe77ec94a140d04cccd1c0eb74d6376b12b","modified":1578601278108},{"_id":"source/assets/webdeploy/7.iis_user.png","hash":"dbe056708f7e6fb557ecb0690854dc27d23558aa","modified":1578601278108},{"_id":"source/assets/webdeploy/8.iis_user_add.png","hash":"d007398def55dd21b5465cbd605fe41ff9124cbf","modified":1578601278109},{"_id":"source/assets/webdeploy/9.iis_user_name_pass.png","hash":"2de77169f484ad01cd98633c7492b2e5de0fad68","modified":1578601278109},{"_id":"themes/obsidian/source/css/obsidian.styl","hash":"7e7d9b0e99d19ad60029c7e0fa82a89329c1ebbb","modified":1583863358785},{"_id":"themes/obsidian/source/js/jquery.min.js","hash":"3f1b0e9e54af1af2db2c8a639530448723462151","modified":1583859332406},{"_id":"source/assets/webdeploy/10.iis_user_permission.png","hash":"5d05ca59c35347c4f17e098f88e6ee3bc00e3efb","modified":1578601278103},{"_id":"source/assets/webdeploy/5.iis_home.png","hash":"7b84136197984749b6f21e0f161abb9ef6cca426","modified":1578601278108},{"_id":"themes/obsidian/.git/objects/pack/pack-a65bdcb9562e7228b29a7641387ce08a5f6c7853.idx","hash":"1d6e8ff00daa12ae84beb065c71f39bcd3990dcf","modified":1583859332357},{"_id":"themes/obsidian/.git/refs/heads/master","hash":"d937bdbf6c55b0c8ac31e3444e8edb77409ac32e","modified":1583859332369},{"_id":"themes/obsidian/layout/_partial/post/article.ejs","hash":"c871d924f612fd40cd37f7cfc04f77e30c59a09e","modified":1583859332379},{"_id":"themes/obsidian/layout/_partial/post/date.ejs","hash":"6f2d1aa9562df343b797d25705f1945323c465fb","modified":1583859332379},{"_id":"themes/obsidian/layout/_partial/post/gitalk.ejs","hash":"512874f93fed1bd259df00acf0efa24afc6b9927","modified":1583859332380},{"_id":"themes/obsidian/layout/_partial/post/header.ejs","hash":"95af4961efdc1421fc62b60075672cc49bc49a2c","modified":1583859332380},{"_id":"themes/obsidian/layout/_partial/post/tag.ejs","hash":"c2b4ce7e1d7eed59f4c333915cd431f008f898e3","modified":1583859332380},{"_id":"themes/obsidian/layout/_partial/post/item.ejs","hash":"6b211ed210f25c1b3fe0e8903a332dd8161ba253","modified":1583859332380},{"_id":"themes/obsidian/layout/_partial/post/title.ejs","hash":"33f2a96f17fb1efa354c92aef906d96984abd9ab","modified":1583859332381},{"_id":"themes/obsidian/scripts/libs/cheerio/cheerio.js","hash":"df60e3da86341b0474f15d9aa8547d71617cb5a9","modified":1583859332386},{"_id":"themes/obsidian/scripts/libs/cheerio/parse.js","hash":"dc8dc6f82fd1c8f33eda9442025235a3632bfa36","modified":1583859332386},{"_id":"themes/obsidian/scripts/libs/cheerio/static.js","hash":"36ad488d734e0d9930d0a478deacebe6d5b8c775","modified":1583859332386},{"_id":"themes/obsidian/scripts/libs/cheerio/utils.js","hash":"425759c783010cd1d72771f2b8d471047a1e1285","modified":1583859332387},{"_id":"themes/obsidian/source/img/cover.jpg","hash":"b977716eb4569f06ae41747c92121d44dd0ef2ec","modified":1583859332391},{"_id":"source/assets/webdeploy/4.error.png","hash":"819a3b0b6a4284b2477417db848ed4f11f3556e2","modified":1578601278107},{"_id":"themes/obsidian/.git/logs/refs/heads/master","hash":"64aa1c4fb9ca4c3338406eabb24823340e5d467b","modified":1583859332369},{"_id":"themes/obsidian/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1583859332368},{"_id":"themes/obsidian/scripts/libs/cheerio/api/attributes.js","hash":"404a942475f8bf31dd4704d17490b25bfcdffb07","modified":1583859332385},{"_id":"themes/obsidian/scripts/libs/cheerio/api/css.js","hash":"de88fe4f6977eab77bf080d9a688cc3f2b0d516c","modified":1583859332385},{"_id":"themes/obsidian/scripts/libs/cheerio/api/forms.js","hash":"e9d8465f092ce6c2d2e48575bfa1de7e1cbaf3bd","modified":1583859332385},{"_id":"themes/obsidian/scripts/libs/cheerio/api/manipulation.js","hash":"93b36f7e67557d2a2f5ba65eee21a65f93c37b1f","modified":1583859332385},{"_id":"themes/obsidian/scripts/libs/cheerio/api/traversing.js","hash":"5a83ea3c18f2e73eb1b4f4e4425de932e20d38bb","modified":1583859332386},{"_id":"source/assets/161129_error_02.png","hash":"cb6e913bad9b8469b420191a986483c236896968","modified":1578601278097},{"_id":"source/assets/angular2/plugin/ngx-datatable/1.png","hash":"9ea137dad26fb201b2e070db7cb7038c9b6c1293","modified":1578601278098},{"_id":"themes/obsidian/.git/logs/refs/remotes/origin/HEAD","hash":"64aa1c4fb9ca4c3338406eabb24823340e5d467b","modified":1583859332367},{"_id":"themes/obsidian/source/img/welcome-cover.jpg","hash":"4f64859e7d800f527944aab1615ecc4e24467f50","modified":1583859332404},{"_id":"themes/obsidian/source/img/profile.jpg","hash":"f039e298bfe68f8edeaa2f3bf90a118852588e4e","modified":1583859332400},{"_id":"themes/obsidian/source/statics/chengdu.mp3","hash":"ffff18953f07760d1e30a74e22eee49f1f7f793f","modified":1583859332457},{"_id":"themes/obsidian/.git/objects/pack/pack-a65bdcb9562e7228b29a7641387ce08a5f6c7853.pack","hash":"d93f0edebe32ecde402575f53fc417b2a6f0fa7d","modified":1583859332357},{"_id":"public/404.html","hash":"09ad324520c20dca56867a95e1f0bf76b09d3aa4","modified":1583863250682},{"_id":"public/search.xml","hash":"955beb9d32ef4ead79632672b25a1a0e2acbe055","modified":1583863250682},{"_id":"public/about.html","hash":"5eea948b60a31e97186e2c49c7ae944f67597e7f","modified":1583863250688},{"_id":"public/404/index.html","hash":"688f53ed33fba2d136978905d7d418403cab6c45","modified":1583863250688},{"_id":"public/about/index.html","hash":"9eb0159c59333c99bc65582e07f2e17fea7b813d","modified":1583863250688},{"_id":"public/angular2/angular2_1.html","hash":"30845f3c8e03117235b45aad1fb8dac6f75a5779","modified":1583863250688},{"_id":"public/angular2/nginx_intasll_config.html","hash":"711cb829d1c1895f465f9a36f351a564efe7a59f","modified":1583863250688},{"_id":"public/angular2/angular2_plugin_ngx-datatable.html","hash":"b0d372750e6196ae9fbe07c111fd979a41ecb3ce","modified":1583863250688},{"_id":"public/categories/index.html","hash":"f95295ba7cf333b49a79dc5d7fded50b6b54a136","modified":1583863250689},{"_id":"public/csharp/csharp-syntax.html","hash":"e0f80447370fda5f4143d0f2456bf383d67977b0","modified":1583863250689},{"_id":"public/ef_code_first/09.01 FluentApi-EntityTypeConfiguration.html","hash":"8c07071b71b213acdbfef009b533ed7c3e079f51","modified":1583863250689},{"_id":"public/dev_tools/Resharper-nssm.html","hash":"6c793668b4faee2dd1c174ce1449af21356f8acd","modified":1583863250689},{"_id":"public/dev_tools/go.html","hash":"65e96b56e4851bea86f534cab263f6c729af870e","modified":1583863250689},{"_id":"public/essay/index.html","hash":"8b83dd4e7a82e7f4260a67e96d1cba706b5a46bd","modified":1583863250689},{"_id":"public/golang/golang-beego-config.html","hash":"42ab911e0f215ff835bc2bfa3e84eecf5a9fcd40","modified":1583863250689},{"_id":"public/tags/index.html","hash":"d2a4b16177bb6c995df3cb1e764959075639e23e","modified":1583863250689},{"_id":"public/inner_monologue/index.html","hash":"07de6e162e1181ad123cfe3bd1af1b30ed211946","modified":1583863250689},{"_id":"public/2020/01/10/rules/index.html","hash":"5016ce49185d07700a541f1e814cca3a67f03180","modified":1583863250689},{"_id":"public/2017/03/27/elasticsearch-windows-2_basic_usage/index.html","hash":"486d499e0d9fbc7bcb91b4bd5597f2cf12b0c847","modified":1583863250689},{"_id":"public/2016/12/07/event-based_asynchronous_pattern/index.html","hash":"a63048bb3ad162a2c945ab7a9b54403149458e90","modified":1583863250689},{"_id":"public/2016/11/29/readonly_const/index.html","hash":"032725b75a7fa85343a8f2c2c66ce9bed5e32498","modified":1583863250689},{"_id":"public/2016/10/19/git_command/index.html","hash":"57ce332c59592e3b29200f3c5c0b83cc3e8ca881","modified":1583863250689},{"_id":"public/categories/bower/index.html","hash":"d8bce4540b0f54d4c0adba6d180f3d6b78542164","modified":1583863250689},{"_id":"public/categories/Elasticsearch/index.html","hash":"42c68c31e97ee5de98fed1d095d2202eeef3c810","modified":1583863250690},{"_id":"public/categories/Git/index.html","hash":"afcd69a0287fc037280c8ddb7b52a75f77da50ff","modified":1583863250690},{"_id":"public/categories/hexo/index.html","hash":"18ba4de9a1a032ad5a0c5079c58c4d7914bcceec","modified":1583863250690},{"_id":"public/tags/await/index.html","hash":"1e39b61c2c7224bc7353db1845d2e36750d1b4e4","modified":1583863250690},{"_id":"public/tags/C-Syntax/index.html","hash":"487e64f311d6ee2fd4847f83fadfb3561c101ee0","modified":1583863250690},{"_id":"public/tags/bower/index.html","hash":"fe21f5eaf34f2f78c67cf05be52d74a52e2645b4","modified":1583863250690},{"_id":"public/tags/VS2013/index.html","hash":"d0a36d5df6f4bd9d197c66dee22eb00322edfa73","modified":1583863250690},{"_id":"public/tags/IAsyncResult/index.html","hash":"b53834fd4219b7e27a3a33985222cde9cf904812","modified":1583863250690},{"_id":"public/tags/event-based/index.html","hash":"f1bd4c6803a68538510ff764e8e9a6c5265228d1","modified":1583863250690},{"_id":"public/tags/hexo-excetpion/index.html","hash":"1503c4f05ea93d23d1c9caddca58410a8a706993","modified":1583863250690},{"_id":"public/tags/git/index.html","hash":"69c5004f40b3256144437738ae4528551ef5a73e","modified":1583863250690},{"_id":"public/tags/markdown/index.html","hash":"0f4ce0bcf16e046920ba4644e34fcc209a1b70ac","modified":1583863250690},{"_id":"public/tags/C/index.html","hash":"42416fe11f174a04eef1394ac2b058c23e611eab","modified":1583863250690},{"_id":"public/tags/readonly/index.html","hash":"ad82ae9c9f4a98ba26a0f318cd1ffab92d23da25","modified":1583863250690},{"_id":"public/tags/asp-net/index.html","hash":"7e45291f7618b91dc8c9053d51e0fbfd34c555ec","modified":1583863250690},{"_id":"public/tags/mvc/index.html","hash":"87efcce9eb46df09bd2812e748890ad14d35e0ff","modified":1583863250691},{"_id":"public/tags/area/index.html","hash":"9166ce844f4d549933c584b74e2c30be7a6d0cac","modified":1583863250691},{"_id":"public/tags/route/index.html","hash":"7398637ddc0b3f34294bba70e9602dbeb7897cad","modified":1583863250691},{"_id":"public/tags/node/index.html","hash":"65f13106c9bdf405aa2880a14300ff8d96e39d44","modified":1583863250691},{"_id":"public/tags/yarn/index.html","hash":"c8a573546186d9ea1ab3cb5ccd88d85ad4ff399f","modified":1583863250691},{"_id":"public/tags/usage/index.html","hash":"6aa8ceb08f3ef6b258f991e829049b26c19be42b","modified":1583863250691},{"_id":"public/csharp/app.Use-vs-app.Run.html","hash":"e9353a4c122bdc3021b532eecba0268687035533","modified":1583863250691},{"_id":"public/ef_code_first/16.00 DB-Initialization-Strategy.html","hash":"fe9b63c649f3327b62d56425bd0276282c85d179","modified":1583863250691},{"_id":"public/design_patterns/proxy.html","hash":"26e687692ff0ae1071c6ec182202271e1d51c001","modified":1583863250691},{"_id":"public/golang/go指针和结构体.html","hash":"be510bf3b6379149ac40b285bfeceaa6f1877714","modified":1583863250691},{"_id":"public/2017/10/13/go指针使用情况/index.html","hash":"e4974e30f37eed36910b586772fa910c1eabeb59","modified":1583863250691},{"_id":"public/2017/10/13/go编码基本规范/index.html","hash":"cf922abd6cf41dc4e9394c79b1c9d1b9b0a1adae","modified":1583863250691},{"_id":"public/2017/10/12/go指针和结构体/index.html","hash":"26a1d9be54972d8f42ffcf3ea65697daddc1b351","modified":1583863250691},{"_id":"public/2017/10/12/hexo_exceptions/index.html","hash":"8fc2c36727dc858b41025b272ef77f2fc0ef6735","modified":1583863250691},{"_id":"public/2017/03/18/covarianceAndContravariance/index.html","hash":"1469a7a2b1f724cdf8c4a2f71723322707dfe6ee","modified":1583863250691},{"_id":"public/2017/02/22/vs_remote_deployment_webapp/index.html","hash":"be4bff8b297d74d120facae77e1a2c80ab36b136","modified":1583863250692},{"_id":"public/2017/01/18/elasticsearch-windows-1_install_plugins/index.html","hash":"b9996891557960d6bf351836cea3d4eca598de99","modified":1583863250692},{"_id":"public/2017/01/18/elasticsearch-windows-5.1.1/index.html","hash":"33280d96a1c47b9275903284d88a3ec486a4aedd","modified":1583863250692},{"_id":"public/2016/12/07/keep_private_setting_out_of_source_control/index.html","hash":"d5461cdc48450bd3074c33ef99fb7a8388e2e616","modified":1583863250692},{"_id":"public/2016/12/06/asynchronous_programming_model/index.html","hash":"e556419b65598add4ba69846bc30fa8c0bee4308","modified":1583863250692},{"_id":"public/2016/12/05/asynchronous_program_in_dotnet/index.html","hash":"ee56f5bf5191d7f6fc9d5474ef9d384ab93bdb66","modified":1583863250692},{"_id":"public/2016/12/02/app.Use-vs-app.Run/index.html","hash":"9520164721c4cdc50dbc0d5fe937e044ef324bdb","modified":1583863250692},{"_id":"public/2016/12/02/csharp-syntax/index.html","hash":"02b1830f646bcc2f3a5aafabe57e71679304bd79","modified":1583863250692},{"_id":"public/2016/12/02/yarn_basic_use/index.html","hash":"607d2cf6f9044825b4d0cd4917ac1be50712319e","modified":1583863250692},{"_id":"public/2016/11/29/use_area_in_mvc/index.html","hash":"6e886a19702790c24db6e6eb3b5d5232efec121e","modified":1583863250692},{"_id":"public/2016/10/28/gulp_in_visualStudio/index.html","hash":"f9084fa3b99f2e042c1ba2dbcfd4abff589413e2","modified":1583863250692},{"_id":"public/2016/10/26/bower_in_vs2013/index.html","hash":"0113b41ae1b0f5bff5bb153237a97966fe3c85db","modified":1583863250692},{"_id":"public/2016/10/19/go-beego-config/index.html","hash":"7e4298c1b0d557fd14226f3a805c08238262ee23","modified":1583863250692},{"_id":"public/2016/10/19/golang-beego-config/index.html","hash":"1a7d97625f8b1f2ced9a88e39e73f1e01f733e4c","modified":1583863250692},{"_id":"public/2016/10/19/steps/index.html","hash":"c9f5baff8da27d611c8238d002786fa87dbad8ce","modified":1583863250692},{"_id":"public/2016/10/08/markdown/index.html","hash":"8d50681a1b861115e51d2f0a51eab6a7dddc182a","modified":1583863250693},{"_id":"public/categories/dotnet/index.html","hash":"0b7674bdae3667abcd82f0b148932ef616c1ad01","modified":1583863250693},{"_id":"public/categories/go/index.html","hash":"ccc2f21006895455f75cc145698ec93b0de0e23e","modified":1583863250693},{"_id":"public/index.html","hash":"966ab8dede9fec73f65f0893e35607864c3295cf","modified":1583863250693},{"_id":"public/page/2/index.html","hash":"1d52c1e100d3c13a0f80efdc1e9a8c9600bfcab4","modified":1583863250693},{"_id":"public/page/3/index.html","hash":"713140cf93c61c58308d6676c61dcb925c2d73e8","modified":1583863250693},{"_id":"public/archives/index.html","hash":"05fce0a8309e85377ae3deac410a670b30acc87e","modified":1583863250693},{"_id":"public/archives/page/2/index.html","hash":"05fce0a8309e85377ae3deac410a670b30acc87e","modified":1583863250693},{"_id":"public/archives/2016/index.html","hash":"e40d65032d98759605cad46a3194ac829ea44135","modified":1583863250693},{"_id":"public/archives/page/3/index.html","hash":"05fce0a8309e85377ae3deac410a670b30acc87e","modified":1583863250693},{"_id":"public/archives/2016/page/2/index.html","hash":"e40d65032d98759605cad46a3194ac829ea44135","modified":1583863250693},{"_id":"public/archives/2016/10/index.html","hash":"a8fc2923c0afeaa2a57388cb3831451d331c48e2","modified":1583863250693},{"_id":"public/archives/2016/11/index.html","hash":"84ed1bfdf7034b330d5f89a61084c0e6b6df0b75","modified":1583863250694},{"_id":"public/archives/2016/12/index.html","hash":"c2a01b3caf006798d6edab5b7690245fd079d95f","modified":1583863250694},{"_id":"public/archives/2017/01/index.html","hash":"152dc279a7d4dd00c6398610bf9cd56be90a545d","modified":1583863250694},{"_id":"public/archives/2017/index.html","hash":"49eb8954894ad5e3523e5779bd309f1bdc693a09","modified":1583863250694},{"_id":"public/archives/2017/02/index.html","hash":"6168bf0c122c63b9d2701c148206baea90d7f53d","modified":1583863250694},{"_id":"public/archives/2017/03/index.html","hash":"29bbc5bfee407a65a409f63a208266235cae3779","modified":1583863250694},{"_id":"public/archives/2017/10/index.html","hash":"79965ece2f516fc0845478dfe43fb2c1dd16a38d","modified":1583863250694},{"_id":"public/archives/2020/index.html","hash":"ba504958b7f5a23cb093a3ba5396eeb2c9ee6b17","modified":1583863250694},{"_id":"public/archives/2020/01/index.html","hash":"c4d176e1a8e3b6740fcba9b528b52487d55a73b7","modified":1583863250694},{"_id":"public/tags/async/index.html","hash":"81c98b31b5274a87ef68a5f8bcb2f846c6c1a548","modified":1583863250694},{"_id":"public/tags/net/index.html","hash":"712c927a27ad4f3f3f60866aa4d21572289a9c86","modified":1583863250694},{"_id":"public/tags/gulp/index.html","hash":"d8da11cc97e2894b151abf3de4c5f0ea9f46e96d","modified":1583863250695},{"_id":"public/tags/Elasticsearch/index.html","hash":"88e83871d249496de831b360d4484c485a77bc30","modified":1583863250695},{"_id":"public/tags/windows/index.html","hash":"e3ac0968f2dd9a5fc1858f27e21c58aab8d5a2b6","modified":1583863250695},{"_id":"public/tags/Visual-Stduio/index.html","hash":"b46f8342b5b13de3c3a497eb8653ecbaa4825da7","modified":1583863250695},{"_id":"public/tags/ASP-NET-MVC/index.html","hash":"dbc1800ad6f91cadfde4deeb9717d8b75c2a0344","modified":1583863250695},{"_id":"public/CNAME","hash":"0bc7dc7da8474f83194d7c67d1b0b9f9ccfbeba4","modified":1583863250699},{"_id":"public/debug.log","hash":"6e6a5e778a3a12574c4adcdf987e4898cb0a24a8","modified":1583863250699},{"_id":"public/logo.png","hash":"e11aa5f3f968805a97ce7d4d52c85b24fec8e8b2","modified":1583863250699},{"_id":"public/assets/161129_usearea_01.png","hash":"a8f4d7dee7c04d7d78b6cf8057bb40b043c313a5","modified":1583863250699},{"_id":"public/assets/dev_tools/go_env.png","hash":"5c4e3c337df97e8d4b0900094ce32c7251e9b89e","modified":1583863250699},{"_id":"public/assets/elasticsearch/9200status.png","hash":"abbb933366421ecad687f02b0324e02f1e4a52e0","modified":1583863250699},{"_id":"public/assets/elasticsearch/ik_version.png","hash":"3f7a63dbfb58355b68a3ca281f2cdea78a16e31a","modified":1583863250699},{"_id":"public/assets/elasticsearch/elasticsearch_head.png","hash":"2904ca861abe4a0a83e0fa4443510d8915864ba7","modified":1583863250699},{"_id":"public/assets/elasticsearch/java_home.png","hash":"cd3cdf0562fcbd2ed546c56d30a2c6594b074c70","modified":1583863250699},{"_id":"public/assets/elasticsearch/ik_detail.png","hash":"b5b4da9a082bace6a96af9a4d1de5cda0120c33a","modified":1583863250699},{"_id":"public/assets/elasticsearch/elasticsearch511.png","hash":"67d87473c5538eacd90c8b658e7585ce6c8a02ca","modified":1583863250700},{"_id":"public/assets/elasticsearch/path_java_home.png","hash":"9fe55e2456c97b19ffd21992b5aa4f62567fec3a","modified":1583863250700},{"_id":"public/assets/img/favicon.jpg","hash":"cb58426b37941c21ffd23d1047f5ba453db7f01a","modified":1583863250700},{"_id":"public/assets/webdeploy/1.server_manager_add_features.png","hash":"21b1aa97c4fb9e7d68d7a68c1516f0e5de3d201b","modified":1583863250700},{"_id":"public/assets/webdeploy/11.iis_allow_user.png","hash":"82a71bbaf40ba17dd546ed32f3953fc32962d0e6","modified":1583863250700},{"_id":"public/assets/webdeploy/12.select_user.png","hash":"5a107d7c89802de2cb1d151e287bb8c7d0f37ffe","modified":1583863250700},{"_id":"public/assets/webdeploy/13.pubish.png","hash":"b2bb27b5d16296d0f32d5d0ea8ac852c85f9b527","modified":1583863250700},{"_id":"public/assets/webdeploy/16.check.png","hash":"e3127eed79d33654d52a30e155c3ab0c6642980c","modified":1583863250700},{"_id":"public/assets/webdeploy/2.iis_management_service.png","hash":"b5b452e0ce74be4584b80e8d54c508a0af1f9e6b","modified":1583863250700},{"_id":"public/assets/webdeploy/15.connection.png","hash":"4168d5c57fae76ef95a1d5c0169ca664a6ae5ccd","modified":1583863250701},{"_id":"public/assets/webdeploy/17.floder_peimission.png","hash":"78aceb68dc96839599a4621c2b05d05e1292d343","modified":1583863250701},{"_id":"public/assets/webdeploy/6.management_service_setting.png","hash":"2f07efe77ec94a140d04cccd1c0eb74d6376b12b","modified":1583863250701},{"_id":"public/assets/webdeploy/18.full_setting.png","hash":"936870baad7b496680e3fe6e8b9e8098eb829404","modified":1583863250701},{"_id":"public/assets/webdeploy/3.as_service_started.png","hash":"5c5994ba7a8d0bb8d19dcafc64723d5a3e2101bd","modified":1583863250701},{"_id":"public/assets/webdeploy/9.iis_user_name_pass.png","hash":"2de77169f484ad01cd98633c7492b2e5de0fad68","modified":1583863250701},{"_id":"public/assets/webdeploy/8.iis_user_add.png","hash":"d007398def55dd21b5465cbd605fe41ff9124cbf","modified":1583863250701},{"_id":"public/font/Rubik-Bold-kern-latin.woff2","hash":"5ffc50abee67c11cfe7c174e6407119dda79bffe","modified":1583863250701},{"_id":"public/assets/webdeploy/7.iis_user.png","hash":"dbe056708f7e6fb557ecb0690854dc27d23558aa","modified":1583863250701},{"_id":"public/font/Rubik-Regular-kern-latin.woff2","hash":"f6220f2824efbdb57afe2165886aa7e8ca9345b3","modified":1583863250701},{"_id":"public/img/favicon.png","hash":"763e5dd543412266eb38bb66d1e2ed79391c75b6","modified":1583863250702},{"_id":"public/img/logo.png","hash":"e11aa5f3f968805a97ce7d4d52c85b24fec8e8b2","modified":1583863250702},{"_id":"public/img/logo1.png","hash":"956a5c90eba01360e5576178122cf29e3df1b3e4","modified":1583863250702},{"_id":"public/img/logo_icon.png","hash":"763e5dd543412266eb38bb66d1e2ed79391c75b6","modified":1583863250702},{"_id":"public/assets/angular2/plugin/ngx-datatable/1.png","hash":"9ea137dad26fb201b2e070db7cb7038c9b6c1293","modified":1583863250702},{"_id":"public/assets/161129_autocopybuidevent_04.png","hash":"37e4d044083d79b92779ec159b1163fcde84da52","modified":1583863251051},{"_id":"public/assets/161129_update_03.png","hash":"fabea5a3c643caef9054d1deae282613cdfda070","modified":1583863251051},{"_id":"public/assets/webdeploy/10.iis_user_permission.png","hash":"5d05ca59c35347c4f17e098f88e6ee3bc00e3efb","modified":1583863251051},{"_id":"public/assets/webdeploy/5.iis_home.png","hash":"7b84136197984749b6f21e0f161abb9ef6cca426","modified":1583863251052},{"_id":"public/css/ball-atom.min.css","hash":"c226472e3b8f09c1a30c55a4e1575fc2b22bd4a5","modified":1583863251057},{"_id":"public/css/codemirror.css","hash":"d45967fa2b7e701c3d0dd62cdce0385f5c8f6961","modified":1583863251057},{"_id":"public/css/theme.css","hash":"9b61386db1bb6ffe784738a2dd7ee11348fea17d","modified":1583863251057},{"_id":"public/js/busuanzi.js","hash":"8148df0753f8fdcddb306dc36003a6a636b44691","modified":1583863251057},{"_id":"public/js/jquery.truncate.js","hash":"9bfb5e6e567458aff86e0cc4bc8c53917387ce13","modified":1583863251057},{"_id":"public/js/busuanzi.min.js","hash":"c31e1244ea9c6da70f306b76ea0c001486e4ea78","modified":1583863251057},{"_id":"public/js/jquery.truncate.min.js","hash":"a71f558be59d47c2e896bea46e605eb93aa26786","modified":1583863251057},{"_id":"public/js/obsidian.min.js","hash":"609c0f9fe552687d3d4bca1f58da8bc603911410","modified":1583863251057},{"_id":"public/js/search.js","hash":"ccd638c9f9a1e4c4e94dfdbbde5fcc5e7a4eba0c","modified":1583863251057},{"_id":"public/js/obsidian.js","hash":"e6c91439919715344dd7c05dff9f0a7476909a50","modified":1583863251057},{"_id":"public/js/plugin.js","hash":"0ac6bf36a9a11ca6fad0af1f20e5705bc326abf4","modified":1583863251057},{"_id":"public/css/obsidian.css","hash":"8c48ebaeeb34de32e27929687021094d3adc8544","modified":1583863251057},{"_id":"public/js/jquery.min.js","hash":"3f1b0e9e54af1af2db2c8a639530448723462151","modified":1583863251058},{"_id":"public/assets/webdeploy/4.error.png","hash":"819a3b0b6a4284b2477417db848ed4f11f3556e2","modified":1583863251058},{"_id":"public/img/cover.jpg","hash":"b977716eb4569f06ae41747c92121d44dd0ef2ec","modified":1583863251058},{"_id":"public/favicon.png","hash":"e14035198ad177f2a76790019b103f2f65400980","modified":1583863251065},{"_id":"public/assets/161129_error_02.png","hash":"cb6e913bad9b8469b420191a986483c236896968","modified":1583863251071},{"_id":"public/img/welcome-cover.jpg","hash":"4f64859e7d800f527944aab1615ecc4e24467f50","modified":1583863251088},{"_id":"public/img/profile.jpg","hash":"f039e298bfe68f8edeaa2f3bf90a118852588e4e","modified":1583863251093},{"_id":"public/statics/chengdu.mp3","hash":"ffff18953f07760d1e30a74e22eee49f1f7f793f","modified":1583863251107}],"Category":[{"name":"dotnet","_id":"ck7m7a8rk001abica9vz7zin4"},{"name":"bower","_id":"ck7m7a8rs001ebicawp37mahf"},{"name":"Elasticsearch","_id":"ck7m7a8rw001ibicatxi1pz8y"},{"name":"Git","_id":"ck7m7a8rx001kbicapp4o6tqd"},{"name":"go","_id":"ck7m7a8rx001mbicazyfxl738"},{"name":"hexo","_id":"ck7m7a8s1001wbicazk6rrwc4"}],"Data":[],"Page":[{"_content":"","source":"about.html","raw":"","date":"2020-01-09T20:21:18.094Z","updated":"2020-01-09T20:21:18.094Z","path":"about.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8ot0000bicabn7kdf56","content":"","site":{"data":{}},"excerpt":"","more":""},{"comments":0,"layout":"false","title":"404","_content":"<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\"\n          charset=\"utf-8\" homePageUrl=\"/\"\n          homePageName=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>","source":"404.html","raw":"---\ncomments: false\nlayout: false\ntitle: \"404\"\n---\n<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\"\n          charset=\"utf-8\" homePageUrl=\"/\"\n          homePageName=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>","date":"2020-01-09T20:21:18.089Z","updated":"2020-01-09T20:21:18.089Z","path":"404.html","_id":"ck7m7a8p60001bica3jqmpbh7","content":"<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <meta name=\"robots\" content=\"all\">\n  <meta name=\"robots\" content=\"index,follow\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homepageurl=\"/\" homepagename=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <meta name=\"robots\" content=\"all\">\n  <meta name=\"robots\" content=\"index,follow\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homepageurl=\"/\" homepagename=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>"},{"_content":"<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\"\n          charset=\"utf-8\" homePageUrl=\"/\"\n          homePageName=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>","source":"404/index.html","raw":"<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\"\n          charset=\"utf-8\" homePageUrl=\"/\"\n          homePageName=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>","date":"2020-01-09T20:21:18.089Z","updated":"2020-01-09T20:21:18.089Z","path":"404/index.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8q90002bicad307r03q","content":"<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <meta name=\"robots\" content=\"all\">\n  <meta name=\"robots\" content=\"index,follow\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homepageurl=\"/\" homepagename=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>","site":{"data":{}},"excerpt":"","more":"<!DOCTYPE HTML>\n<html>\n<head><meta name=\"generator\" content=\"Hexo 3.9.0\">\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <meta name=\"robots\" content=\"all\">\n  <meta name=\"robots\" content=\"index,follow\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://qzone.qq.com/gy/404/style/404style.css\">\n</head>\n<body>\n  <script type=\"text/plain\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homepageurl=\"/\" homepagename=\"回到我的主页\">\n  </script>\n  <script src=\"https://qzone.qq.com/gy/404/data.js\" charset=\"utf-8\"></script>\n  <script src=\"https://qzone.qq.com/gy/404/page.js\" charset=\"utf-8\"></script>\n</body>\n</html>"},{"_content":"bogerv@163.com","source":"about/index.md","raw":"bogerv@163.com","date":"2020-01-09T20:21:18.095Z","updated":"2020-01-09T20:21:18.095Z","path":"about/index.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qd0004bica8i05c5o7","content":"<p><a href=\"mailto:bogerv@163.com\" target=\"_blank\" rel=\"noopener\">bogerv@163.com</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"mailto:bogerv@163.com\" target=\"_blank\" rel=\"noopener\">bogerv@163.com</a></p>\n"},{"title":"0. Angular2 简介","date":"2017-03-19T05:35:03.000Z","categories":["angular2"],"_content":"\n# 0.0 原文链接\n> Angular2 quick start 项目简介: [https://msdn.microsoft.com/zh-cn/magazine/mt793274](https://msdn.microsoft.com/zh-cn/magazine/mt793274)\n\n> Angular2 组件简介: [https://msdn.microsoft.com/zh-cn/magazine/mt795191](https://msdn.microsoft.com/zh-cn/magazine/mt795191)\n\n# 1.0 Angular2 主要构成\n* 模块(Modules)\n* 组件(Components)\n* 服务(Services)\n* 路由(Routes)\n\n## 1.1 模块(Modules)\n## 1.2 组件(Components)\n组件是带有一个模板的控制器类, 主要处理应用程序的视图和页面逻辑. 可以用于整个应用程序. 组件知道如何渲染自己并且配置依赖注入.\n\n组件包含两件很重要的事:\n* *视图*\n* *逻辑*\n## 1.3 服务(Services)\n## 1.4 路由(Routes)\n","source":"angular2/angular2_1.md","raw":"---\ntitle: 0. Angular2 简介\ndate: 2017-03-19 13:35:03\ncategories: [angular2]\n---\n\n# 0.0 原文链接\n> Angular2 quick start 项目简介: [https://msdn.microsoft.com/zh-cn/magazine/mt793274](https://msdn.microsoft.com/zh-cn/magazine/mt793274)\n\n> Angular2 组件简介: [https://msdn.microsoft.com/zh-cn/magazine/mt795191](https://msdn.microsoft.com/zh-cn/magazine/mt795191)\n\n# 1.0 Angular2 主要构成\n* 模块(Modules)\n* 组件(Components)\n* 服务(Services)\n* 路由(Routes)\n\n## 1.1 模块(Modules)\n## 1.2 组件(Components)\n组件是带有一个模板的控制器类, 主要处理应用程序的视图和页面逻辑. 可以用于整个应用程序. 组件知道如何渲染自己并且配置依赖注入.\n\n组件包含两件很重要的事:\n* *视图*\n* *逻辑*\n## 1.3 服务(Services)\n## 1.4 路由(Routes)\n","updated":"2020-01-09T20:21:18.095Z","path":"angular2/angular2_1.html","comments":1,"layout":"page","_id":"ck7m7a8qf0006bicac90y6ru6","content":"<h1 id=\"0-0-原文链接\"><a href=\"#0-0-原文链接\" class=\"headerlink\" title=\"0.0 原文链接\"></a>0.0 原文链接</h1><blockquote>\n<p>Angular2 quick start 项目简介: <a href=\"https://msdn.microsoft.com/zh-cn/magazine/mt793274\" target=\"_blank\" rel=\"noopener\">https://msdn.microsoft.com/zh-cn/magazine/mt793274</a></p>\n</blockquote>\n<blockquote>\n<p>Angular2 组件简介: <a href=\"https://msdn.microsoft.com/zh-cn/magazine/mt795191\" target=\"_blank\" rel=\"noopener\">https://msdn.microsoft.com/zh-cn/magazine/mt795191</a></p>\n</blockquote>\n<h1 id=\"1-0-Angular2-主要构成\"><a href=\"#1-0-Angular2-主要构成\" class=\"headerlink\" title=\"1.0 Angular2 主要构成\"></a>1.0 Angular2 主要构成</h1><ul>\n<li>模块(Modules)</li>\n<li>组件(Components)</li>\n<li>服务(Services)</li>\n<li>路由(Routes)</li>\n</ul>\n<h2 id=\"1-1-模块-Modules\"><a href=\"#1-1-模块-Modules\" class=\"headerlink\" title=\"1.1 模块(Modules)\"></a>1.1 模块(Modules)</h2><h2 id=\"1-2-组件-Components\"><a href=\"#1-2-组件-Components\" class=\"headerlink\" title=\"1.2 组件(Components)\"></a>1.2 组件(Components)</h2><p>组件是带有一个模板的控制器类, 主要处理应用程序的视图和页面逻辑. 可以用于整个应用程序. 组件知道如何渲染自己并且配置依赖注入.</p>\n<p>组件包含两件很重要的事:</p>\n<ul>\n<li><em>视图</em></li>\n<li><em>逻辑</em><h2 id=\"1-3-服务-Services\"><a href=\"#1-3-服务-Services\" class=\"headerlink\" title=\"1.3 服务(Services)\"></a>1.3 服务(Services)</h2><h2 id=\"1-4-路由-Routes\"><a href=\"#1-4-路由-Routes\" class=\"headerlink\" title=\"1.4 路由(Routes)\"></a>1.4 路由(Routes)</h2></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"0-0-原文链接\"><a href=\"#0-0-原文链接\" class=\"headerlink\" title=\"0.0 原文链接\"></a>0.0 原文链接</h1><blockquote>\n<p>Angular2 quick start 项目简介: <a href=\"https://msdn.microsoft.com/zh-cn/magazine/mt793274\" target=\"_blank\" rel=\"noopener\">https://msdn.microsoft.com/zh-cn/magazine/mt793274</a></p>\n</blockquote>\n<blockquote>\n<p>Angular2 组件简介: <a href=\"https://msdn.microsoft.com/zh-cn/magazine/mt795191\" target=\"_blank\" rel=\"noopener\">https://msdn.microsoft.com/zh-cn/magazine/mt795191</a></p>\n</blockquote>\n<h1 id=\"1-0-Angular2-主要构成\"><a href=\"#1-0-Angular2-主要构成\" class=\"headerlink\" title=\"1.0 Angular2 主要构成\"></a>1.0 Angular2 主要构成</h1><ul>\n<li>模块(Modules)</li>\n<li>组件(Components)</li>\n<li>服务(Services)</li>\n<li>路由(Routes)</li>\n</ul>\n<h2 id=\"1-1-模块-Modules\"><a href=\"#1-1-模块-Modules\" class=\"headerlink\" title=\"1.1 模块(Modules)\"></a>1.1 模块(Modules)</h2><h2 id=\"1-2-组件-Components\"><a href=\"#1-2-组件-Components\" class=\"headerlink\" title=\"1.2 组件(Components)\"></a>1.2 组件(Components)</h2><p>组件是带有一个模板的控制器类, 主要处理应用程序的视图和页面逻辑. 可以用于整个应用程序. 组件知道如何渲染自己并且配置依赖注入.</p>\n<p>组件包含两件很重要的事:</p>\n<ul>\n<li><em>视图</em></li>\n<li><em>逻辑</em><h2 id=\"1-3-服务-Services\"><a href=\"#1-3-服务-Services\" class=\"headerlink\" title=\"1.3 服务(Services)\"></a>1.3 服务(Services)</h2><h2 id=\"1-4-路由-Routes\"><a href=\"#1-4-路由-Routes\" class=\"headerlink\" title=\"1.4 路由(Routes)\"></a>1.4 路由(Routes)</h2></li>\n</ul>\n"},{"title":"Nginx 在 Windows 下基本安装和配置","date":"2017-03-20T04:35:03.000Z","categories":["angular2"],"_content":"\n## 0.0 下载 Nginx\n[https://nginx.org/en/download.html](https://nginx.org/en/download.html)\n\n## 1.0 安装 Nginx\n将下载的 zip 解压到某个文件夹即可\n\n如: D:\\Applications\\nginx\n\n> 可以将此文件夹添加到系统环境变量中\n\n## 2.0 启动 Nginx\nNginx 默认启用 80 端口, 如果此端口被占用, 则会出错(错误日志在 D:\\Applications\\nginx\\logs 目录下). 此时我们可以修改默认配置(将  D:\\Applications\\nginx\\conf\\nginx.conf 中 80 修改为 8090 或其他)\n\n直接运行 D:\\Applications\\nginx 目录下的 nginx.exe\n\n或者\n\n命令行进入 D:\\Applications\\nginx 目录, 运行 nginx.exe\n\n## 3.0 检测是否成功\n在浏览器中运行 localhost:8090, 可以看到欢迎页面\n\n## 4.0 停止 Nginx\n运行命令行\n\n`nginx -s stop`\n\n或者直接结束 Nginx 进程\n\n`D:\\Applications\\nginx\\logs\\nginx.pid`记录进程 Id\n\n## 5.0 Nginx 使用自定义配置文件\n启动 Nginx 是默认使用 conf/nginx.conf 文件. 实际上是运行了 `nginx -c conf/nginx.conf` 命令\n\n如果想用自定义配置文件可直接运行\n\n`nginx -c conf/xxxxxx.conf`\n","source":"angular2/nginx_intasll_config.md","raw":"---\ntitle: Nginx 在 Windows 下基本安装和配置\ndate: 2017-03-20 12:35:03\ncategories: [angular2]\n---\n\n## 0.0 下载 Nginx\n[https://nginx.org/en/download.html](https://nginx.org/en/download.html)\n\n## 1.0 安装 Nginx\n将下载的 zip 解压到某个文件夹即可\n\n如: D:\\Applications\\nginx\n\n> 可以将此文件夹添加到系统环境变量中\n\n## 2.0 启动 Nginx\nNginx 默认启用 80 端口, 如果此端口被占用, 则会出错(错误日志在 D:\\Applications\\nginx\\logs 目录下). 此时我们可以修改默认配置(将  D:\\Applications\\nginx\\conf\\nginx.conf 中 80 修改为 8090 或其他)\n\n直接运行 D:\\Applications\\nginx 目录下的 nginx.exe\n\n或者\n\n命令行进入 D:\\Applications\\nginx 目录, 运行 nginx.exe\n\n## 3.0 检测是否成功\n在浏览器中运行 localhost:8090, 可以看到欢迎页面\n\n## 4.0 停止 Nginx\n运行命令行\n\n`nginx -s stop`\n\n或者直接结束 Nginx 进程\n\n`D:\\Applications\\nginx\\logs\\nginx.pid`记录进程 Id\n\n## 5.0 Nginx 使用自定义配置文件\n启动 Nginx 是默认使用 conf/nginx.conf 文件. 实际上是运行了 `nginx -c conf/nginx.conf` 命令\n\n如果想用自定义配置文件可直接运行\n\n`nginx -c conf/xxxxxx.conf`\n","updated":"2020-01-09T20:21:18.095Z","path":"angular2/nginx_intasll_config.html","comments":1,"layout":"page","_id":"ck7m7a8qh0008bica9urdor1y","content":"<h2 id=\"0-0-下载-Nginx\"><a href=\"#0-0-下载-Nginx\" class=\"headerlink\" title=\"0.0 下载 Nginx\"></a>0.0 下载 Nginx</h2><p><a href=\"https://nginx.org/en/download.html\" target=\"_blank\" rel=\"noopener\">https://nginx.org/en/download.html</a></p>\n<h2 id=\"1-0-安装-Nginx\"><a href=\"#1-0-安装-Nginx\" class=\"headerlink\" title=\"1.0 安装 Nginx\"></a>1.0 安装 Nginx</h2><p>将下载的 zip 解压到某个文件夹即可</p>\n<p>如: D:\\Applications\\nginx</p>\n<blockquote>\n<p>可以将此文件夹添加到系统环境变量中</p>\n</blockquote>\n<h2 id=\"2-0-启动-Nginx\"><a href=\"#2-0-启动-Nginx\" class=\"headerlink\" title=\"2.0 启动 Nginx\"></a>2.0 启动 Nginx</h2><p>Nginx 默认启用 80 端口, 如果此端口被占用, 则会出错(错误日志在 D:\\Applications\\nginx\\logs 目录下). 此时我们可以修改默认配置(将  D:\\Applications\\nginx\\conf\\nginx.conf 中 80 修改为 8090 或其他)</p>\n<p>直接运行 D:\\Applications\\nginx 目录下的 nginx.exe</p>\n<p>或者</p>\n<p>命令行进入 D:\\Applications\\nginx 目录, 运行 nginx.exe</p>\n<h2 id=\"3-0-检测是否成功\"><a href=\"#3-0-检测是否成功\" class=\"headerlink\" title=\"3.0 检测是否成功\"></a>3.0 检测是否成功</h2><p>在浏览器中运行 localhost:8090, 可以看到欢迎页面</p>\n<h2 id=\"4-0-停止-Nginx\"><a href=\"#4-0-停止-Nginx\" class=\"headerlink\" title=\"4.0 停止 Nginx\"></a>4.0 停止 Nginx</h2><p>运行命令行</p>\n<p><code>nginx -s stop</code></p>\n<p>或者直接结束 Nginx 进程</p>\n<p><code>D:\\Applications\\nginx\\logs\\nginx.pid</code>记录进程 Id</p>\n<h2 id=\"5-0-Nginx-使用自定义配置文件\"><a href=\"#5-0-Nginx-使用自定义配置文件\" class=\"headerlink\" title=\"5.0 Nginx 使用自定义配置文件\"></a>5.0 Nginx 使用自定义配置文件</h2><p>启动 Nginx 是默认使用 conf/nginx.conf 文件. 实际上是运行了 <code>nginx -c conf/nginx.conf</code> 命令</p>\n<p>如果想用自定义配置文件可直接运行</p>\n<p><code>nginx -c conf/xxxxxx.conf</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"0-0-下载-Nginx\"><a href=\"#0-0-下载-Nginx\" class=\"headerlink\" title=\"0.0 下载 Nginx\"></a>0.0 下载 Nginx</h2><p><a href=\"https://nginx.org/en/download.html\" target=\"_blank\" rel=\"noopener\">https://nginx.org/en/download.html</a></p>\n<h2 id=\"1-0-安装-Nginx\"><a href=\"#1-0-安装-Nginx\" class=\"headerlink\" title=\"1.0 安装 Nginx\"></a>1.0 安装 Nginx</h2><p>将下载的 zip 解压到某个文件夹即可</p>\n<p>如: D:\\Applications\\nginx</p>\n<blockquote>\n<p>可以将此文件夹添加到系统环境变量中</p>\n</blockquote>\n<h2 id=\"2-0-启动-Nginx\"><a href=\"#2-0-启动-Nginx\" class=\"headerlink\" title=\"2.0 启动 Nginx\"></a>2.0 启动 Nginx</h2><p>Nginx 默认启用 80 端口, 如果此端口被占用, 则会出错(错误日志在 D:\\Applications\\nginx\\logs 目录下). 此时我们可以修改默认配置(将  D:\\Applications\\nginx\\conf\\nginx.conf 中 80 修改为 8090 或其他)</p>\n<p>直接运行 D:\\Applications\\nginx 目录下的 nginx.exe</p>\n<p>或者</p>\n<p>命令行进入 D:\\Applications\\nginx 目录, 运行 nginx.exe</p>\n<h2 id=\"3-0-检测是否成功\"><a href=\"#3-0-检测是否成功\" class=\"headerlink\" title=\"3.0 检测是否成功\"></a>3.0 检测是否成功</h2><p>在浏览器中运行 localhost:8090, 可以看到欢迎页面</p>\n<h2 id=\"4-0-停止-Nginx\"><a href=\"#4-0-停止-Nginx\" class=\"headerlink\" title=\"4.0 停止 Nginx\"></a>4.0 停止 Nginx</h2><p>运行命令行</p>\n<p><code>nginx -s stop</code></p>\n<p>或者直接结束 Nginx 进程</p>\n<p><code>D:\\Applications\\nginx\\logs\\nginx.pid</code>记录进程 Id</p>\n<h2 id=\"5-0-Nginx-使用自定义配置文件\"><a href=\"#5-0-Nginx-使用自定义配置文件\" class=\"headerlink\" title=\"5.0 Nginx 使用自定义配置文件\"></a>5.0 Nginx 使用自定义配置文件</h2><p>启动 Nginx 是默认使用 conf/nginx.conf 文件. 实际上是运行了 <code>nginx -c conf/nginx.conf</code> 命令</p>\n<p>如果想用自定义配置文件可直接运行</p>\n<p><code>nginx -c conf/xxxxxx.conf</code></p>\n"},{"title":"0. Angular2 ����","date":"2017-02-01T03:36:26.000Z","categories":["angular2"],"_content":"\n\n## 0.0 ngx-datatable ����\n* ngx-datatable ��Ŀ��ַ: [https://github.com/swimlane/ngx-datatable](https://github.com/swimlane/ngx-datatable)\n* ngx-datatable Demo��ַ: [http://swimlane.github.io/ngx-datatable/](http://swimlane.github.io/ngx-datatable/)\n\nDemo �ϵ�ÿ��ʵ�������Կ�Դ��, ��������:\n\n![](/assets/161129_error_02.png)\n","source":"angular2/angular2_plugin_ngx-datatable.md","raw":"---\ntitle: 0. Angular2 ����\ndate: 2017-02-01 11:36:26\ncategories: [angular2]\n---\n\n\n## 0.0 ngx-datatable ����\n* ngx-datatable ��Ŀ��ַ: [https://github.com/swimlane/ngx-datatable](https://github.com/swimlane/ngx-datatable)\n* ngx-datatable Demo��ַ: [http://swimlane.github.io/ngx-datatable/](http://swimlane.github.io/ngx-datatable/)\n\nDemo �ϵ�ÿ��ʵ�������Կ�Դ��, ��������:\n\n![](/assets/161129_error_02.png)\n","updated":"2020-01-09T20:21:18.095Z","path":"angular2/angular2_plugin_ngx-datatable.html","comments":1,"layout":"page","_id":"ck7m7a8qj000abicafj55tf7f","content":"<h2 id=\"0-0-ngx-datatable-����\"><a href=\"#0-0-ngx-datatable-����\" class=\"headerlink\" title=\"0.0 ngx-datatable ����\"></a>0.0 ngx-datatable ����</h2><ul>\n<li>ngx-datatable ��Ŀ��ַ: <a href=\"https://github.com/swimlane/ngx-datatable\" target=\"_blank\" rel=\"noopener\">https://github.com/swimlane/ngx-datatable</a></li>\n<li>ngx-datatable Demo��ַ: <a href=\"http://swimlane.github.io/ngx-datatable/\" target=\"_blank\" rel=\"noopener\">http://swimlane.github.io/ngx-datatable/</a></li>\n</ul>\n<p>Demo �ϵ�ÿ��ʵ�������Կ�Դ��, ��������:</p>\n<p><img src=\"/assets/161129_error_02.png\" alt></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"0-0-ngx-datatable-����\"><a href=\"#0-0-ngx-datatable-����\" class=\"headerlink\" title=\"0.0 ngx-datatable ����\"></a>0.0 ngx-datatable ����</h2><ul>\n<li>ngx-datatable ��Ŀ��ַ: <a href=\"https://github.com/swimlane/ngx-datatable\" target=\"_blank\" rel=\"noopener\">https://github.com/swimlane/ngx-datatable</a></li>\n<li>ngx-datatable Demo��ַ: <a href=\"http://swimlane.github.io/ngx-datatable/\" target=\"_blank\" rel=\"noopener\">http://swimlane.github.io/ngx-datatable/</a></li>\n</ul>\n<p>Demo �ϵ�ÿ��ʵ�������Կ�Դ��, ��������:</p>\n<p><img src=\"/assets/161129_error_02.png\" alt></p>\n"},{"title":"All categories","date":"2014-12-22T04:39:04.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: All categories\ndate: 2014-12-22 12:39:04\ntype: \"categories\"\n---","updated":"2020-01-09T20:21:18.109Z","path":"categories/index.html","comments":1,"layout":"page","_id":"ck7m7a8ql000cbica7dkyvjr2","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"## 语法糖\n\n| 符号        | 说明           |\n| ------------- |:-------------:|\n| **??**      | 非空取前者值, 空取后者值 | \n| **?.**      |       |\n\n### 0.0 示例 **??**\n```csharp\nvar str = GetValue() ?? \"test\";\n```\n相当于\n```csharp\nvar str = GetValue();\nif(str == null)\n{\n    str = \"test\";\n}\n```\n\n### 0.1 示例 **?.**","source":"csharp/csharp-syntax.md","raw":"## 语法糖\n\n| 符号        | 说明           |\n| ------------- |:-------------:|\n| **??**      | 非空取前者值, 空取后者值 | \n| **?.**      |       |\n\n### 0.0 示例 **??**\n```csharp\nvar str = GetValue() ?? \"test\";\n```\n相当于\n```csharp\nvar str = GetValue();\nif(str == null)\n{\n    str = \"test\";\n}\n```\n\n### 0.1 示例 **?.**","date":"2020-01-09T20:21:18.110Z","updated":"2020-01-09T20:21:18.110Z","path":"csharp/csharp-syntax.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qm000ebicara1rxk3u","content":"<h2 id=\"语法糖\"><a href=\"#语法糖\" class=\"headerlink\" title=\"语法糖\"></a>语法糖</h2><table>\n<thead>\n<tr>\n<th>符号</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>??</strong></td>\n<td align=\"center\">非空取前者值, 空取后者值</td>\n</tr>\n<tr>\n<td><strong>?.</strong></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<h3 id=\"0-0-示例\"><a href=\"#0-0-示例\" class=\"headerlink\" title=\"0.0 示例 ??\"></a>0.0 示例 <strong>??</strong></h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue() ?? <span class=\"string\">\"test\"</span>;</span><br></pre></td></tr></table></figure>\n\n<p>相当于</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(str == <span class=\"literal\">null</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    str = <span class=\"string\">\"test\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"0-1-示例\"><a href=\"#0-1-示例\" class=\"headerlink\" title=\"0.1 示例 ?.\"></a>0.1 示例 <strong>?.</strong></h3>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"语法糖\"><a href=\"#语法糖\" class=\"headerlink\" title=\"语法糖\"></a>语法糖</h2><table>\n<thead>\n<tr>\n<th>符号</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>??</strong></td>\n<td align=\"center\">非空取前者值, 空取后者值</td>\n</tr>\n<tr>\n<td><strong>?.</strong></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<h3 id=\"0-0-示例\"><a href=\"#0-0-示例\" class=\"headerlink\" title=\"0.0 示例 ??\"></a>0.0 示例 <strong>??</strong></h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue() ?? <span class=\"string\">\"test\"</span>;</span><br></pre></td></tr></table></figure>\n\n<p>相当于</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(str == <span class=\"literal\">null</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    str = <span class=\"string\">\"test\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"0-1-示例\"><a href=\"#0-1-示例\" class=\"headerlink\" title=\"0.1 示例 ?.\"></a>0.1 示例 <strong>?.</strong></h3>"},{"_content":"## EntityTypeConfiguration\n### 00.00 EntityTypeConfiguration 简介\n\n在使用 Fluent API 之前, 先看一个非常重要的类: [EntityTypeConfiguration](https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx)\n\n[EntityTypeConfiguration](https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx) 类提供了很多配置 实体或属性 的重要方法, 实现覆盖各种Code-First约定\n\n### 00.01 EntityTypeConfiguration 来源\n\n大概知道了这个类能干嘛, 那它可以从哪里获得呢?\n\n通常在我们的 DbContext 中，我们会重写 OnModelCreating 方法\n```\nprotected override void OnModelCreating(DbModelBuilder modelBuilder)\n{\n    base.OnModelCreating(modelBuilder);\n}\n```\n此方法带有 DbModelBuilder 类型参数 modelBuilder，而 modelBuilder.Entity\\<TEntity\\>() 方法返回值类型就是 [EntityTypeConfiguration](https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx)\n\n把 OnModelCreating 方法更改为\n```\nprotected override void OnModelCreating(DbModelBuilder modelBuilder)\n{\n    EntityTypeConfiguration<TEntity> tEntityCfg = modelBuilder.Entity<TEntity>();\n    base.OnModelCreating(modelBuilder);\n}\n```\n此时我们就可以使用 tEntityCfg 来配置 TEntity 的实体或属性了\n\n### 00.02 EntityTypeConfiguration 常用重要方法\n\n方法名 | 返回类型 | 描述\n---- | --- | ---\nHasKey<TKey> | [EntityTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx) | 为此实体配置主键属性\nHasMany<TTargetEntity> | [ManyNavigationPropertyConfiguration](http://msdn.microsoft.com/en-us/library/gg679342(v=vs.103).aspx) | 配置实体类型多对多关系\nHasOptional<TTargetEntity> | [OptionalNavigationPropertyConfiguration](http://msdn.microsoft.com/en-us/library/gg696420(v=vs.103).aspx) | 配置此实体类型的可选关系. 实体类型的实例可以保存到数据库，而不指定此关系. 数据库中的外键将为空.\nHasRequired<TTargetEntity> | [RequiredNavigationPropertyConfiguration](http://msdn.microsoft.com/en-us/library/gg679232(v=vs.103).aspx) | 配置此实体类型所需的关系. 实体类型的实例将无法保存到数据库，除非指定了该关系. 数据库中的外键将不可为空.\nIgnore<TProperty> | Void | 从模型中排除属性，使其不会映射到数据库.\nMap | [EntityTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx) | 允许与实体类型映射到数据库模式的高级配置相关.\nProperty<T> | [StructuralTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg679411(v=vs.103).aspx) | 配置在此类型上定义的struct属性.\nToTable | Void | 配置此实体映射到数据库的名称.\n\n更多的方法可以查看 MSDN [EntityTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx).","source":"ef_code_first/09.01 FluentApi-EntityTypeConfiguration.md","raw":"## EntityTypeConfiguration\n### 00.00 EntityTypeConfiguration 简介\n\n在使用 Fluent API 之前, 先看一个非常重要的类: [EntityTypeConfiguration](https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx)\n\n[EntityTypeConfiguration](https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx) 类提供了很多配置 实体或属性 的重要方法, 实现覆盖各种Code-First约定\n\n### 00.01 EntityTypeConfiguration 来源\n\n大概知道了这个类能干嘛, 那它可以从哪里获得呢?\n\n通常在我们的 DbContext 中，我们会重写 OnModelCreating 方法\n```\nprotected override void OnModelCreating(DbModelBuilder modelBuilder)\n{\n    base.OnModelCreating(modelBuilder);\n}\n```\n此方法带有 DbModelBuilder 类型参数 modelBuilder，而 modelBuilder.Entity\\<TEntity\\>() 方法返回值类型就是 [EntityTypeConfiguration](https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx)\n\n把 OnModelCreating 方法更改为\n```\nprotected override void OnModelCreating(DbModelBuilder modelBuilder)\n{\n    EntityTypeConfiguration<TEntity> tEntityCfg = modelBuilder.Entity<TEntity>();\n    base.OnModelCreating(modelBuilder);\n}\n```\n此时我们就可以使用 tEntityCfg 来配置 TEntity 的实体或属性了\n\n### 00.02 EntityTypeConfiguration 常用重要方法\n\n方法名 | 返回类型 | 描述\n---- | --- | ---\nHasKey<TKey> | [EntityTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx) | 为此实体配置主键属性\nHasMany<TTargetEntity> | [ManyNavigationPropertyConfiguration](http://msdn.microsoft.com/en-us/library/gg679342(v=vs.103).aspx) | 配置实体类型多对多关系\nHasOptional<TTargetEntity> | [OptionalNavigationPropertyConfiguration](http://msdn.microsoft.com/en-us/library/gg696420(v=vs.103).aspx) | 配置此实体类型的可选关系. 实体类型的实例可以保存到数据库，而不指定此关系. 数据库中的外键将为空.\nHasRequired<TTargetEntity> | [RequiredNavigationPropertyConfiguration](http://msdn.microsoft.com/en-us/library/gg679232(v=vs.103).aspx) | 配置此实体类型所需的关系. 实体类型的实例将无法保存到数据库，除非指定了该关系. 数据库中的外键将不可为空.\nIgnore<TProperty> | Void | 从模型中排除属性，使其不会映射到数据库.\nMap | [EntityTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx) | 允许与实体类型映射到数据库模式的高级配置相关.\nProperty<T> | [StructuralTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg679411(v=vs.103).aspx) | 配置在此类型上定义的struct属性.\nToTable | Void | 配置此实体映射到数据库的名称.\n\n更多的方法可以查看 MSDN [EntityTypeConfiguration](http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx).","date":"2020-01-09T20:21:18.111Z","updated":"2020-01-09T20:21:18.111Z","path":"ef_code_first/09.01 FluentApi-EntityTypeConfiguration.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qo000gbica65fhrjwo","content":"<h2 id=\"EntityTypeConfiguration\"><a href=\"#EntityTypeConfiguration\" class=\"headerlink\" title=\"EntityTypeConfiguration\"></a>EntityTypeConfiguration</h2><h3 id=\"00-00-EntityTypeConfiguration-简介\"><a href=\"#00-00-EntityTypeConfiguration-简介\" class=\"headerlink\" title=\"00.00 EntityTypeConfiguration 简介\"></a>00.00 EntityTypeConfiguration 简介</h3><p>在使用 Fluent API 之前, 先看一个非常重要的类: <a href=\"https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></p>\n<p><a href=\"https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a> 类提供了很多配置 实体或属性 的重要方法, 实现覆盖各种Code-First约定</p>\n<h3 id=\"00-01-EntityTypeConfiguration-来源\"><a href=\"#00-01-EntityTypeConfiguration-来源\" class=\"headerlink\" title=\"00.01 EntityTypeConfiguration 来源\"></a>00.01 EntityTypeConfiguration 来源</h3><p>大概知道了这个类能干嘛, 那它可以从哪里获得呢?</p>\n<p>通常在我们的 DbContext 中，我们会重写 OnModelCreating 方法</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected override void OnModelCreating(DbModelBuilder modelBuilder)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    base.OnModelCreating(modelBuilder);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>此方法带有 DbModelBuilder 类型参数 modelBuilder，而 modelBuilder.Entity&lt;TEntity&gt;() 方法返回值类型就是 <a href=\"https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></p>\n<p>把 OnModelCreating 方法更改为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected override void OnModelCreating(DbModelBuilder modelBuilder)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    EntityTypeConfiguration&lt;TEntity&gt; tEntityCfg = modelBuilder.Entity&lt;TEntity&gt;();</span><br><span class=\"line\">    base.OnModelCreating(modelBuilder);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>此时我们就可以使用 tEntityCfg 来配置 TEntity 的实体或属性了</p>\n<h3 id=\"00-02-EntityTypeConfiguration-常用重要方法\"><a href=\"#00-02-EntityTypeConfiguration-常用重要方法\" class=\"headerlink\" title=\"00.02 EntityTypeConfiguration 常用重要方法\"></a>00.02 EntityTypeConfiguration 常用重要方法</h3><table>\n<thead>\n<tr>\n<th>方法名</th>\n<th>返回类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>HasKey<tkey></tkey></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></td>\n<td>为此实体配置主键属性</td>\n</tr>\n<tr>\n<td>HasMany<ttargetentity></ttargetentity></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg679342(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">ManyNavigationPropertyConfiguration</a></td>\n<td>配置实体类型多对多关系</td>\n</tr>\n<tr>\n<td>HasOptional<ttargetentity></ttargetentity></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg696420(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">OptionalNavigationPropertyConfiguration</a></td>\n<td>配置此实体类型的可选关系. 实体类型的实例可以保存到数据库，而不指定此关系. 数据库中的外键将为空.</td>\n</tr>\n<tr>\n<td>HasRequired<ttargetentity></ttargetentity></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg679232(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">RequiredNavigationPropertyConfiguration</a></td>\n<td>配置此实体类型所需的关系. 实体类型的实例将无法保存到数据库，除非指定了该关系. 数据库中的外键将不可为空.</td>\n</tr>\n<tr>\n<td>Ignore<tproperty></tproperty></td>\n<td>Void</td>\n<td>从模型中排除属性，使其不会映射到数据库.</td>\n</tr>\n<tr>\n<td>Map</td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></td>\n<td>允许与实体类型映射到数据库模式的高级配置相关.</td>\n</tr>\n<tr>\n<td>Property<t></t></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg679411(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">StructuralTypeConfiguration</a></td>\n<td>配置在此类型上定义的struct属性.</td>\n</tr>\n<tr>\n<td>ToTable</td>\n<td>Void</td>\n<td>配置此实体映射到数据库的名称.</td>\n</tr>\n</tbody></table>\n<p>更多的方法可以查看 MSDN <a href=\"http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a>.</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"EntityTypeConfiguration\"><a href=\"#EntityTypeConfiguration\" class=\"headerlink\" title=\"EntityTypeConfiguration\"></a>EntityTypeConfiguration</h2><h3 id=\"00-00-EntityTypeConfiguration-简介\"><a href=\"#00-00-EntityTypeConfiguration-简介\" class=\"headerlink\" title=\"00.00 EntityTypeConfiguration 简介\"></a>00.00 EntityTypeConfiguration 简介</h3><p>在使用 Fluent API 之前, 先看一个非常重要的类: <a href=\"https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></p>\n<p><a href=\"https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a> 类提供了很多配置 实体或属性 的重要方法, 实现覆盖各种Code-First约定</p>\n<h3 id=\"00-01-EntityTypeConfiguration-来源\"><a href=\"#00-01-EntityTypeConfiguration-来源\" class=\"headerlink\" title=\"00.01 EntityTypeConfiguration 来源\"></a>00.01 EntityTypeConfiguration 来源</h3><p>大概知道了这个类能干嘛, 那它可以从哪里获得呢?</p>\n<p>通常在我们的 DbContext 中，我们会重写 OnModelCreating 方法</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected override void OnModelCreating(DbModelBuilder modelBuilder)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    base.OnModelCreating(modelBuilder);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>此方法带有 DbModelBuilder 类型参数 modelBuilder，而 modelBuilder.Entity&lt;TEntity&gt;() 方法返回值类型就是 <a href=\"https://msdn.microsoft.com/en-us/library/gg696117(v=vs.113).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></p>\n<p>把 OnModelCreating 方法更改为</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protected override void OnModelCreating(DbModelBuilder modelBuilder)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    EntityTypeConfiguration&lt;TEntity&gt; tEntityCfg = modelBuilder.Entity&lt;TEntity&gt;();</span><br><span class=\"line\">    base.OnModelCreating(modelBuilder);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>此时我们就可以使用 tEntityCfg 来配置 TEntity 的实体或属性了</p>\n<h3 id=\"00-02-EntityTypeConfiguration-常用重要方法\"><a href=\"#00-02-EntityTypeConfiguration-常用重要方法\" class=\"headerlink\" title=\"00.02 EntityTypeConfiguration 常用重要方法\"></a>00.02 EntityTypeConfiguration 常用重要方法</h3><table>\n<thead>\n<tr>\n<th>方法名</th>\n<th>返回类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>HasKey<tkey></tkey></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></td>\n<td>为此实体配置主键属性</td>\n</tr>\n<tr>\n<td>HasMany<ttargetentity></ttargetentity></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg679342(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">ManyNavigationPropertyConfiguration</a></td>\n<td>配置实体类型多对多关系</td>\n</tr>\n<tr>\n<td>HasOptional<ttargetentity></ttargetentity></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg696420(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">OptionalNavigationPropertyConfiguration</a></td>\n<td>配置此实体类型的可选关系. 实体类型的实例可以保存到数据库，而不指定此关系. 数据库中的外键将为空.</td>\n</tr>\n<tr>\n<td>HasRequired<ttargetentity></ttargetentity></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg679232(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">RequiredNavigationPropertyConfiguration</a></td>\n<td>配置此实体类型所需的关系. 实体类型的实例将无法保存到数据库，除非指定了该关系. 数据库中的外键将不可为空.</td>\n</tr>\n<tr>\n<td>Ignore<tproperty></tproperty></td>\n<td>Void</td>\n<td>从模型中排除属性，使其不会映射到数据库.</td>\n</tr>\n<tr>\n<td>Map</td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a></td>\n<td>允许与实体类型映射到数据库模式的高级配置相关.</td>\n</tr>\n<tr>\n<td>Property<t></t></td>\n<td><a href=\"http://msdn.microsoft.com/en-us/library/gg679411(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">StructuralTypeConfiguration</a></td>\n<td>配置在此类型上定义的struct属性.</td>\n</tr>\n<tr>\n<td>ToTable</td>\n<td>Void</td>\n<td>配置此实体映射到数据库的名称.</td>\n</tr>\n</tbody></table>\n<p>更多的方法可以查看 MSDN <a href=\"http://msdn.microsoft.com/en-us/library/gg696117(v=vs.103).aspx\" target=\"_blank\" rel=\"noopener\">EntityTypeConfiguration</a>.</p>\n"},{"_content":"# app.Use vs app.Run in ASP.NET Core middleware\n> 原文链接: [app.Use vs app.Run in ASP.NET Core middleware](http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/)\n\n**app.Run** 和 **app.Use** 都应用于中间件, 到底有什么不同过呢?\n\n## 00.00 不同之处\n在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 **app.Use** 定义的中间件可能会调用下一个中间件组件.\n而使用 **app.Run** 定义的中间件, 永远不会调用后续的中间件\n\n## 00.01 从代码看\n创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.\n```csharp\npublic void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)\n{\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n\n    app.Run(async context => { \n       await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Run</div>\"); \n    });\n\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Another Middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n    app.UseIISPlatformHandler(options => options.AuthenticationDescriptions.Clear());\n    app.UseStaticFiles();\n    app.UseIdentity();\n    app.UseMvc(routes =>\n    {\n        routes.MapRoute(\n            name: \"default\",\n            template: \"{controller=Home}/{action=Index}/{id?}\");\n    });\n}\n```\n以上示例使用 **app.Use** 定义了 2 个内联中间件，使用 **app.Run** 定义了 1 个内联中间件. \n\n使用 **app.Use** 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 **app.Run** 定义的中间件写入消息，然后返回.\n\n在 **app.Run** 中间件之后，我们使用 **app.Use** 定义了另一个内联中间件，并且还使用了一些内置的中间件\n\n## 00.02 运行结果\n运行应用程序时的输出结果:\n```\nInside middleware defined using app.Use\nInside middleware defined using app.Run\n```\n\n如之前描述, 定义在 **app.Run** 之后的中间件不会被执行. 这就是为什么第二个使用 **app.Use** 定义的中间件没有响应的原因.","source":"csharp/app.Use-vs-app.Run.md","raw":"# app.Use vs app.Run in ASP.NET Core middleware\n> 原文链接: [app.Use vs app.Run in ASP.NET Core middleware](http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/)\n\n**app.Run** 和 **app.Use** 都应用于中间件, 到底有什么不同过呢?\n\n## 00.00 不同之处\n在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 **app.Use** 定义的中间件可能会调用下一个中间件组件.\n而使用 **app.Run** 定义的中间件, 永远不会调用后续的中间件\n\n## 00.01 从代码看\n创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.\n```csharp\npublic void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)\n{\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n\n    app.Run(async context => { \n       await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Run</div>\"); \n    });\n\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Another Middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n    app.UseIISPlatformHandler(options => options.AuthenticationDescriptions.Clear());\n    app.UseStaticFiles();\n    app.UseIdentity();\n    app.UseMvc(routes =>\n    {\n        routes.MapRoute(\n            name: \"default\",\n            template: \"{controller=Home}/{action=Index}/{id?}\");\n    });\n}\n```\n以上示例使用 **app.Use** 定义了 2 个内联中间件，使用 **app.Run** 定义了 1 个内联中间件. \n\n使用 **app.Use** 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 **app.Run** 定义的中间件写入消息，然后返回.\n\n在 **app.Run** 中间件之后，我们使用 **app.Use** 定义了另一个内联中间件，并且还使用了一些内置的中间件\n\n## 00.02 运行结果\n运行应用程序时的输出结果:\n```\nInside middleware defined using app.Use\nInside middleware defined using app.Run\n```\n\n如之前描述, 定义在 **app.Run** 之后的中间件不会被执行. 这就是为什么第二个使用 **app.Use** 定义的中间件没有响应的原因.","date":"2020-01-09T20:21:18.110Z","updated":"2020-01-09T20:21:18.110Z","path":"csharp/app.Use-vs-app.Run.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qp000ibica28tdpdi8","content":"<h1 id=\"app-Use-vs-app-Run-in-ASP-NET-Core-middleware\"><a href=\"#app-Use-vs-app-Run-in-ASP-NET-Core-middleware\" class=\"headerlink\" title=\"app.Use vs app.Run in ASP.NET Core middleware\"></a>app.Use vs app.Run in ASP.NET Core middleware</h1><blockquote>\n<p>原文链接: <a href=\"http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/\" target=\"_blank\" rel=\"noopener\">app.Use vs app.Run in ASP.NET Core middleware</a></p>\n</blockquote>\n<p><strong>app.Run</strong> 和 <strong>app.Use</strong> 都应用于中间件, 到底有什么不同过呢?</p>\n<h2 id=\"00-00-不同之处\"><a href=\"#00-00-不同之处\" class=\"headerlink\" title=\"00.00 不同之处\"></a>00.00 不同之处</h2><p>在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 <strong>app.Use</strong> 定义的中间件可能会调用下一个中间件组件.<br>而使用 <strong>app.Run</strong> 定义的中间件, 永远不会调用后续的中间件</p>\n<h2 id=\"00-01-从代码看\"><a href=\"#00-01-从代码看\" class=\"headerlink\" title=\"00.01 从代码看\"></a>00.01 从代码看</h2><p>创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Run(<span class=\"keyword\">async</span> context =&gt; &#123; </span><br><span class=\"line\">       <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Run&lt;/div&gt;\"</span>); </span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Another Middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    app.UseIISPlatformHandler(options =&gt; options.AuthenticationDescriptions.Clear());</span><br><span class=\"line\">    app.UseStaticFiles();</span><br><span class=\"line\">    app.UseIdentity();</span><br><span class=\"line\">    app.UseMvc(routes =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        routes.MapRoute(</span><br><span class=\"line\">            name: <span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">            template: <span class=\"string\">\"&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>以上示例使用 <strong>app.Use</strong> 定义了 2 个内联中间件，使用 <strong>app.Run</strong> 定义了 1 个内联中间件. </p>\n<p>使用 <strong>app.Use</strong> 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 <strong>app.Run</strong> 定义的中间件写入消息，然后返回.</p>\n<p>在 <strong>app.Run</strong> 中间件之后，我们使用 <strong>app.Use</strong> 定义了另一个内联中间件，并且还使用了一些内置的中间件</p>\n<h2 id=\"00-02-运行结果\"><a href=\"#00-02-运行结果\" class=\"headerlink\" title=\"00.02 运行结果\"></a>00.02 运行结果</h2><p>运行应用程序时的输出结果:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Inside middleware defined using app.Use</span><br><span class=\"line\">Inside middleware defined using app.Run</span><br></pre></td></tr></table></figure>\n\n<p>如之前描述, 定义在 <strong>app.Run</strong> 之后的中间件不会被执行. 这就是为什么第二个使用 <strong>app.Use</strong> 定义的中间件没有响应的原因.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"app-Use-vs-app-Run-in-ASP-NET-Core-middleware\"><a href=\"#app-Use-vs-app-Run-in-ASP-NET-Core-middleware\" class=\"headerlink\" title=\"app.Use vs app.Run in ASP.NET Core middleware\"></a>app.Use vs app.Run in ASP.NET Core middleware</h1><blockquote>\n<p>原文链接: <a href=\"http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/\" target=\"_blank\" rel=\"noopener\">app.Use vs app.Run in ASP.NET Core middleware</a></p>\n</blockquote>\n<p><strong>app.Run</strong> 和 <strong>app.Use</strong> 都应用于中间件, 到底有什么不同过呢?</p>\n<h2 id=\"00-00-不同之处\"><a href=\"#00-00-不同之处\" class=\"headerlink\" title=\"00.00 不同之处\"></a>00.00 不同之处</h2><p>在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 <strong>app.Use</strong> 定义的中间件可能会调用下一个中间件组件.<br>而使用 <strong>app.Run</strong> 定义的中间件, 永远不会调用后续的中间件</p>\n<h2 id=\"00-01-从代码看\"><a href=\"#00-01-从代码看\" class=\"headerlink\" title=\"00.01 从代码看\"></a>00.01 从代码看</h2><p>创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Run(<span class=\"keyword\">async</span> context =&gt; &#123; </span><br><span class=\"line\">       <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Run&lt;/div&gt;\"</span>); </span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Another Middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    app.UseIISPlatformHandler(options =&gt; options.AuthenticationDescriptions.Clear());</span><br><span class=\"line\">    app.UseStaticFiles();</span><br><span class=\"line\">    app.UseIdentity();</span><br><span class=\"line\">    app.UseMvc(routes =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        routes.MapRoute(</span><br><span class=\"line\">            name: <span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">            template: <span class=\"string\">\"&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>以上示例使用 <strong>app.Use</strong> 定义了 2 个内联中间件，使用 <strong>app.Run</strong> 定义了 1 个内联中间件. </p>\n<p>使用 <strong>app.Use</strong> 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 <strong>app.Run</strong> 定义的中间件写入消息，然后返回.</p>\n<p>在 <strong>app.Run</strong> 中间件之后，我们使用 <strong>app.Use</strong> 定义了另一个内联中间件，并且还使用了一些内置的中间件</p>\n<h2 id=\"00-02-运行结果\"><a href=\"#00-02-运行结果\" class=\"headerlink\" title=\"00.02 运行结果\"></a>00.02 运行结果</h2><p>运行应用程序时的输出结果:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Inside middleware defined using app.Use</span><br><span class=\"line\">Inside middleware defined using app.Run</span><br></pre></td></tr></table></figure>\n\n<p>如之前描述, 定义在 <strong>app.Run</strong> 之后的中间件不会被执行. 这就是为什么第二个使用 <strong>app.Use</strong> 定义的中间件没有响应的原因.</p>\n"},{"_content":"# Code First 中数据库初始化策略\n## 00.00 Code First 中支持 4 种数据库初始化策略\n* CreateDatabaseIfNotExists\n  > 这是默认的初始化程序。顾名思义，如果没有配置，它将创建数据库。但是，如果更改模型类，然后使用该初始化程序运行应用程序，那么它将抛出异常\n* DropCreateDatabaseIfModelChanges\n  > 如果您的模型类（实体类）已更改，则此初始化程序将删除现有数据库并创建新数据库。因此，当您的模型类更改时，您无需担心维护数据库模式\n* DropCreateDatabaseAlways\n  > 顾名思义，该初始化程序在每次运行应用程序时都会删除现有数据库，而不管您的模型类是否已更改。当您需要新鲜数据库时，每次运行应用程序时，就像在开发应用程序时一样\n* Custom DB Initializer\n  > 您还可以创建自己的自定义初始化程序，如果上述任何一个都不满足您的要求，或者您想使用上述初始化程序初始化数据库的其他进程\n\n## 01.00 使用方法\n```CSharp\npublic class YourDBContext: DbContext \n{\n    public YourDBContext(): base(\"YourDBConnectionString\") \n    {\n        Database.SetInitializer<YourDBContext>(new CreateDatabaseIfNotExists<YourDBContext>());\n\n        //Database.SetInitializer<YourDBContext>(new DropCreateDatabaseIfModelChanges<YourDBContext>());\n        //Database.SetInitializer<YourDBContext>(new DropCreateDatabaseAlways<YourDBContext>());\n        //Database.SetInitializer<YourDBContext>(new YourDBInitializer());\n    }\n    public DbSet<Student> Students { get; set; }\n    public DbSet<Standard> Standards { get; set; }\n}\n```\n\n## 02.00 创建自己的初始化器\n可以继承 4 种中的任意一种来实现自己的初始化器\n\n```CSharp\npublic class YourDBInitializer :  CreateDatabaseIfNotExists<YourDBContext>\n{\n    protected override void Seed(YourDBContext context)\n    {\n        base.Seed(context);\n    }\n}\n```\n\n## 03.00 在配置文件设置数据库初始化器\n\n在 app.config 中设置\n```XML\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<configuration>\n    <appSettings>\n    <add key=\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"         \n        value=\"System.Data.Entity.DropCreateDatabaseAlways`1[[YourDataLayer.YourDBContext, YourDataLayer]], EntityFramework\" />\n    </appSettings>\n</configuration>\n```\n\n在配置文件中使用自己的初始化器\n```XML\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<configuration>\n    <appSettings>    \n    <add key=\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"\n            value=\"YourDataLayer.YourDBInitializer, YourDataLayer\" />\n    </appSettings>\n</configuration>\n```\n\n## 04.00 Code First 中关闭数据库初始化器\n在生产环境中, 你不想丢失已经存在的数据, 那么你可以关闭初始化器\n```CSharp\npublic class YourDBContext: DbContext \n{\n    public YourDBContext() : base(\"YourDBContextDBConnectionString\")\n    {            \n        //Disable initializer\n        Database.SetInitializer<YourDBContext>(null);\n    }\n    public DbSet<Student> Students { get; set; }\n    public DbSet<Standard> Standards { get; set; }\n}\n```\n\n在配置文件中关闭初始化器\n```XML\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<configuration>\n    <appSettings>    \n    <add key=\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"\n            value=\"Disabled\" />\n    </appSettings>\n</configuration>\n```","source":"ef_code_first/16.00 DB-Initialization-Strategy.md","raw":"# Code First 中数据库初始化策略\n## 00.00 Code First 中支持 4 种数据库初始化策略\n* CreateDatabaseIfNotExists\n  > 这是默认的初始化程序。顾名思义，如果没有配置，它将创建数据库。但是，如果更改模型类，然后使用该初始化程序运行应用程序，那么它将抛出异常\n* DropCreateDatabaseIfModelChanges\n  > 如果您的模型类（实体类）已更改，则此初始化程序将删除现有数据库并创建新数据库。因此，当您的模型类更改时，您无需担心维护数据库模式\n* DropCreateDatabaseAlways\n  > 顾名思义，该初始化程序在每次运行应用程序时都会删除现有数据库，而不管您的模型类是否已更改。当您需要新鲜数据库时，每次运行应用程序时，就像在开发应用程序时一样\n* Custom DB Initializer\n  > 您还可以创建自己的自定义初始化程序，如果上述任何一个都不满足您的要求，或者您想使用上述初始化程序初始化数据库的其他进程\n\n## 01.00 使用方法\n```CSharp\npublic class YourDBContext: DbContext \n{\n    public YourDBContext(): base(\"YourDBConnectionString\") \n    {\n        Database.SetInitializer<YourDBContext>(new CreateDatabaseIfNotExists<YourDBContext>());\n\n        //Database.SetInitializer<YourDBContext>(new DropCreateDatabaseIfModelChanges<YourDBContext>());\n        //Database.SetInitializer<YourDBContext>(new DropCreateDatabaseAlways<YourDBContext>());\n        //Database.SetInitializer<YourDBContext>(new YourDBInitializer());\n    }\n    public DbSet<Student> Students { get; set; }\n    public DbSet<Standard> Standards { get; set; }\n}\n```\n\n## 02.00 创建自己的初始化器\n可以继承 4 种中的任意一种来实现自己的初始化器\n\n```CSharp\npublic class YourDBInitializer :  CreateDatabaseIfNotExists<YourDBContext>\n{\n    protected override void Seed(YourDBContext context)\n    {\n        base.Seed(context);\n    }\n}\n```\n\n## 03.00 在配置文件设置数据库初始化器\n\n在 app.config 中设置\n```XML\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<configuration>\n    <appSettings>\n    <add key=\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"         \n        value=\"System.Data.Entity.DropCreateDatabaseAlways`1[[YourDataLayer.YourDBContext, YourDataLayer]], EntityFramework\" />\n    </appSettings>\n</configuration>\n```\n\n在配置文件中使用自己的初始化器\n```XML\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<configuration>\n    <appSettings>    \n    <add key=\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"\n            value=\"YourDataLayer.YourDBInitializer, YourDataLayer\" />\n    </appSettings>\n</configuration>\n```\n\n## 04.00 Code First 中关闭数据库初始化器\n在生产环境中, 你不想丢失已经存在的数据, 那么你可以关闭初始化器\n```CSharp\npublic class YourDBContext: DbContext \n{\n    public YourDBContext() : base(\"YourDBContextDBConnectionString\")\n    {            \n        //Disable initializer\n        Database.SetInitializer<YourDBContext>(null);\n    }\n    public DbSet<Student> Students { get; set; }\n    public DbSet<Standard> Standards { get; set; }\n}\n```\n\n在配置文件中关闭初始化器\n```XML\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<configuration>\n    <appSettings>    \n    <add key=\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"\n            value=\"Disabled\" />\n    </appSettings>\n</configuration>\n```","date":"2020-01-09T20:21:18.111Z","updated":"2020-01-09T20:21:18.111Z","path":"ef_code_first/16.00 DB-Initialization-Strategy.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qq000kbicay1e383yr","content":"<h1 id=\"Code-First-中数据库初始化策略\"><a href=\"#Code-First-中数据库初始化策略\" class=\"headerlink\" title=\"Code First 中数据库初始化策略\"></a>Code First 中数据库初始化策略</h1><h2 id=\"00-00-Code-First-中支持-4-种数据库初始化策略\"><a href=\"#00-00-Code-First-中支持-4-种数据库初始化策略\" class=\"headerlink\" title=\"00.00 Code First 中支持 4 种数据库初始化策略\"></a>00.00 Code First 中支持 4 种数据库初始化策略</h2><ul>\n<li>CreateDatabaseIfNotExists<blockquote>\n<p>这是默认的初始化程序。顾名思义，如果没有配置，它将创建数据库。但是，如果更改模型类，然后使用该初始化程序运行应用程序，那么它将抛出异常</p>\n</blockquote>\n</li>\n<li>DropCreateDatabaseIfModelChanges<blockquote>\n<p>如果您的模型类（实体类）已更改，则此初始化程序将删除现有数据库并创建新数据库。因此，当您的模型类更改时，您无需担心维护数据库模式</p>\n</blockquote>\n</li>\n<li>DropCreateDatabaseAlways<blockquote>\n<p>顾名思义，该初始化程序在每次运行应用程序时都会删除现有数据库，而不管您的模型类是否已更改。当您需要新鲜数据库时，每次运行应用程序时，就像在开发应用程序时一样</p>\n</blockquote>\n</li>\n<li>Custom DB Initializer<blockquote>\n<p>您还可以创建自己的自定义初始化程序，如果上述任何一个都不满足您的要求，或者您想使用上述初始化程序初始化数据库的其他进程</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"01-00-使用方法\"><a href=\"#01-00-使用方法\" class=\"headerlink\" title=\"01.00 使用方法\"></a>01.00 使用方法</h2><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">YourDBContext</span>: <span class=\"title\">DbContext</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">YourDBContext</span>(<span class=\"params\"></span>): <span class=\"title\">base</span>(<span class=\"params\"><span class=\"string\">\"YourDBConnectionString\"</span></span>) </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Database.SetInitializer&lt;YourDBContext&gt;(<span class=\"keyword\">new</span> CreateDatabaseIfNotExists&lt;YourDBContext&gt;());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//Database.SetInitializer&lt;YourDBContext&gt;(new DropCreateDatabaseIfModelChanges&lt;YourDBContext&gt;());</span></span><br><span class=\"line\">        <span class=\"comment\">//Database.SetInitializer&lt;YourDBContext&gt;(new DropCreateDatabaseAlways&lt;YourDBContext&gt;());</span></span><br><span class=\"line\">        <span class=\"comment\">//Database.SetInitializer&lt;YourDBContext&gt;(new YourDBInitializer());</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Student&gt; Students &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Standard&gt; Standards &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"02-00-创建自己的初始化器\"><a href=\"#02-00-创建自己的初始化器\" class=\"headerlink\" title=\"02.00 创建自己的初始化器\"></a>02.00 创建自己的初始化器</h2><p>可以继承 4 种中的任意一种来实现自己的初始化器</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class YourDBInitializer :  CreateDatabaseIfNotExists&lt;YourDBContext&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">Seed</span>(<span class=\"params\">YourDBContext context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">base</span>.Seed(context);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"03-00-在配置文件设置数据库初始化器\"><a href=\"#03-00-在配置文件设置数据库初始化器\" class=\"headerlink\" title=\"03.00 在配置文件设置数据库初始化器\"></a>03.00 在配置文件设置数据库初始化器</h2><p>在 app.config 中设置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"</span>         </span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">value</span>=<span class=\"string\">\"System.Data.Entity.DropCreateDatabaseAlways`1[[YourDataLayer.YourDBContext, YourDataLayer]], EntityFramework\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>在配置文件中使用自己的初始化器</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span>    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">value</span>=<span class=\"string\">\"YourDataLayer.YourDBInitializer, YourDataLayer\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"04-00-Code-First-中关闭数据库初始化器\"><a href=\"#04-00-Code-First-中关闭数据库初始化器\" class=\"headerlink\" title=\"04.00 Code First 中关闭数据库初始化器\"></a>04.00 Code First 中关闭数据库初始化器</h2><p>在生产环境中, 你不想丢失已经存在的数据, 那么你可以关闭初始化器</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">YourDBContext</span>: <span class=\"title\">DbContext</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">YourDBContext</span>(<span class=\"params\"></span>) : <span class=\"title\">base</span>(<span class=\"params\"><span class=\"string\">\"YourDBContextDBConnectionString\"</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;            </span><br><span class=\"line\">        <span class=\"comment\">//Disable initializer</span></span><br><span class=\"line\">        Database.SetInitializer&lt;YourDBContext&gt;(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Student&gt; Students &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Standard&gt; Standards &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在配置文件中关闭初始化器</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span>    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">value</span>=<span class=\"string\">\"Disabled\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Code-First-中数据库初始化策略\"><a href=\"#Code-First-中数据库初始化策略\" class=\"headerlink\" title=\"Code First 中数据库初始化策略\"></a>Code First 中数据库初始化策略</h1><h2 id=\"00-00-Code-First-中支持-4-种数据库初始化策略\"><a href=\"#00-00-Code-First-中支持-4-种数据库初始化策略\" class=\"headerlink\" title=\"00.00 Code First 中支持 4 种数据库初始化策略\"></a>00.00 Code First 中支持 4 种数据库初始化策略</h2><ul>\n<li>CreateDatabaseIfNotExists<blockquote>\n<p>这是默认的初始化程序。顾名思义，如果没有配置，它将创建数据库。但是，如果更改模型类，然后使用该初始化程序运行应用程序，那么它将抛出异常</p>\n</blockquote>\n</li>\n<li>DropCreateDatabaseIfModelChanges<blockquote>\n<p>如果您的模型类（实体类）已更改，则此初始化程序将删除现有数据库并创建新数据库。因此，当您的模型类更改时，您无需担心维护数据库模式</p>\n</blockquote>\n</li>\n<li>DropCreateDatabaseAlways<blockquote>\n<p>顾名思义，该初始化程序在每次运行应用程序时都会删除现有数据库，而不管您的模型类是否已更改。当您需要新鲜数据库时，每次运行应用程序时，就像在开发应用程序时一样</p>\n</blockquote>\n</li>\n<li>Custom DB Initializer<blockquote>\n<p>您还可以创建自己的自定义初始化程序，如果上述任何一个都不满足您的要求，或者您想使用上述初始化程序初始化数据库的其他进程</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"01-00-使用方法\"><a href=\"#01-00-使用方法\" class=\"headerlink\" title=\"01.00 使用方法\"></a>01.00 使用方法</h2><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">YourDBContext</span>: <span class=\"title\">DbContext</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">YourDBContext</span>(<span class=\"params\"></span>): <span class=\"title\">base</span>(<span class=\"params\"><span class=\"string\">\"YourDBConnectionString\"</span></span>) </span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Database.SetInitializer&lt;YourDBContext&gt;(<span class=\"keyword\">new</span> CreateDatabaseIfNotExists&lt;YourDBContext&gt;());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//Database.SetInitializer&lt;YourDBContext&gt;(new DropCreateDatabaseIfModelChanges&lt;YourDBContext&gt;());</span></span><br><span class=\"line\">        <span class=\"comment\">//Database.SetInitializer&lt;YourDBContext&gt;(new DropCreateDatabaseAlways&lt;YourDBContext&gt;());</span></span><br><span class=\"line\">        <span class=\"comment\">//Database.SetInitializer&lt;YourDBContext&gt;(new YourDBInitializer());</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Student&gt; Students &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Standard&gt; Standards &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"02-00-创建自己的初始化器\"><a href=\"#02-00-创建自己的初始化器\" class=\"headerlink\" title=\"02.00 创建自己的初始化器\"></a>02.00 创建自己的初始化器</h2><p>可以继承 4 种中的任意一种来实现自己的初始化器</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class YourDBInitializer :  CreateDatabaseIfNotExists&lt;YourDBContext&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">override</span> <span class=\"keyword\">void</span> <span class=\"title\">Seed</span>(<span class=\"params\">YourDBContext context</span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">base</span>.Seed(context);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"03-00-在配置文件设置数据库初始化器\"><a href=\"#03-00-在配置文件设置数据库初始化器\" class=\"headerlink\" title=\"03.00 在配置文件设置数据库初始化器\"></a>03.00 在配置文件设置数据库初始化器</h2><p>在 app.config 中设置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"</span>         </span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">value</span>=<span class=\"string\">\"System.Data.Entity.DropCreateDatabaseAlways`1[[YourDataLayer.YourDBContext, YourDataLayer]], EntityFramework\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>在配置文件中使用自己的初始化器</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span>    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">value</span>=<span class=\"string\">\"YourDataLayer.YourDBInitializer, YourDataLayer\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"04-00-Code-First-中关闭数据库初始化器\"><a href=\"#04-00-Code-First-中关闭数据库初始化器\" class=\"headerlink\" title=\"04.00 Code First 中关闭数据库初始化器\"></a>04.00 Code First 中关闭数据库初始化器</h2><p>在生产环境中, 你不想丢失已经存在的数据, 那么你可以关闭初始化器</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">YourDBContext</span>: <span class=\"title\">DbContext</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">YourDBContext</span>(<span class=\"params\"></span>) : <span class=\"title\">base</span>(<span class=\"params\"><span class=\"string\">\"YourDBContextDBConnectionString\"</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;            </span><br><span class=\"line\">        <span class=\"comment\">//Disable initializer</span></span><br><span class=\"line\">        Database.SetInitializer&lt;YourDBContext&gt;(<span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Student&gt; Students &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> DbSet&lt;Standard&gt; Standards &#123; <span class=\"keyword\">get</span>; <span class=\"keyword\">set</span>; &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在配置文件中关闭初始化器</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span>    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"DatabaseInitializerForType YourDataLayer.YourDBContext, YourDataLayer\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">value</span>=<span class=\"string\">\"Disabled\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"_content":"# 00 代理模式\n说到代理模式, 可以和外卖简单类比\n\n在没有外卖出现之前, 我们想买些东西, 自己到指定地点购买(可能我自己比较懒惰, 买完了就回来, 哪里都不去了)\n\n有了外卖之后, 我们一样可以得到自己想要的东西, 只不过是外卖员充当了代理的角色, 利用我们的资源帮助我们完成\n\n外卖员还有其他的送餐任务, 可以先给别人送出, 然后给我送, 最后再给另外的人送餐\n\n## 00.00 简单的代码实现\n\n**模拟自己买东西:**\n```csharp\npublic interface IBuyModule\n{\n    void BuySomething();\n}\n\npublic class BuyModule : IBuyModule\n{\n    public void BuySomething()\n    {\n        Console.WriteLine(\"buy food!\");\n    }\n}\n\nstaic void Main(String[] args)\n{\n    IBuyModule buy = new BuyModule();\n    buy.BuySomething();\n}\n```\n\n**创建送餐员代理:**\n```csharp\npublic class BuyModuleProxy : IBuyModule\n{\n    BuyModule _bm;\n    public BuyModuleProxy()\n    {\n        _bm = new BuyModule();\n    }\n\n    public void BuySomething()\n    {\n        _bm.BuySomething();\n    }\n}\n\nstaic void Main(String[] args)\n{\n    IBuyModule buyProxy = new BuyModuleProxy();\n    buyProxy.BuySomething();\n}\n```\n\nBuyModuleProxy 充当我们自己和卖东西地点之间的中间人角色, 可以在调用真实方法 BuySomething 之前和之后执行任何想要的操作\n\n```csharp\npublic void BuySomething(){\n    Console.WriteLine(\"给别人买东西\");\n    Console.WriteLine(\"给别人送东西\");\n    _bm.BuySomething(); // 给我们自己买\n    Console.WriteLine(\"给我们送东西\");\n}\n```\n\n> 对于只有一个方法的类来说还可以接受, 但如果这个类有十几个方法, 我们也还要实现十几个吗!! 显然不会这么做","source":"design_patterns/proxy.md","raw":"# 00 代理模式\n说到代理模式, 可以和外卖简单类比\n\n在没有外卖出现之前, 我们想买些东西, 自己到指定地点购买(可能我自己比较懒惰, 买完了就回来, 哪里都不去了)\n\n有了外卖之后, 我们一样可以得到自己想要的东西, 只不过是外卖员充当了代理的角色, 利用我们的资源帮助我们完成\n\n外卖员还有其他的送餐任务, 可以先给别人送出, 然后给我送, 最后再给另外的人送餐\n\n## 00.00 简单的代码实现\n\n**模拟自己买东西:**\n```csharp\npublic interface IBuyModule\n{\n    void BuySomething();\n}\n\npublic class BuyModule : IBuyModule\n{\n    public void BuySomething()\n    {\n        Console.WriteLine(\"buy food!\");\n    }\n}\n\nstaic void Main(String[] args)\n{\n    IBuyModule buy = new BuyModule();\n    buy.BuySomething();\n}\n```\n\n**创建送餐员代理:**\n```csharp\npublic class BuyModuleProxy : IBuyModule\n{\n    BuyModule _bm;\n    public BuyModuleProxy()\n    {\n        _bm = new BuyModule();\n    }\n\n    public void BuySomething()\n    {\n        _bm.BuySomething();\n    }\n}\n\nstaic void Main(String[] args)\n{\n    IBuyModule buyProxy = new BuyModuleProxy();\n    buyProxy.BuySomething();\n}\n```\n\nBuyModuleProxy 充当我们自己和卖东西地点之间的中间人角色, 可以在调用真实方法 BuySomething 之前和之后执行任何想要的操作\n\n```csharp\npublic void BuySomething(){\n    Console.WriteLine(\"给别人买东西\");\n    Console.WriteLine(\"给别人送东西\");\n    _bm.BuySomething(); // 给我们自己买\n    Console.WriteLine(\"给我们送东西\");\n}\n```\n\n> 对于只有一个方法的类来说还可以接受, 但如果这个类有十几个方法, 我们也还要实现十几个吗!! 显然不会这么做","date":"2020-01-09T20:21:18.111Z","updated":"2020-01-09T20:21:18.111Z","path":"design_patterns/proxy.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qr000mbica83px3147","content":"<h1 id=\"00-代理模式\"><a href=\"#00-代理模式\" class=\"headerlink\" title=\"00 代理模式\"></a>00 代理模式</h1><p>说到代理模式, 可以和外卖简单类比</p>\n<p>在没有外卖出现之前, 我们想买些东西, 自己到指定地点购买(可能我自己比较懒惰, 买完了就回来, 哪里都不去了)</p>\n<p>有了外卖之后, 我们一样可以得到自己想要的东西, 只不过是外卖员充当了代理的角色, 利用我们的资源帮助我们完成</p>\n<p>外卖员还有其他的送餐任务, 可以先给别人送出, 然后给我送, 最后再给另外的人送餐</p>\n<h2 id=\"00-00-简单的代码实现\"><a href=\"#00-00-简单的代码实现\" class=\"headerlink\" title=\"00.00 简单的代码实现\"></a>00.00 简单的代码实现</h2><p><strong>模拟自己买东西:</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title\">IBuyModule</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">BuyModule</span> : <span class=\"title\">IBuyModule</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Console.WriteLine(<span class=\"string\">\"buy food!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">staic <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\">String[] args</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    IBuyModule buy = <span class=\"keyword\">new</span> BuyModule();</span><br><span class=\"line\">    buy.BuySomething();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>创建送餐员代理:</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">BuyModuleProxy</span> : <span class=\"title\">IBuyModule</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    BuyModule _bm;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">BuyModuleProxy</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        _bm = <span class=\"keyword\">new</span> BuyModule();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        _bm.BuySomething();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">staic <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\">String[] args</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    IBuyModule buyProxy = <span class=\"keyword\">new</span> BuyModuleProxy();</span><br><span class=\"line\">    buyProxy.BuySomething();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>BuyModuleProxy 充当我们自己和卖东西地点之间的中间人角色, 可以在调用真实方法 BuySomething 之前和之后执行任何想要的操作</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    Console.WriteLine(<span class=\"string\">\"给别人买东西\"</span>);</span><br><span class=\"line\">    Console.WriteLine(<span class=\"string\">\"给别人送东西\"</span>);</span><br><span class=\"line\">    _bm.BuySomething(); <span class=\"comment\">// 给我们自己买</span></span><br><span class=\"line\">    Console.WriteLine(<span class=\"string\">\"给我们送东西\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>对于只有一个方法的类来说还可以接受, 但如果这个类有十几个方法, 我们也还要实现十几个吗!! 显然不会这么做</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"00-代理模式\"><a href=\"#00-代理模式\" class=\"headerlink\" title=\"00 代理模式\"></a>00 代理模式</h1><p>说到代理模式, 可以和外卖简单类比</p>\n<p>在没有外卖出现之前, 我们想买些东西, 自己到指定地点购买(可能我自己比较懒惰, 买完了就回来, 哪里都不去了)</p>\n<p>有了外卖之后, 我们一样可以得到自己想要的东西, 只不过是外卖员充当了代理的角色, 利用我们的资源帮助我们完成</p>\n<p>外卖员还有其他的送餐任务, 可以先给别人送出, 然后给我送, 最后再给另外的人送餐</p>\n<h2 id=\"00-00-简单的代码实现\"><a href=\"#00-00-简单的代码实现\" class=\"headerlink\" title=\"00.00 简单的代码实现\"></a>00.00 简单的代码实现</h2><p><strong>模拟自己买东西:</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title\">IBuyModule</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">BuyModule</span> : <span class=\"title\">IBuyModule</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        Console.WriteLine(<span class=\"string\">\"buy food!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">staic <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\">String[] args</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    IBuyModule buy = <span class=\"keyword\">new</span> BuyModule();</span><br><span class=\"line\">    buy.BuySomething();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>创建送餐员代理:</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">BuyModuleProxy</span> : <span class=\"title\">IBuyModule</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    BuyModule _bm;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">BuyModuleProxy</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        _bm = <span class=\"keyword\">new</span> BuyModule();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        _bm.BuySomething();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">staic <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\">String[] args</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    IBuyModule buyProxy = <span class=\"keyword\">new</span> BuyModuleProxy();</span><br><span class=\"line\">    buyProxy.BuySomething();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>BuyModuleProxy 充当我们自己和卖东西地点之间的中间人角色, 可以在调用真实方法 BuySomething 之前和之后执行任何想要的操作</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">BuySomething</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    Console.WriteLine(<span class=\"string\">\"给别人买东西\"</span>);</span><br><span class=\"line\">    Console.WriteLine(<span class=\"string\">\"给别人送东西\"</span>);</span><br><span class=\"line\">    _bm.BuySomething(); <span class=\"comment\">// 给我们自己买</span></span><br><span class=\"line\">    Console.WriteLine(<span class=\"string\">\"给我们送东西\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>对于只有一个方法的类来说还可以接受, 但如果这个类有十几个方法, 我们也还要实现十几个吗!! 显然不会这么做</p>\n</blockquote>\n"},{"_content":"## 0. 先将 Resharper 补丁文件解压到固定位置\n\n## 1. 使用 nssm.exe 将 .exe 文件作为服务\n\n`.\\nssm install Resharper C:\\winr\\Resharper2017\\IntelliJIDEALicenseServer_windows_amd64.exe`","source":"dev_tools/Resharper-nssm.md","raw":"## 0. 先将 Resharper 补丁文件解压到固定位置\n\n## 1. 使用 nssm.exe 将 .exe 文件作为服务\n\n`.\\nssm install Resharper C:\\winr\\Resharper2017\\IntelliJIDEALicenseServer_windows_amd64.exe`","date":"2020-01-09T20:21:18.111Z","updated":"2020-01-09T20:21:18.111Z","path":"dev_tools/Resharper-nssm.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qs000obica60b5b8ub","content":"<h2 id=\"0-先将-Resharper-补丁文件解压到固定位置\"><a href=\"#0-先将-Resharper-补丁文件解压到固定位置\" class=\"headerlink\" title=\"0. 先将 Resharper 补丁文件解压到固定位置\"></a>0. 先将 Resharper 补丁文件解压到固定位置</h2><h2 id=\"1-使用-nssm-exe-将-exe-文件作为服务\"><a href=\"#1-使用-nssm-exe-将-exe-文件作为服务\" class=\"headerlink\" title=\"1. 使用 nssm.exe 将 .exe 文件作为服务\"></a>1. 使用 nssm.exe 将 .exe 文件作为服务</h2><p><code>.\\nssm install Resharper C:\\winr\\Resharper2017\\IntelliJIDEALicenseServer_windows_amd64.exe</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"0-先将-Resharper-补丁文件解压到固定位置\"><a href=\"#0-先将-Resharper-补丁文件解压到固定位置\" class=\"headerlink\" title=\"0. 先将 Resharper 补丁文件解压到固定位置\"></a>0. 先将 Resharper 补丁文件解压到固定位置</h2><h2 id=\"1-使用-nssm-exe-将-exe-文件作为服务\"><a href=\"#1-使用-nssm-exe-将-exe-文件作为服务\" class=\"headerlink\" title=\"1. 使用 nssm.exe 将 .exe 文件作为服务\"></a>1. 使用 nssm.exe 将 .exe 文件作为服务</h2><p><code>.\\nssm install Resharper C:\\winr\\Resharper2017\\IntelliJIDEALicenseServer_windows_amd64.exe</code></p>\n"},{"_content":"* 安装 go\n* 添加 GOPATH 这个系统变量变量\n\n    ![](/assets/dev_tools/go_env.png)\n* 安装插件\n    ```go\n    go get -u -v github.com/nsf/gocode\n    go get -u -v github.com/rogpeppe/godef\n    go get -u -v github.com/golang/lint/golint\n    go get -u -v github.com/lukehoban/go-find-references\n    go get -u -v github.com/lukehoban/go-outline\n    go get -u -v sourcegraph.com/sqs/goreturns\n    go get -u -v golang.org/x/tools/cmd/gorename\n    go get -u -v github.com/tpng/gopkgs\n    go get -u -v github.com/newhook/go-symbols\n    ```\n    安装完成后, 在 GOPATH 指定的目录中 src 文件夹下会多出几个文件夹, 即插件的文件夹\n* 测试\n\n    用 vscode 打开 GOPATH, 在根目录创建测试文件 test.go\n\n    输入相应代码\n    ```go\n    package main\n\n    import \"fmt\"\n\n    func main(){\n        fmt.Println(\"fsdsfsd\")\n    }\n    ```\n\n    运行 `go run test.go`","source":"dev_tools/go.md","raw":"* 安装 go\n* 添加 GOPATH 这个系统变量变量\n\n    ![](/assets/dev_tools/go_env.png)\n* 安装插件\n    ```go\n    go get -u -v github.com/nsf/gocode\n    go get -u -v github.com/rogpeppe/godef\n    go get -u -v github.com/golang/lint/golint\n    go get -u -v github.com/lukehoban/go-find-references\n    go get -u -v github.com/lukehoban/go-outline\n    go get -u -v sourcegraph.com/sqs/goreturns\n    go get -u -v golang.org/x/tools/cmd/gorename\n    go get -u -v github.com/tpng/gopkgs\n    go get -u -v github.com/newhook/go-symbols\n    ```\n    安装完成后, 在 GOPATH 指定的目录中 src 文件夹下会多出几个文件夹, 即插件的文件夹\n* 测试\n\n    用 vscode 打开 GOPATH, 在根目录创建测试文件 test.go\n\n    输入相应代码\n    ```go\n    package main\n\n    import \"fmt\"\n\n    func main(){\n        fmt.Println(\"fsdsfsd\")\n    }\n    ```\n\n    运行 `go run test.go`","date":"2020-01-09T20:21:18.111Z","updated":"2020-01-09T20:21:18.111Z","path":"dev_tools/go.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8qt000qbicatiwuw6xp","content":"<ul>\n<li><p>安装 go</p>\n</li>\n<li><p>添加 GOPATH 这个系统变量变量</p>\n<p>  <img src=\"/assets/dev_tools/go_env.png\" alt></p>\n</li>\n<li><p>安装插件</p>\n  <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/nsf/gocode</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/rogpeppe/godef</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/golang/lint/golint</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/lukehoban/<span class=\"keyword\">go</span>-find-references</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/lukehoban/<span class=\"keyword\">go</span>-outline</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v sourcegraph.com/sqs/goreturns</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v golang.org/x/tools/cmd/gorename</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/tpng/gopkgs</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/newhook/<span class=\"keyword\">go</span>-symbols</span><br></pre></td></tr></table></figure>\n\n<p>  安装完成后, 在 GOPATH 指定的目录中 src 文件夹下会多出几个文件夹, 即插件的文件夹</p>\n</li>\n<li><p>测试</p>\n<p>  用 vscode 打开 GOPATH, 在根目录创建测试文件 test.go</p>\n<p>  输入相应代码</p>\n  <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">\"fsdsfsd\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  运行 <code>go run test.go</code></p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>安装 go</p>\n</li>\n<li><p>添加 GOPATH 这个系统变量变量</p>\n<p>  <img src=\"/assets/dev_tools/go_env.png\" alt></p>\n</li>\n<li><p>安装插件</p>\n  <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/nsf/gocode</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/rogpeppe/godef</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/golang/lint/golint</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/lukehoban/<span class=\"keyword\">go</span>-find-references</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/lukehoban/<span class=\"keyword\">go</span>-outline</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v sourcegraph.com/sqs/goreturns</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v golang.org/x/tools/cmd/gorename</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/tpng/gopkgs</span><br><span class=\"line\"><span class=\"keyword\">go</span> get -u -v github.com/newhook/<span class=\"keyword\">go</span>-symbols</span><br></pre></td></tr></table></figure>\n\n<p>  安装完成后, 在 GOPATH 指定的目录中 src 文件夹下会多出几个文件夹, 即插件的文件夹</p>\n</li>\n<li><p>测试</p>\n<p>  用 vscode 打开 GOPATH, 在根目录创建测试文件 test.go</p>\n<p>  输入相应代码</p>\n  <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">\"fsdsfsd\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>  运行 <code>go run test.go</code></p>\n</li>\n</ul>\n"},{"title":"VSCode 快捷键","date":"2017-03-28T06:54:49.000Z","_content":"\n### 00. 代码编辑\n对齐选中代码: `ctrl+k, ctrl+f`\n\n对齐整个文件代码: `shift+alt+f`\n\n同时选中所有匹配: `ctrl+shift+L`\n\n智能提示: `ctrl+space`\n\n选中当前行: `ctrl+i`\n\n创建并打开一个文件: `ctrl+click`\n\n### 01. 编辑器\nZen Mode: `ctrl+k z`\n\n并排编辑: `ctrl+\\`\n\n打开文件夹: `ctrl+k, ctrl+o`\n\n关闭当前打开文件夹: `ctrl+k f`\n\n打开一个文件: `ctrl+p`\n\nMarkdown 预览编辑: `ctrl+k v`","source":"essay/index.md","raw":"---\ntitle: VSCode 快捷键\ndate: 2017-03-28 14:54:49\n---\n\n### 00. 代码编辑\n对齐选中代码: `ctrl+k, ctrl+f`\n\n对齐整个文件代码: `shift+alt+f`\n\n同时选中所有匹配: `ctrl+shift+L`\n\n智能提示: `ctrl+space`\n\n选中当前行: `ctrl+i`\n\n创建并打开一个文件: `ctrl+click`\n\n### 01. 编辑器\nZen Mode: `ctrl+k z`\n\n并排编辑: `ctrl+\\`\n\n打开文件夹: `ctrl+k, ctrl+o`\n\n关闭当前打开文件夹: `ctrl+k f`\n\n打开一个文件: `ctrl+p`\n\nMarkdown 预览编辑: `ctrl+k v`","updated":"2020-01-09T20:21:18.111Z","path":"essay/index.html","comments":1,"layout":"page","_id":"ck7m7a8qu000sbicacp2lt2km","content":"<h3 id=\"00-代码编辑\"><a href=\"#00-代码编辑\" class=\"headerlink\" title=\"00. 代码编辑\"></a>00. 代码编辑</h3><p>对齐选中代码: <code>ctrl+k, ctrl+f</code></p>\n<p>对齐整个文件代码: <code>shift+alt+f</code></p>\n<p>同时选中所有匹配: <code>ctrl+shift+L</code></p>\n<p>智能提示: <code>ctrl+space</code></p>\n<p>选中当前行: <code>ctrl+i</code></p>\n<p>创建并打开一个文件: <code>ctrl+click</code></p>\n<h3 id=\"01-编辑器\"><a href=\"#01-编辑器\" class=\"headerlink\" title=\"01. 编辑器\"></a>01. 编辑器</h3><p>Zen Mode: <code>ctrl+k z</code></p>\n<p>并排编辑: <code>ctrl+\\</code></p>\n<p>打开文件夹: <code>ctrl+k, ctrl+o</code></p>\n<p>关闭当前打开文件夹: <code>ctrl+k f</code></p>\n<p>打开一个文件: <code>ctrl+p</code></p>\n<p>Markdown 预览编辑: <code>ctrl+k v</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"00-代码编辑\"><a href=\"#00-代码编辑\" class=\"headerlink\" title=\"00. 代码编辑\"></a>00. 代码编辑</h3><p>对齐选中代码: <code>ctrl+k, ctrl+f</code></p>\n<p>对齐整个文件代码: <code>shift+alt+f</code></p>\n<p>同时选中所有匹配: <code>ctrl+shift+L</code></p>\n<p>智能提示: <code>ctrl+space</code></p>\n<p>选中当前行: <code>ctrl+i</code></p>\n<p>创建并打开一个文件: <code>ctrl+click</code></p>\n<h3 id=\"01-编辑器\"><a href=\"#01-编辑器\" class=\"headerlink\" title=\"01. 编辑器\"></a>01. 编辑器</h3><p>Zen Mode: <code>ctrl+k z</code></p>\n<p>并排编辑: <code>ctrl+\\</code></p>\n<p>打开文件夹: <code>ctrl+k, ctrl+o</code></p>\n<p>关闭当前打开文件夹: <code>ctrl+k f</code></p>\n<p>打开一个文件: <code>ctrl+p</code></p>\n<p>Markdown 预览编辑: <code>ctrl+k v</code></p>\n"},{"title":"Go结构体和指针","date":"2017-10-12T12:23:50.000Z","categories":["go"],"_content":"# Go结构体和指针\n> 原文地址: [jemygraw/TechDoc](https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md)\n\n基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。\n\n## **结构体定义**\n\n上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。\n\n简单来讲，Go提供的`结构体`就是把`使用各种数据类型定义`的`不同变量组合起来`的`高级数据类型`。闲话不多说，看例子:\n\n\ttype Rect struct {\n\t\twidth float64\n\t\tlength float64\n\t}\n\n上面我们定义了一个矩形结构体，首先是关键是`type`表示要`定义一个新的数据类型了`，然后是新的数据类型名称`Rect`，最后是`struct`关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为`width和length的数据类型相同`，还可以写成如下格式：\n\n```go\ntype Rect struct {\n  width, length float64\n}\n```\n\n<!--more-->\n\n好了，来用结构体干点啥吧，计算一下矩形面积。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect Rect\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(rect.width * rect.length)\n}\n```\n从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过`.`来访问内部的成员。包括`给内部成员赋值`和`读取内部成员值`。\n\n在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{width: 100, length: 200}\n\n  fmt.Println(rect.width * rect.length)\n}\n```\n\n当然`如果你知道结构体成员定义的顺序`，也可以不使用`key:value`的方式赋值，`直接按照结构体成员定义的顺序给它们赋值`。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"* Length:\",\n    rect.length, \"= Area:\", rect.width*rect.length)\n}\n```\n输出结果为\n\n\tWidth: 100 * Length: 200 = Area: 20000\n\n**结构体参数传递方式**\n\n我们说过，`Go函数的参数传递方式是值传递`，这句话`对结构体也是适用的`。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc double_area(rect Rect) float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\nfunc main() {\n  var rect = Rect{100, 200}\n  fmt.Println(double_area(rect))\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length)\n}\n```\n上面的例子输出为:\n\n\t80000\n\tWidth: 100 Length: 200\n\n也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。\n\n\n## **结构体组合函数**\n\n上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？\n\n确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。`Go使用组合函数的方式来为结构体定义结构体方法`。我们仔细看一下上面的area()函数定义。\n\n首先是关键字`func`表示这是一个函数，第二个参数是`结构体类型和实例变量`，第三个是`函数名称`，第四个是`函数返回值`。这里我们可以看出area()函数和普通函数定义的`区别就在于`area()函数`多了一个结构体类型限定`。这样一来Go就知道了这是一个为结构体定义的`方法`。\n\n这里需要注意一点就是`定义在结构体上面的函数(function)`一般叫做`方法(method)`。\n\n## **结构体和指针**\n\n我们在指针一节讲到过，`指针的主要作用就是在函数内部改变传递进来变量的值`。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是\\*Rect，结构体遇到指针的时候，你`不需要使用*去访问结构体的成员`，直接使用`.`引用就可以了。所以上面的例子中我们直接使用`rect.width=100` 和`rect.length=200`来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为`*Rect`。\n\n其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为`Rect`也是可以的。如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n这里Go足够聪明，所以rect.area()也是可以的。\n\n至于`使不使用结构体指针和使不使用指针的出发点是一样的`，那就是`你是否试图在函数内部改变传递进来的参数的值`。再举个例子如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) double_area() float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(*rect)\n  fmt.Println(\"Double Width:\", rect.width, \"Double Length:\", rect.length,\n    \"Double Area:\", rect.double_area())\n  fmt.Println(*rect)\n}\n```\n这个例子的输出是：\n\n\t{100 200}\n\tDouble Width: 200 Double Length: 400 Double Area: 80000\n\t{200 400}\n\n\n## **结构体内嵌类型**\n\n我们可以在一个`结构体内部定义另外一个结构体类型的成员`。例如iPhone也是Phone，我们看下例子：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  phone Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.phone.price = 5000\n  p.phone.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.phone.price)\n  fmt.Println(\"Color:\", p.phone.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是`“iPhone也是(is-a)Phone”`，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是`“iPhone有一个(has-a)Phone”`，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在这个例子中，我们定义IPhone结构体的时候，`不再定义Phone变量`，`直接把结构体Phone类型定义在那里`。然后IPhone就可以`像访问直接定义在自己结构体里面的成员一样访问Phone的成员`。\n\n上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\nfunc (phone Phone) ringing() {\n  fmt.Println(\"Phone is ringing...\")\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n\n  p.ringing()\n}\n```\n输出结果为：\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\tPhone is ringing...\n\n\n## **接口**\n\n我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\nfunc main() {\n  var nokia NokiaPhone\n  nokia.call()\n\n  var iPhone IPhone\n  iPhone.call()\n}\n```\n我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。\n\n再仔细看一下`接口的定义`，首先是关键字`type`，然后是`接口名称`，最后是关键字`interface`表示这个类型是接口类型。`在接口类型里面，我们定义了一组方法`。\n\nGo语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，`任何其他类型只要实现了这些方法就是实现了这个接口`，`不一定非要显式地声明`要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n}\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc main() {\n  var phone Phone\n\n  phone = new(NokiaPhone)\n  phone.call()\n\n  phone = new(IPhone)\n  phone.call()\n\n}\n```\n在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：\n\n\tI am Nokia, I can call you!\n\tI am iPhone, I can call you!\n\n以前我们说过，`Go语言式静态类型语言，变量的类型在运行过程中不能改变`。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？\n\n原来，在Go语言里面，`一个类型A只要实现了接口X所定义的全部方法`，那么`A类型的变量`也是`X类型的变量`。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。\n\n我们为Phone添加一个方法sales()，再来熟悉一下接口用法。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\nfunc main() {\n  var phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var totalSales = 0\n  for _, phone := range phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}\n```\t\n输出结果：\n\n\t14200\n\n上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。\n\n接口类型还可以作为结构体的数据成员。\n\n假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\ntype Person struct {\n  phones []Phone\n  name   string\n  age    int\n}\n\nfunc (person Person) total_cost() int {\n  var sum = 0\n  for _, phone := range person.phones {\n    sum += phone.sales()\n  }\n  return sum\n}\n\nfunc main() {\n  var bought_phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var person = Person{name: \"Jemy\", age: 25, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}\n```\t\n这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：\n\n\tJemy\n\t25\n\t14200\n\t\n## **小结**\n\nGo的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。","source":"golang/go指针和结构体.md","raw":"---\ntitle: Go结构体和指针\ndate: 2017-10-12 20:23:50\ncategories: [go]\n---\n# Go结构体和指针\n> 原文地址: [jemygraw/TechDoc](https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md)\n\n基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。\n\n## **结构体定义**\n\n上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。\n\n简单来讲，Go提供的`结构体`就是把`使用各种数据类型定义`的`不同变量组合起来`的`高级数据类型`。闲话不多说，看例子:\n\n\ttype Rect struct {\n\t\twidth float64\n\t\tlength float64\n\t}\n\n上面我们定义了一个矩形结构体，首先是关键是`type`表示要`定义一个新的数据类型了`，然后是新的数据类型名称`Rect`，最后是`struct`关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为`width和length的数据类型相同`，还可以写成如下格式：\n\n```go\ntype Rect struct {\n  width, length float64\n}\n```\n\n<!--more-->\n\n好了，来用结构体干点啥吧，计算一下矩形面积。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect Rect\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(rect.width * rect.length)\n}\n```\n从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过`.`来访问内部的成员。包括`给内部成员赋值`和`读取内部成员值`。\n\n在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{width: 100, length: 200}\n\n  fmt.Println(rect.width * rect.length)\n}\n```\n\n当然`如果你知道结构体成员定义的顺序`，也可以不使用`key:value`的方式赋值，`直接按照结构体成员定义的顺序给它们赋值`。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"* Length:\",\n    rect.length, \"= Area:\", rect.width*rect.length)\n}\n```\n输出结果为\n\n\tWidth: 100 * Length: 200 = Area: 20000\n\n**结构体参数传递方式**\n\n我们说过，`Go函数的参数传递方式是值传递`，这句话`对结构体也是适用的`。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc double_area(rect Rect) float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\nfunc main() {\n  var rect = Rect{100, 200}\n  fmt.Println(double_area(rect))\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length)\n}\n```\n上面的例子输出为:\n\n\t80000\n\tWidth: 100 Length: 200\n\n也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。\n\n\n## **结构体组合函数**\n\n上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？\n\n确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。`Go使用组合函数的方式来为结构体定义结构体方法`。我们仔细看一下上面的area()函数定义。\n\n首先是关键字`func`表示这是一个函数，第二个参数是`结构体类型和实例变量`，第三个是`函数名称`，第四个是`函数返回值`。这里我们可以看出area()函数和普通函数定义的`区别就在于`area()函数`多了一个结构体类型限定`。这样一来Go就知道了这是一个为结构体定义的`方法`。\n\n这里需要注意一点就是`定义在结构体上面的函数(function)`一般叫做`方法(method)`。\n\n## **结构体和指针**\n\n我们在指针一节讲到过，`指针的主要作用就是在函数内部改变传递进来变量的值`。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是\\*Rect，结构体遇到指针的时候，你`不需要使用*去访问结构体的成员`，直接使用`.`引用就可以了。所以上面的例子中我们直接使用`rect.width=100` 和`rect.length=200`来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为`*Rect`。\n\n其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为`Rect`也是可以的。如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n这里Go足够聪明，所以rect.area()也是可以的。\n\n至于`使不使用结构体指针和使不使用指针的出发点是一样的`，那就是`你是否试图在函数内部改变传递进来的参数的值`。再举个例子如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) double_area() float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(*rect)\n  fmt.Println(\"Double Width:\", rect.width, \"Double Length:\", rect.length,\n    \"Double Area:\", rect.double_area())\n  fmt.Println(*rect)\n}\n```\n这个例子的输出是：\n\n\t{100 200}\n\tDouble Width: 200 Double Length: 400 Double Area: 80000\n\t{200 400}\n\n\n## **结构体内嵌类型**\n\n我们可以在一个`结构体内部定义另外一个结构体类型的成员`。例如iPhone也是Phone，我们看下例子：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  phone Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.phone.price = 5000\n  p.phone.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.phone.price)\n  fmt.Println(\"Color:\", p.phone.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是`“iPhone也是(is-a)Phone”`，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是`“iPhone有一个(has-a)Phone”`，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在这个例子中，我们定义IPhone结构体的时候，`不再定义Phone变量`，`直接把结构体Phone类型定义在那里`。然后IPhone就可以`像访问直接定义在自己结构体里面的成员一样访问Phone的成员`。\n\n上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\nfunc (phone Phone) ringing() {\n  fmt.Println(\"Phone is ringing...\")\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n\n  p.ringing()\n}\n```\n输出结果为：\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\tPhone is ringing...\n\n\n## **接口**\n\n我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\nfunc main() {\n  var nokia NokiaPhone\n  nokia.call()\n\n  var iPhone IPhone\n  iPhone.call()\n}\n```\n我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。\n\n再仔细看一下`接口的定义`，首先是关键字`type`，然后是`接口名称`，最后是关键字`interface`表示这个类型是接口类型。`在接口类型里面，我们定义了一组方法`。\n\nGo语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，`任何其他类型只要实现了这些方法就是实现了这个接口`，`不一定非要显式地声明`要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n}\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc main() {\n  var phone Phone\n\n  phone = new(NokiaPhone)\n  phone.call()\n\n  phone = new(IPhone)\n  phone.call()\n\n}\n```\n在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：\n\n\tI am Nokia, I can call you!\n\tI am iPhone, I can call you!\n\n以前我们说过，`Go语言式静态类型语言，变量的类型在运行过程中不能改变`。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？\n\n原来，在Go语言里面，`一个类型A只要实现了接口X所定义的全部方法`，那么`A类型的变量`也是`X类型的变量`。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。\n\n我们为Phone添加一个方法sales()，再来熟悉一下接口用法。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\nfunc main() {\n  var phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var totalSales = 0\n  for _, phone := range phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}\n```\t\n输出结果：\n\n\t14200\n\n上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。\n\n接口类型还可以作为结构体的数据成员。\n\n假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\ntype Person struct {\n  phones []Phone\n  name   string\n  age    int\n}\n\nfunc (person Person) total_cost() int {\n  var sum = 0\n  for _, phone := range person.phones {\n    sum += phone.sales()\n  }\n  return sum\n}\n\nfunc main() {\n  var bought_phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var person = Person{name: \"Jemy\", age: 25, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}\n```\t\n这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：\n\n\tJemy\n\t25\n\t14200\n\t\n## **小结**\n\nGo的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。","updated":"2020-01-09T20:21:18.114Z","path":"golang/go指针和结构体.html","comments":1,"layout":"page","_id":"ck7m7a8qv000ubica8pntu5dx","content":"<h1 id=\"Go结构体和指针\"><a href=\"#Go结构体和指针\" class=\"headerlink\" title=\"Go结构体和指针\"></a>Go结构体和指针</h1><blockquote>\n<p>原文地址: <a href=\"https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md\" target=\"_blank\" rel=\"noopener\">jemygraw/TechDoc</a></p>\n</blockquote>\n<p>基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。</p>\n<h2 id=\"结构体定义\"><a href=\"#结构体定义\" class=\"headerlink\" title=\"结构体定义\"></a><strong>结构体定义</strong></h2><p>上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。</p>\n<p>简单来讲，Go提供的<code>结构体</code>就是把<code>使用各种数据类型定义</code>的<code>不同变量组合起来</code>的<code>高级数据类型</code>。闲话不多说，看例子:</p>\n<pre><code>type Rect struct {\n    width float64\n    length float64\n}</code></pre><p>上面我们定义了一个矩形结构体，首先是关键是<code>type</code>表示要<code>定义一个新的数据类型了</code>，然后是新的数据类型名称<code>Rect</code>，最后是<code>struct</code>关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为<code>width和length的数据类型相同</code>，还可以写成如下格式：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<p>好了，来用结构体干点啥吧，计算一下矩形面积。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect Rect</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过<code>.</code>来访问内部的成员。包括<code>给内部成员赋值</code>和<code>读取内部成员值</code>。</p>\n<p>在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;width: <span class=\"number\">100</span>, length: <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>当然<code>如果你知道结构体成员定义的顺序</code>，也可以不使用<code>key:value</code>的方式赋值，<code>直接按照结构体成员定义的顺序给它们赋值</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"* Length:\"</span>,</span><br><span class=\"line\">    rect.length, <span class=\"string\">\"= Area:\"</span>, rect.width*rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>Width: 100 * Length: 200 = Area: 20000</code></pre><p><strong>结构体参数传递方式</strong></p>\n<p>我们说过，<code>Go函数的参数传递方式是值传递</code>，这句话<code>对结构体也是适用的</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">double_area</span><span class=\"params\">(rect Rect)</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\">  fmt.Println(double_area(rect))</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子输出为:</p>\n<pre><code>80000\nWidth: 100 Length: 200</code></pre><p>也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。</p>\n<h2 id=\"结构体组合函数\"><a href=\"#结构体组合函数\" class=\"headerlink\" title=\"结构体组合函数\"></a><strong>结构体组合函数</strong></h2><p>上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？</p>\n<p>确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。<code>Go使用组合函数的方式来为结构体定义结构体方法</code>。我们仔细看一下上面的area()函数定义。</p>\n<p>首先是关键字<code>func</code>表示这是一个函数，第二个参数是<code>结构体类型和实例变量</code>，第三个是<code>函数名称</code>，第四个是<code>函数返回值</code>。这里我们可以看出area()函数和普通函数定义的<code>区别就在于</code>area()函数<code>多了一个结构体类型限定</code>。这样一来Go就知道了这是一个为结构体定义的<code>方法</code>。</p>\n<p>这里需要注意一点就是<code>定义在结构体上面的函数(function)</code>一般叫做<code>方法(method)</code>。</p>\n<h2 id=\"结构体和指针\"><a href=\"#结构体和指针\" class=\"headerlink\" title=\"结构体和指针\"></a><strong>结构体和指针</strong></h2><p>我们在指针一节讲到过，<code>指针的主要作用就是在函数内部改变传递进来变量的值</code>。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是*Rect，结构体遇到指针的时候，你<code>不需要使用*去访问结构体的成员</code>，直接使用<code>.</code>引用就可以了。所以上面的例子中我们直接使用<code>rect.width=100</code> 和<code>rect.length=200</code>来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为<code>*Rect</code>。</p>\n<p>其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为<code>Rect</code>也是可以的。如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里Go足够聪明，所以rect.area()也是可以的。</p>\n<p>至于<code>使不使用结构体指针和使不使用指针的出发点是一样的</code>，那就是<code>你是否试图在函数内部改变传递进来的参数的值</code>。再举个例子如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">double_area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Double Width:\"</span>, rect.width, <span class=\"string\">\"Double Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Double Area:\"</span>, rect.double_area())</span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这个例子的输出是：</p>\n<pre><code>{100 200}\nDouble Width: 200 Double Length: 400 Double Area: 80000\n{200 400}</code></pre><h2 id=\"结构体内嵌类型\"><a href=\"#结构体内嵌类型\" class=\"headerlink\" title=\"结构体内嵌类型\"></a><strong>结构体内嵌类型</strong></h2><p>我们可以在一个<code>结构体内部定义另外一个结构体类型的成员</code>。例如iPhone也是Phone，我们看下例子：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  phone Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.phone.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.phone.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.phone.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.phone.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是<code>“iPhone也是(is-a)Phone”</code>，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是<code>“iPhone有一个(has-a)Phone”</code>，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在这个例子中，我们定义IPhone结构体的时候，<code>不再定义Phone变量</code>，<code>直接把结构体Phone类型定义在那里</code>。然后IPhone就可以<code>像访问直接定义在自己结构体里面的成员一样访问Phone的成员</code>。</p>\n<p>上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(phone Phone)</span> <span class=\"title\">ringing</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Phone is ringing...\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\"></span><br><span class=\"line\">  p.ringing()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为：</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5\nPhone is ringing...</code></pre><h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a><strong>接口</strong></h2><p>我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> nokia NokiaPhone</span><br><span class=\"line\">  nokia.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> iPhone IPhone</span><br><span class=\"line\">  iPhone.call()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。</p>\n<p>再仔细看一下<code>接口的定义</code>，首先是关键字<code>type</code>，然后是<code>接口名称</code>，最后是关键字<code>interface</code>表示这个类型是接口类型。<code>在接口类型里面，我们定义了一组方法</code>。</p>\n<p>Go语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，<code>任何其他类型只要实现了这些方法就是实现了这个接口</code>，<code>不一定非要显式地声明</code>要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  call()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> phone Phone</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(NokiaPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(IPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：</p>\n<pre><code>I am Nokia, I can call you!\nI am iPhone, I can call you!</code></pre><p>以前我们说过，<code>Go语言式静态类型语言，变量的类型在运行过程中不能改变</code>。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？</p>\n<p>原来，在Go语言里面，<code>一个类型A只要实现了接口X所定义的全部方法</code>，那么<code>A类型的变量</code>也是<code>X类型的变量</code>。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。</p>\n<p>我们为Phone添加一个方法sales()，再来熟悉一下接口用法。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  call()\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)\n}\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> totalSales = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}</code></pre>\n<p>输出结果：</p>\n<pre><code>14200</code></pre><p>上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。</p>\n<p>接口类型还可以作为结构体的数据成员。</p>\n<p>假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"keyword\">type</span> Person <span class=\"keyword\">struct</span> {\n  phones []Phone\n  name   <span class=\"keyword\">string</span>\n  age    <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(person Person)</span> <span class=\"title\">total_cost</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> person.phones {\n    sum += phone.sales()\n  }\n  <span class=\"keyword\">return</span> sum\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> bought_phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> person = Person{name: <span class=\"string\">\"Jemy\"</span>, age: <span class=\"number\">25</span>, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}</code></pre>\n<p>这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：</p>\n<pre><code>Jemy\n25\n14200</code></pre><h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a><strong>小结</strong></h2><p>Go的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"Go结构体和指针\"><a href=\"#Go结构体和指针\" class=\"headerlink\" title=\"Go结构体和指针\"></a>Go结构体和指针</h1><blockquote>\n<p>原文地址: <a href=\"https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md\" target=\"_blank\" rel=\"noopener\">jemygraw/TechDoc</a></p>\n</blockquote>\n<p>基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。</p>\n<h2 id=\"结构体定义\"><a href=\"#结构体定义\" class=\"headerlink\" title=\"结构体定义\"></a><strong>结构体定义</strong></h2><p>上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。</p>\n<p>简单来讲，Go提供的<code>结构体</code>就是把<code>使用各种数据类型定义</code>的<code>不同变量组合起来</code>的<code>高级数据类型</code>。闲话不多说，看例子:</p>\n<pre><code>type Rect struct {\n    width float64\n    length float64\n}</code></pre><p>上面我们定义了一个矩形结构体，首先是关键是<code>type</code>表示要<code>定义一个新的数据类型了</code>，然后是新的数据类型名称<code>Rect</code>，最后是<code>struct</code>关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为<code>width和length的数据类型相同</code>，还可以写成如下格式：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","more":"<p>好了，来用结构体干点啥吧，计算一下矩形面积。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect Rect</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过<code>.</code>来访问内部的成员。包括<code>给内部成员赋值</code>和<code>读取内部成员值</code>。</p>\n<p>在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;width: <span class=\"number\">100</span>, length: <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>当然<code>如果你知道结构体成员定义的顺序</code>，也可以不使用<code>key:value</code>的方式赋值，<code>直接按照结构体成员定义的顺序给它们赋值</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"* Length:\"</span>,</span><br><span class=\"line\">    rect.length, <span class=\"string\">\"= Area:\"</span>, rect.width*rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>Width: 100 * Length: 200 = Area: 20000</code></pre><p><strong>结构体参数传递方式</strong></p>\n<p>我们说过，<code>Go函数的参数传递方式是值传递</code>，这句话<code>对结构体也是适用的</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">double_area</span><span class=\"params\">(rect Rect)</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\">  fmt.Println(double_area(rect))</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子输出为:</p>\n<pre><code>80000\nWidth: 100 Length: 200</code></pre><p>也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。</p>\n<h2 id=\"结构体组合函数\"><a href=\"#结构体组合函数\" class=\"headerlink\" title=\"结构体组合函数\"></a><strong>结构体组合函数</strong></h2><p>上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？</p>\n<p>确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。<code>Go使用组合函数的方式来为结构体定义结构体方法</code>。我们仔细看一下上面的area()函数定义。</p>\n<p>首先是关键字<code>func</code>表示这是一个函数，第二个参数是<code>结构体类型和实例变量</code>，第三个是<code>函数名称</code>，第四个是<code>函数返回值</code>。这里我们可以看出area()函数和普通函数定义的<code>区别就在于</code>area()函数<code>多了一个结构体类型限定</code>。这样一来Go就知道了这是一个为结构体定义的<code>方法</code>。</p>\n<p>这里需要注意一点就是<code>定义在结构体上面的函数(function)</code>一般叫做<code>方法(method)</code>。</p>\n<h2 id=\"结构体和指针\"><a href=\"#结构体和指针\" class=\"headerlink\" title=\"结构体和指针\"></a><strong>结构体和指针</strong></h2><p>我们在指针一节讲到过，<code>指针的主要作用就是在函数内部改变传递进来变量的值</code>。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是*Rect，结构体遇到指针的时候，你<code>不需要使用*去访问结构体的成员</code>，直接使用<code>.</code>引用就可以了。所以上面的例子中我们直接使用<code>rect.width=100</code> 和<code>rect.length=200</code>来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为<code>*Rect</code>。</p>\n<p>其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为<code>Rect</code>也是可以的。如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里Go足够聪明，所以rect.area()也是可以的。</p>\n<p>至于<code>使不使用结构体指针和使不使用指针的出发点是一样的</code>，那就是<code>你是否试图在函数内部改变传递进来的参数的值</code>。再举个例子如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">double_area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Double Width:\"</span>, rect.width, <span class=\"string\">\"Double Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Double Area:\"</span>, rect.double_area())</span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这个例子的输出是：</p>\n<pre><code>{100 200}\nDouble Width: 200 Double Length: 400 Double Area: 80000\n{200 400}</code></pre><h2 id=\"结构体内嵌类型\"><a href=\"#结构体内嵌类型\" class=\"headerlink\" title=\"结构体内嵌类型\"></a><strong>结构体内嵌类型</strong></h2><p>我们可以在一个<code>结构体内部定义另外一个结构体类型的成员</code>。例如iPhone也是Phone，我们看下例子：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  phone Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.phone.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.phone.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.phone.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.phone.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是<code>“iPhone也是(is-a)Phone”</code>，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是<code>“iPhone有一个(has-a)Phone”</code>，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在这个例子中，我们定义IPhone结构体的时候，<code>不再定义Phone变量</code>，<code>直接把结构体Phone类型定义在那里</code>。然后IPhone就可以<code>像访问直接定义在自己结构体里面的成员一样访问Phone的成员</code>。</p>\n<p>上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(phone Phone)</span> <span class=\"title\">ringing</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Phone is ringing...\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\"></span><br><span class=\"line\">  p.ringing()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为：</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5\nPhone is ringing...</code></pre><h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a><strong>接口</strong></h2><p>我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> nokia NokiaPhone</span><br><span class=\"line\">  nokia.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> iPhone IPhone</span><br><span class=\"line\">  iPhone.call()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。</p>\n<p>再仔细看一下<code>接口的定义</code>，首先是关键字<code>type</code>，然后是<code>接口名称</code>，最后是关键字<code>interface</code>表示这个类型是接口类型。<code>在接口类型里面，我们定义了一组方法</code>。</p>\n<p>Go语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，<code>任何其他类型只要实现了这些方法就是实现了这个接口</code>，<code>不一定非要显式地声明</code>要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  call()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> phone Phone</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(NokiaPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(IPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：</p>\n<pre><code>I am Nokia, I can call you!\nI am iPhone, I can call you!</code></pre><p>以前我们说过，<code>Go语言式静态类型语言，变量的类型在运行过程中不能改变</code>。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？</p>\n<p>原来，在Go语言里面，<code>一个类型A只要实现了接口X所定义的全部方法</code>，那么<code>A类型的变量</code>也是<code>X类型的变量</code>。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。</p>\n<p>我们为Phone添加一个方法sales()，再来熟悉一下接口用法。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  call()\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)\n}\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> totalSales = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}</code></pre>\n<p>输出结果：</p>\n<pre><code>14200</code></pre><p>上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。</p>\n<p>接口类型还可以作为结构体的数据成员。</p>\n<p>假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"keyword\">type</span> Person <span class=\"keyword\">struct</span> {\n  phones []Phone\n  name   <span class=\"keyword\">string</span>\n  age    <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(person Person)</span> <span class=\"title\">total_cost</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> person.phones {\n    sum += phone.sales()\n  }\n  <span class=\"keyword\">return</span> sum\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> bought_phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> person = Person{name: <span class=\"string\">\"Jemy\"</span>, age: <span class=\"number\">25</span>, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}</code></pre>\n<p>这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：</p>\n<pre><code>Jemy\n25\n14200</code></pre><h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a><strong>小结</strong></h2><p>Go的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。</p>"},{"title":"beego Config 说明","date":"2016-10-19T09:25:50.000Z","categories":["go"],"_content":"\n* beego.BConfig\n    * AppName \n    * RunMode \n    * RouterCaseSensitive \n    * ServerName \n    * RecoverPanic \n    * CopyRequestBody \n    * EnableGzip \n    * MaxMemory \n    * EnableErrorsShow \n    * **WebConfig**\n        * AutoRender \n        * EnableDocs \n        * FlashName \n        * FlashSeperator \n        * DirectoryIndex \n        * StaticDir \n            > 单目录: StaticDir = download\n\n            > 多目录: StaticDir = download:down download2:down2\n\n        * StaticExtensionsToGzip\n            > StaticExtensionsToGzip = .css, .js\n\n        * TemplateLeft\n            > 模板左标签，默认值是{% raw %}{{{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateLeft=\"{% raw %}{{{% endraw %}\"\n\n        * TemplateRight\n            > 模板右标签，默认值是{% raw %}}}{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateRight=\"{% raw %}{{{% endraw %}\"\n\n        * ViewsPath\n        * EnableXSRF\n        * XSRFKEY\n        * XSRFExpire\n        * **Session**\n            * SessionOn\n            * SessionProvider\n            * SessionName\n            * SessionGCMaxLifetime\n            * SessionProviderConfig\n            * SessionCookieLifeTime\n            * SessionAutoSetCookie\n            * SessionDomain\n    * **Listen**\n\n        * Graceful\n        * ServerTimeOut\n        * ListenTCP4\n        * EnableHTTP\n        * HTTPAddr\n        * HTTPPort\n        * EnableHTTPS\n        * HTTPSAddr\n        * HTTPSPort\n        * HTTPSCertFile\n        * HTTPSKeyFile\n        * EnableAdmin\n        * AdminAddr\n        * AdminPort\n        * EnableFcgi\n        * EnableStdIo\n    * **Log**\n        * AccessLogs\n        * FileLineNum\n        * Outputs","source":"golang/golang-beego-config.md","raw":"---\ntitle: beego Config 说明\ndate: 2016-10-19 17:25:50\ncategories: [go]\n---\n\n* beego.BConfig\n    * AppName \n    * RunMode \n    * RouterCaseSensitive \n    * ServerName \n    * RecoverPanic \n    * CopyRequestBody \n    * EnableGzip \n    * MaxMemory \n    * EnableErrorsShow \n    * **WebConfig**\n        * AutoRender \n        * EnableDocs \n        * FlashName \n        * FlashSeperator \n        * DirectoryIndex \n        * StaticDir \n            > 单目录: StaticDir = download\n\n            > 多目录: StaticDir = download:down download2:down2\n\n        * StaticExtensionsToGzip\n            > StaticExtensionsToGzip = .css, .js\n\n        * TemplateLeft\n            > 模板左标签，默认值是{% raw %}{{{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateLeft=\"{% raw %}{{{% endraw %}\"\n\n        * TemplateRight\n            > 模板右标签，默认值是{% raw %}}}{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateRight=\"{% raw %}{{{% endraw %}\"\n\n        * ViewsPath\n        * EnableXSRF\n        * XSRFKEY\n        * XSRFExpire\n        * **Session**\n            * SessionOn\n            * SessionProvider\n            * SessionName\n            * SessionGCMaxLifetime\n            * SessionProviderConfig\n            * SessionCookieLifeTime\n            * SessionAutoSetCookie\n            * SessionDomain\n    * **Listen**\n\n        * Graceful\n        * ServerTimeOut\n        * ListenTCP4\n        * EnableHTTP\n        * HTTPAddr\n        * HTTPPort\n        * EnableHTTPS\n        * HTTPSAddr\n        * HTTPSPort\n        * HTTPSCertFile\n        * HTTPSKeyFile\n        * EnableAdmin\n        * AdminAddr\n        * AdminPort\n        * EnableFcgi\n        * EnableStdIo\n    * **Log**\n        * AccessLogs\n        * FileLineNum\n        * Outputs","updated":"2020-01-09T20:21:18.114Z","path":"golang/golang-beego-config.html","comments":1,"layout":"page","_id":"ck7m7a8qx000wbicaztthmmj2","content":"<ul>\n<li><p>beego.BConfig</p>\n<ul>\n<li><p>AppName </p>\n</li>\n<li><p>RunMode </p>\n</li>\n<li><p>RouterCaseSensitive </p>\n</li>\n<li><p>ServerName </p>\n</li>\n<li><p>RecoverPanic </p>\n</li>\n<li><p>CopyRequestBody </p>\n</li>\n<li><p>EnableGzip </p>\n</li>\n<li><p>MaxMemory </p>\n</li>\n<li><p>EnableErrorsShow </p>\n</li>\n<li><p><strong>WebConfig</strong></p>\n<ul>\n<li><p>AutoRender </p>\n</li>\n<li><p>EnableDocs </p>\n</li>\n<li><p>FlashName </p>\n</li>\n<li><p>FlashSeperator </p>\n</li>\n<li><p>DirectoryIndex </p>\n</li>\n<li><p>StaticDir </p>\n<blockquote>\n<p>单目录: StaticDir = download</p>\n</blockquote>\n<blockquote>\n<p>多目录: StaticDir = download:down download2:down2</p>\n</blockquote>\n</li>\n<li><p>StaticExtensionsToGzip</p>\n<blockquote>\n<p>StaticExtensionsToGzip = .css, .js</p>\n</blockquote>\n</li>\n<li><p>TemplateLeft</p>\n<blockquote>\n<p>模板左标签，默认值是{{</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateLeft=”{{“</p>\n</blockquote>\n</li>\n<li><p>TemplateRight</p>\n<blockquote>\n<p>模板右标签，默认值是}}</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateRight=”{{“</p>\n</blockquote>\n</li>\n<li><p>ViewsPath</p>\n</li>\n<li><p>EnableXSRF</p>\n</li>\n<li><p>XSRFKEY</p>\n</li>\n<li><p>XSRFExpire</p>\n</li>\n<li><p><strong>Session</strong></p>\n<ul>\n<li>SessionOn</li>\n<li>SessionProvider</li>\n<li>SessionName</li>\n<li>SessionGCMaxLifetime</li>\n<li>SessionProviderConfig</li>\n<li>SessionCookieLifeTime</li>\n<li>SessionAutoSetCookie</li>\n<li>SessionDomain</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Listen</strong></p>\n<ul>\n<li>Graceful</li>\n<li>ServerTimeOut</li>\n<li>ListenTCP4</li>\n<li>EnableHTTP</li>\n<li>HTTPAddr</li>\n<li>HTTPPort</li>\n<li>EnableHTTPS</li>\n<li>HTTPSAddr</li>\n<li>HTTPSPort</li>\n<li>HTTPSCertFile</li>\n<li>HTTPSKeyFile</li>\n<li>EnableAdmin</li>\n<li>AdminAddr</li>\n<li>AdminPort</li>\n<li>EnableFcgi</li>\n<li>EnableStdIo</li>\n</ul>\n</li>\n<li><p><strong>Log</strong></p>\n<ul>\n<li>AccessLogs</li>\n<li>FileLineNum</li>\n<li>Outputs</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>beego.BConfig</p>\n<ul>\n<li><p>AppName </p>\n</li>\n<li><p>RunMode </p>\n</li>\n<li><p>RouterCaseSensitive </p>\n</li>\n<li><p>ServerName </p>\n</li>\n<li><p>RecoverPanic </p>\n</li>\n<li><p>CopyRequestBody </p>\n</li>\n<li><p>EnableGzip </p>\n</li>\n<li><p>MaxMemory </p>\n</li>\n<li><p>EnableErrorsShow </p>\n</li>\n<li><p><strong>WebConfig</strong></p>\n<ul>\n<li><p>AutoRender </p>\n</li>\n<li><p>EnableDocs </p>\n</li>\n<li><p>FlashName </p>\n</li>\n<li><p>FlashSeperator </p>\n</li>\n<li><p>DirectoryIndex </p>\n</li>\n<li><p>StaticDir </p>\n<blockquote>\n<p>单目录: StaticDir = download</p>\n</blockquote>\n<blockquote>\n<p>多目录: StaticDir = download:down download2:down2</p>\n</blockquote>\n</li>\n<li><p>StaticExtensionsToGzip</p>\n<blockquote>\n<p>StaticExtensionsToGzip = .css, .js</p>\n</blockquote>\n</li>\n<li><p>TemplateLeft</p>\n<blockquote>\n<p>模板左标签，默认值是{{</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateLeft=”{{“</p>\n</blockquote>\n</li>\n<li><p>TemplateRight</p>\n<blockquote>\n<p>模板右标签，默认值是}}</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateRight=”{{“</p>\n</blockquote>\n</li>\n<li><p>ViewsPath</p>\n</li>\n<li><p>EnableXSRF</p>\n</li>\n<li><p>XSRFKEY</p>\n</li>\n<li><p>XSRFExpire</p>\n</li>\n<li><p><strong>Session</strong></p>\n<ul>\n<li>SessionOn</li>\n<li>SessionProvider</li>\n<li>SessionName</li>\n<li>SessionGCMaxLifetime</li>\n<li>SessionProviderConfig</li>\n<li>SessionCookieLifeTime</li>\n<li>SessionAutoSetCookie</li>\n<li>SessionDomain</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Listen</strong></p>\n<ul>\n<li>Graceful</li>\n<li>ServerTimeOut</li>\n<li>ListenTCP4</li>\n<li>EnableHTTP</li>\n<li>HTTPAddr</li>\n<li>HTTPPort</li>\n<li>EnableHTTPS</li>\n<li>HTTPSAddr</li>\n<li>HTTPSPort</li>\n<li>HTTPSCertFile</li>\n<li>HTTPSKeyFile</li>\n<li>EnableAdmin</li>\n<li>AdminAddr</li>\n<li>AdminPort</li>\n<li>EnableFcgi</li>\n<li>EnableStdIo</li>\n</ul>\n</li>\n<li><p><strong>Log</strong></p>\n<ul>\n<li>AccessLogs</li>\n<li>FileLineNum</li>\n<li>Outputs</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"All tags","date":"2016-10-08T06:54:49.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: All tags\ndate: 2016-10-08 14:54:49\ntype: \"tags\"\n---\n","updated":"2020-01-09T20:21:18.114Z","path":"tags/index.html","comments":1,"layout":"page","_id":"ck7m7a8qz000ybicajat7w1w6","content":"","site":{"data":{}},"excerpt":"","more":""},{"date":"2016-10-08T06:54:49.000Z","_content":"\n[angular2](/angular2/angular2_1.html)\n[angular2](/angular2/angular2_plugin_ngx-datatable.html)\n[angular2](/angular2/nginx_intasll_config.html)\n","source":"inner_monologue/index.md","raw":"---\ndate: 2016-10-08 14:54:49\n---\n\n[angular2](/angular2/angular2_1.html)\n[angular2](/angular2/angular2_plugin_ngx-datatable.html)\n[angular2](/angular2/nginx_intasll_config.html)\n","updated":"2020-01-09T20:21:18.114Z","path":"inner_monologue/index.html","title":"","comments":1,"layout":"page","_id":"ck7m7a8r00010bica0ua623ca","content":"<p><a href=\"/angular2/angular2_1.html\">angular2</a><br><a href=\"/angular2/angular2_plugin_ngx-datatable.html\">angular2</a><br><a href=\"/angular2/nginx_intasll_config.html\">angular2</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"/angular2/angular2_1.html\">angular2</a><br><a href=\"/angular2/angular2_plugin_ngx-datatable.html\">angular2</a><br><a href=\"/angular2/nginx_intasll_config.html\">angular2</a></p>\n"}],"Post":[{"title":"app.Use vs app.Run in ASP.NET Core middleware","date":"2016-12-02T03:30:00.000Z","_content":"\n> 原文链接: [app.Use vs app.Run in ASP.NET Core middleware](http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/)\n\n**app.Run** 和 **app.Use** 都应用于中间件, 到底有什么不同过呢?\n\n## 00.00 不同之处\n在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 **app.Use** 定义的中间件可能会调用下一个中间件组件.\n而使用 **app.Run** 定义的中间件, 永远不会调用后续的中间件\n\n## 00.01 从代码看\n创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.\n```csharp\npublic void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)\n{\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n\n    app.Run(async context => { \n       await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Run</div>\"); \n    });\n\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Another Middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n    app.UseIISPlatformHandler(options => options.AuthenticationDescriptions.Clear());\n    app.UseStaticFiles();\n    app.UseIdentity();\n    app.UseMvc(routes =>\n    {\n        routes.MapRoute(\n            name: \"default\",\n            template: \"{controller=Home}/{action=Index}/{id?}\");\n    });\n}\n```\n以上示例使用 **app.Use** 定义了 2 个内联中间件，使用 **app.Run** 定义了 1 个内联中间件. \n\n使用 **app.Use** 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 **app.Run** 定义的中间件写入消息，然后返回.\n\n在 **app.Run** 中间件之后，我们使用 **app.Use** 定义了另一个内联中间件，并且还使用了一些内置的中间件\n\n## 00.02 运行结果\n运行应用程序时的输出结果:\n```\nInside middleware defined using app.Use\nInside middleware defined using app.Run\n```\n\n如之前描述, 定义在 **app.Run** 之后的中间件不会被执行. 这就是为什么第二个使用 **app.Use** 定义的中间件没有响应的原因.","source":"_posts/app.Use-vs-app.Run.md","raw":"---\ntitle: app.Use vs app.Run in ASP.NET Core middleware\ndate: 2016-12-02 11:30:00\ncategories: [dotnet]\n---\n\n> 原文链接: [app.Use vs app.Run in ASP.NET Core middleware](http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/)\n\n**app.Run** 和 **app.Use** 都应用于中间件, 到底有什么不同过呢?\n\n## 00.00 不同之处\n在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 **app.Use** 定义的中间件可能会调用下一个中间件组件.\n而使用 **app.Run** 定义的中间件, 永远不会调用后续的中间件\n\n## 00.01 从代码看\n创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.\n```csharp\npublic void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)\n{\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n\n    app.Run(async context => { \n       await context.Response.WriteAsync(\"<div>Inside middleware defined using app.Run</div>\"); \n    });\n\n    app.Use(async (context, next) =>\n    {\n        await context.Response.WriteAsync(\"<html><body>\");\n        await context.Response.WriteAsync(\"<div>Another Middleware defined using app.Use</div>\");\n        await next();\n        await context.Response.WriteAsync(\"</body></html>\");\n    });\n    app.UseIISPlatformHandler(options => options.AuthenticationDescriptions.Clear());\n    app.UseStaticFiles();\n    app.UseIdentity();\n    app.UseMvc(routes =>\n    {\n        routes.MapRoute(\n            name: \"default\",\n            template: \"{controller=Home}/{action=Index}/{id?}\");\n    });\n}\n```\n以上示例使用 **app.Use** 定义了 2 个内联中间件，使用 **app.Run** 定义了 1 个内联中间件. \n\n使用 **app.Use** 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 **app.Run** 定义的中间件写入消息，然后返回.\n\n在 **app.Run** 中间件之后，我们使用 **app.Use** 定义了另一个内联中间件，并且还使用了一些内置的中间件\n\n## 00.02 运行结果\n运行应用程序时的输出结果:\n```\nInside middleware defined using app.Use\nInside middleware defined using app.Run\n```\n\n如之前描述, 定义在 **app.Run** 之后的中间件不会被执行. 这就是为什么第二个使用 **app.Use** 定义的中间件没有响应的原因.","slug":"app.Use-vs-app.Run","published":1,"updated":"2020-01-09T20:21:18.089Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8q90003bicakzp4tla7","content":"<blockquote>\n<p>原文链接: <a href=\"http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/\" target=\"_blank\" rel=\"noopener\">app.Use vs app.Run in ASP.NET Core middleware</a></p>\n</blockquote>\n<p><strong>app.Run</strong> 和 <strong>app.Use</strong> 都应用于中间件, 到底有什么不同过呢?</p>\n<h2 id=\"00-00-不同之处\"><a href=\"#00-00-不同之处\" class=\"headerlink\" title=\"00.00 不同之处\"></a>00.00 不同之处</h2><p>在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 <strong>app.Use</strong> 定义的中间件可能会调用下一个中间件组件.<br>而使用 <strong>app.Run</strong> 定义的中间件, 永远不会调用后续的中间件</p>\n<h2 id=\"00-01-从代码看\"><a href=\"#00-01-从代码看\" class=\"headerlink\" title=\"00.01 从代码看\"></a>00.01 从代码看</h2><p>创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Run(<span class=\"keyword\">async</span> context =&gt; &#123; </span><br><span class=\"line\">       <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Run&lt;/div&gt;\"</span>); </span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Another Middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    app.UseIISPlatformHandler(options =&gt; options.AuthenticationDescriptions.Clear());</span><br><span class=\"line\">    app.UseStaticFiles();</span><br><span class=\"line\">    app.UseIdentity();</span><br><span class=\"line\">    app.UseMvc(routes =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        routes.MapRoute(</span><br><span class=\"line\">            name: <span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">            template: <span class=\"string\">\"&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>以上示例使用 <strong>app.Use</strong> 定义了 2 个内联中间件，使用 <strong>app.Run</strong> 定义了 1 个内联中间件. </p>\n<p>使用 <strong>app.Use</strong> 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 <strong>app.Run</strong> 定义的中间件写入消息，然后返回.</p>\n<p>在 <strong>app.Run</strong> 中间件之后，我们使用 <strong>app.Use</strong> 定义了另一个内联中间件，并且还使用了一些内置的中间件</p>\n<h2 id=\"00-02-运行结果\"><a href=\"#00-02-运行结果\" class=\"headerlink\" title=\"00.02 运行结果\"></a>00.02 运行结果</h2><p>运行应用程序时的输出结果:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Inside middleware defined using app.Use</span><br><span class=\"line\">Inside middleware defined using app.Run</span><br></pre></td></tr></table></figure>\n\n<p>如之前描述, 定义在 <strong>app.Run</strong> 之后的中间件不会被执行. 这就是为什么第二个使用 <strong>app.Use</strong> 定义的中间件没有响应的原因.</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>原文链接: <a href=\"http://www.talkingdotnet.com/app-use-vs-app-run-asp-net-core-middleware/\" target=\"_blank\" rel=\"noopener\">app.Use vs app.Run in ASP.NET Core middleware</a></p>\n</blockquote>\n<p><strong>app.Run</strong> 和 <strong>app.Use</strong> 都应用于中间件, 到底有什么不同过呢?</p>\n<h2 id=\"00-00-不同之处\"><a href=\"#00-00-不同之处\" class=\"headerlink\" title=\"00.00 不同之处\"></a>00.00 不同之处</h2><p>在 ASP.NET Core 中, 中间件是按照添加顺序执行的. 使用 <strong>app.Use</strong> 定义的中间件可能会调用下一个中间件组件.<br>而使用 <strong>app.Run</strong> 定义的中间件, 永远不会调用后续的中间件</p>\n<h2 id=\"00-01-从代码看\"><a href=\"#00-01-从代码看\" class=\"headerlink\" title=\"00.01 从代码看\"></a>00.01 从代码看</h2><p>创建一个新的 ASP.NET Core 1.0 Mvc 应用, 并将 Startup 类中 Configure 方法的内容改为如下.</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Run(<span class=\"keyword\">async</span> context =&gt; &#123; </span><br><span class=\"line\">       <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Inside middleware defined using app.Run&lt;/div&gt;\"</span>); </span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    app.Use(<span class=\"keyword\">async</span> (context, next) =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;html&gt;&lt;body&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;div&gt;Another Middleware defined using app.Use&lt;/div&gt;\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">await</span> next();</span><br><span class=\"line\">        <span class=\"keyword\">await</span> context.Response.WriteAsync(<span class=\"string\">\"&lt;/body&gt;&lt;/html&gt;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    app.UseIISPlatformHandler(options =&gt; options.AuthenticationDescriptions.Clear());</span><br><span class=\"line\">    app.UseStaticFiles();</span><br><span class=\"line\">    app.UseIdentity();</span><br><span class=\"line\">    app.UseMvc(routes =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        routes.MapRoute(</span><br><span class=\"line\">            name: <span class=\"string\">\"default\"</span>,</span><br><span class=\"line\">            template: <span class=\"string\">\"&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;\"</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>以上示例使用 <strong>app.Use</strong> 定义了 2 个内联中间件，使用 <strong>app.Run</strong> 定义了 1 个内联中间件. </p>\n<p>使用 <strong>app.Use</strong> 定义的第一个中间件将异步写入响应对象的HTML, 调用下一个中间件，再次写入关闭HTML. 而使用 <strong>app.Run</strong> 定义的中间件写入消息，然后返回.</p>\n<p>在 <strong>app.Run</strong> 中间件之后，我们使用 <strong>app.Use</strong> 定义了另一个内联中间件，并且还使用了一些内置的中间件</p>\n<h2 id=\"00-02-运行结果\"><a href=\"#00-02-运行结果\" class=\"headerlink\" title=\"00.02 运行结果\"></a>00.02 运行结果</h2><p>运行应用程序时的输出结果:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Inside middleware defined using app.Use</span><br><span class=\"line\">Inside middleware defined using app.Run</span><br></pre></td></tr></table></figure>\n\n<p>如之前描述, 定义在 <strong>app.Run</strong> 之后的中间件不会被执行. 这就是为什么第二个使用 <strong>app.Use</strong> 定义的中间件没有响应的原因.</p>\n"},{"title":"异步编程模式","date":"2016-12-05T03:30:00.000Z","_content":"\n## 三种异步编程模式\n.NET Framework 提供了三种异步编程模式:\n* APM (Asynchronous Programming Model): 异步编程模型\n* EAP (Event-based Asynchronous Pattern): 基于事件的异步模式\n* TAP (Tasks-based Asynchronous Pattern): 基于任务的异步模式\n\n<!--more-->\n\n### 异步编程模式 ( APM )\n\n也称为 IAsyncResult 模式, 异步操作需要使用 Begin*OperationName* 和 End*OperationName* 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).\n\n> 从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式, 因此不再建议使用此种模式. 详见: [Task Parallel Libary (TPL)](https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx) 和 [Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx) 以及 [Asynchronous Programming Model (APM)](https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx)\n\n### 基于事件异步编程模式 ( EAP )\n\n这种模式需要 Async 后缀, 也需要一个或多个事件、事件处理程序委托类型和 **EventArg** 派生类型. EAP 是在 .NET Framework 2.0 中引入的. 对于新的开发工作不再建议采用此模式. 有关详细信息, 请参阅[Event-based Asynchronous Pattern (EAP)](https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx). \n\n### 基于任务异步编程模式 ( TAP )\n\n使用一种方法来表示异步操作的启动和完成\nTAP 是在 .NET Framework 4 中引入的, 并且它是在 .NET Framework 中进行异步编程的推荐使用方法. C# 中的 [async](https://msdn.microsoft.com/zh-cn/library/hh156513(v=vs.110).aspx) 和 [await](https://msdn.microsoft.com/zh-cn/library/hh156528(v=vs.110).aspx) 关键词为 TAP 添加了语言支持. 有关详细信息, 请参阅[Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx). \n\n## 比较三种异步模式\n为了快速比较这三种模式的异步操作方式，使用从指定偏移量处起将指定量数据读取到提供的缓冲区中的 **Read** 方法: \n```csharp\npublic class MyClass\n{\n    public int Read(byte [] buffer, int offset, int count);\n}\n```\n* 此方法对应的 APM 将公开 BeginRead 和 EndRead 方法:\n```csharp\npublic class MyClass\n{\n    public IAsyncResult BeginRead(\n        byte [] buffer, int offset, int count, \n        AsyncCallback callback, object state);\n    public int EndRead(IAsyncResult asyncResult);\n}\n```\n* 对应的 EAP 将公开以下类型和成员的集\n```csharp\npublic class MyClass\n{\n    public void ReadAsync(byte [] buffer, int offset, int count);\n    public event ReadCompletedEventHandler ReadCompleted;\n}\n```\n* 对应的 TAP 将公开以下单个 ReadAsync 方法\n```csharp\npublic class MyClass\n{\n    public Task<int> ReadAsync(byte [] buffer, int offset, int count);\n}\n```\n\n## 相关连接\n|标题|描述|\n| ------------- |:-------------:|\n|[Asynchronous Programming Model (APM)](https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx)|描述使用 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 接口提供异步行为的旧模型。 对于新的开发工作不再建议采用此模型|\n|[Event-based Asynchronous Pattern (EAP)](https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx)|描述提供异步行为的基于事件的旧模型。 对于新的开发工作不再建议采用此模型|\n|[Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx)|描述基于 [System.Threading.Tasks](https://msdn.microsoft.com/zh-cn/library/system.threading.tasks(v=vs.110).aspx) 命名空间的新异步模式。 此模型是在 .NET Framework 4 及更高版本中进行异步编程的推荐使用方法|\n\n\n## 涉及的多线程概念\n* 锁\n* 死锁\n* 征用条件","source":"_posts/asynchronous_program_in_dotnet.md","raw":"---\ntitle: 异步编程模式\ndate: 2016-12-05 11:30:00\ntags: [async, .net, await]\n---\n\n## 三种异步编程模式\n.NET Framework 提供了三种异步编程模式:\n* APM (Asynchronous Programming Model): 异步编程模型\n* EAP (Event-based Asynchronous Pattern): 基于事件的异步模式\n* TAP (Tasks-based Asynchronous Pattern): 基于任务的异步模式\n\n<!--more-->\n\n### 异步编程模式 ( APM )\n\n也称为 IAsyncResult 模式, 异步操作需要使用 Begin*OperationName* 和 End*OperationName* 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).\n\n> 从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式, 因此不再建议使用此种模式. 详见: [Task Parallel Libary (TPL)](https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx) 和 [Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx) 以及 [Asynchronous Programming Model (APM)](https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx)\n\n### 基于事件异步编程模式 ( EAP )\n\n这种模式需要 Async 后缀, 也需要一个或多个事件、事件处理程序委托类型和 **EventArg** 派生类型. EAP 是在 .NET Framework 2.0 中引入的. 对于新的开发工作不再建议采用此模式. 有关详细信息, 请参阅[Event-based Asynchronous Pattern (EAP)](https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx). \n\n### 基于任务异步编程模式 ( TAP )\n\n使用一种方法来表示异步操作的启动和完成\nTAP 是在 .NET Framework 4 中引入的, 并且它是在 .NET Framework 中进行异步编程的推荐使用方法. C# 中的 [async](https://msdn.microsoft.com/zh-cn/library/hh156513(v=vs.110).aspx) 和 [await](https://msdn.microsoft.com/zh-cn/library/hh156528(v=vs.110).aspx) 关键词为 TAP 添加了语言支持. 有关详细信息, 请参阅[Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx). \n\n## 比较三种异步模式\n为了快速比较这三种模式的异步操作方式，使用从指定偏移量处起将指定量数据读取到提供的缓冲区中的 **Read** 方法: \n```csharp\npublic class MyClass\n{\n    public int Read(byte [] buffer, int offset, int count);\n}\n```\n* 此方法对应的 APM 将公开 BeginRead 和 EndRead 方法:\n```csharp\npublic class MyClass\n{\n    public IAsyncResult BeginRead(\n        byte [] buffer, int offset, int count, \n        AsyncCallback callback, object state);\n    public int EndRead(IAsyncResult asyncResult);\n}\n```\n* 对应的 EAP 将公开以下类型和成员的集\n```csharp\npublic class MyClass\n{\n    public void ReadAsync(byte [] buffer, int offset, int count);\n    public event ReadCompletedEventHandler ReadCompleted;\n}\n```\n* 对应的 TAP 将公开以下单个 ReadAsync 方法\n```csharp\npublic class MyClass\n{\n    public Task<int> ReadAsync(byte [] buffer, int offset, int count);\n}\n```\n\n## 相关连接\n|标题|描述|\n| ------------- |:-------------:|\n|[Asynchronous Programming Model (APM)](https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx)|描述使用 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 接口提供异步行为的旧模型。 对于新的开发工作不再建议采用此模型|\n|[Event-based Asynchronous Pattern (EAP)](https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx)|描述提供异步行为的基于事件的旧模型。 对于新的开发工作不再建议采用此模型|\n|[Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx)|描述基于 [System.Threading.Tasks](https://msdn.microsoft.com/zh-cn/library/system.threading.tasks(v=vs.110).aspx) 命名空间的新异步模式。 此模型是在 .NET Framework 4 及更高版本中进行异步编程的推荐使用方法|\n\n\n## 涉及的多线程概念\n* 锁\n* 死锁\n* 征用条件","slug":"asynchronous_program_in_dotnet","published":1,"updated":"2020-01-09T20:21:18.090Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qe0005bicaalx1ysxm","content":"<h2 id=\"三种异步编程模式\"><a href=\"#三种异步编程模式\" class=\"headerlink\" title=\"三种异步编程模式\"></a>三种异步编程模式</h2><p>.NET Framework 提供了三种异步编程模式:</p>\n<ul>\n<li>APM (Asynchronous Programming Model): 异步编程模型</li>\n<li>EAP (Event-based Asynchronous Pattern): 基于事件的异步模式</li>\n<li>TAP (Tasks-based Asynchronous Pattern): 基于任务的异步模式</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"异步编程模式-APM\"><a href=\"#异步编程模式-APM\" class=\"headerlink\" title=\"异步编程模式 ( APM )\"></a>异步编程模式 ( APM )</h3><p>也称为 IAsyncResult 模式, 异步操作需要使用 Begin<em>OperationName</em> 和 End<em>OperationName</em> 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).</p>\n<blockquote>\n<p>从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式, 因此不再建议使用此种模式. 详见: <a href=\"https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task Parallel Libary (TPL)</a> 和 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a> 以及 <a href=\"https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Asynchronous Programming Model (APM)</a></p>\n</blockquote>\n<h3 id=\"基于事件异步编程模式-EAP\"><a href=\"#基于事件异步编程模式-EAP\" class=\"headerlink\" title=\"基于事件异步编程模式 ( EAP )\"></a>基于事件异步编程模式 ( EAP )</h3><p>这种模式需要 Async 后缀, 也需要一个或多个事件、事件处理程序委托类型和 <strong>EventArg</strong> 派生类型. EAP 是在 .NET Framework 2.0 中引入的. 对于新的开发工作不再建议采用此模式. 有关详细信息, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Event-based Asynchronous Pattern (EAP)</a>. </p>\n<h3 id=\"基于任务异步编程模式-TAP\"><a href=\"#基于任务异步编程模式-TAP\" class=\"headerlink\" title=\"基于任务异步编程模式 ( TAP )\"></a>基于任务异步编程模式 ( TAP )</h3><p>使用一种方法来表示异步操作的启动和完成<br>TAP 是在 .NET Framework 4 中引入的, 并且它是在 .NET Framework 中进行异步编程的推荐使用方法. C# 中的 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh156513(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">async</a> 和 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh156528(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">await</a> 关键词为 TAP 添加了语言支持. 有关详细信息, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a>. </p>\n<h2 id=\"比较三种异步模式\"><a href=\"#比较三种异步模式\" class=\"headerlink\" title=\"比较三种异步模式\"></a>比较三种异步模式</h2><p>为了快速比较这三种模式的异步操作方式，使用从指定偏移量处起将指定量数据读取到提供的缓冲区中的 <strong>Read</strong> 方法: </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">Read</span>(<span class=\"params\"><span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count</span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>此方法对应的 APM 将公开 BeginRead 和 EndRead 方法:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IAsyncResult <span class=\"title\">BeginRead</span>(<span class=\"params\"></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        <span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count, </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        AsyncCallback callback, <span class=\"keyword\">object</span> state</span>)</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">EndRead</span>(<span class=\"params\">IAsyncResult asyncResult</span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>对应的 EAP 将公开以下类型和成员的集</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ReadAsync</span>(<span class=\"params\"><span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count</span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> ReadCompletedEventHandler ReadCompleted;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>对应的 TAP 将公开以下单个 ReadAsync 方法</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Task&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">ReadAsync</span>(<span class=\"params\"><span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count</span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"相关连接\"><a href=\"#相关连接\" class=\"headerlink\" title=\"相关连接\"></a>相关连接</h2><table>\n<thead>\n<tr>\n<th>标题</th>\n<th align=\"center\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Asynchronous Programming Model (APM)</a></td>\n<td align=\"center\">描述使用 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 接口提供异步行为的旧模型。 对于新的开发工作不再建议采用此模型</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Event-based Asynchronous Pattern (EAP)</a></td>\n<td align=\"center\">描述提供异步行为的基于事件的旧模型。 对于新的开发工作不再建议采用此模型</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a></td>\n<td align=\"center\">描述基于 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.threading.tasks(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">System.Threading.Tasks</a> 命名空间的新异步模式。 此模型是在 .NET Framework 4 及更高版本中进行异步编程的推荐使用方法</td>\n</tr>\n</tbody></table>\n<h2 id=\"涉及的多线程概念\"><a href=\"#涉及的多线程概念\" class=\"headerlink\" title=\"涉及的多线程概念\"></a>涉及的多线程概念</h2><ul>\n<li>锁</li>\n<li>死锁</li>\n<li>征用条件</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h2 id=\"三种异步编程模式\"><a href=\"#三种异步编程模式\" class=\"headerlink\" title=\"三种异步编程模式\"></a>三种异步编程模式</h2><p>.NET Framework 提供了三种异步编程模式:</p>\n<ul>\n<li>APM (Asynchronous Programming Model): 异步编程模型</li>\n<li>EAP (Event-based Asynchronous Pattern): 基于事件的异步模式</li>\n<li>TAP (Tasks-based Asynchronous Pattern): 基于任务的异步模式</li>\n</ul>","more":"<h3 id=\"异步编程模式-APM\"><a href=\"#异步编程模式-APM\" class=\"headerlink\" title=\"异步编程模式 ( APM )\"></a>异步编程模式 ( APM )</h3><p>也称为 IAsyncResult 模式, 异步操作需要使用 Begin<em>OperationName</em> 和 End<em>OperationName</em> 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).</p>\n<blockquote>\n<p>从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式, 因此不再建议使用此种模式. 详见: <a href=\"https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task Parallel Libary (TPL)</a> 和 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a> 以及 <a href=\"https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Asynchronous Programming Model (APM)</a></p>\n</blockquote>\n<h3 id=\"基于事件异步编程模式-EAP\"><a href=\"#基于事件异步编程模式-EAP\" class=\"headerlink\" title=\"基于事件异步编程模式 ( EAP )\"></a>基于事件异步编程模式 ( EAP )</h3><p>这种模式需要 Async 后缀, 也需要一个或多个事件、事件处理程序委托类型和 <strong>EventArg</strong> 派生类型. EAP 是在 .NET Framework 2.0 中引入的. 对于新的开发工作不再建议采用此模式. 有关详细信息, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Event-based Asynchronous Pattern (EAP)</a>. </p>\n<h3 id=\"基于任务异步编程模式-TAP\"><a href=\"#基于任务异步编程模式-TAP\" class=\"headerlink\" title=\"基于任务异步编程模式 ( TAP )\"></a>基于任务异步编程模式 ( TAP )</h3><p>使用一种方法来表示异步操作的启动和完成<br>TAP 是在 .NET Framework 4 中引入的, 并且它是在 .NET Framework 中进行异步编程的推荐使用方法. C# 中的 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh156513(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">async</a> 和 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh156528(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">await</a> 关键词为 TAP 添加了语言支持. 有关详细信息, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a>. </p>\n<h2 id=\"比较三种异步模式\"><a href=\"#比较三种异步模式\" class=\"headerlink\" title=\"比较三种异步模式\"></a>比较三种异步模式</h2><p>为了快速比较这三种模式的异步操作方式，使用从指定偏移量处起将指定量数据读取到提供的缓冲区中的 <strong>Read</strong> 方法: </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">Read</span>(<span class=\"params\"><span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count</span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>此方法对应的 APM 将公开 BeginRead 和 EndRead 方法:</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IAsyncResult <span class=\"title\">BeginRead</span>(<span class=\"params\"></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        <span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count, </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        AsyncCallback callback, <span class=\"keyword\">object</span> state</span>)</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">EndRead</span>(<span class=\"params\">IAsyncResult asyncResult</span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>对应的 EAP 将公开以下类型和成员的集</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ReadAsync</span>(<span class=\"params\"><span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count</span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">event</span> ReadCompletedEventHandler ReadCompleted;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>对应的 TAP 将公开以下单个 ReadAsync 方法</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">MyClass</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Task&lt;<span class=\"keyword\">int</span>&gt; <span class=\"title\">ReadAsync</span>(<span class=\"params\"><span class=\"keyword\">byte</span> [] buffer, <span class=\"keyword\">int</span> offset, <span class=\"keyword\">int</span> count</span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h2 id=\"相关连接\"><a href=\"#相关连接\" class=\"headerlink\" title=\"相关连接\"></a>相关连接</h2><table>\n<thead>\n<tr>\n<th>标题</th>\n<th align=\"center\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/ms228963(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Asynchronous Programming Model (APM)</a></td>\n<td align=\"center\">描述使用 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 接口提供异步行为的旧模型。 对于新的开发工作不再建议采用此模型</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/ms228969(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Event-based Asynchronous Pattern (EAP)</a></td>\n<td align=\"center\">描述提供异步行为的基于事件的旧模型。 对于新的开发工作不再建议采用此模型</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a></td>\n<td align=\"center\">描述基于 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.threading.tasks(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">System.Threading.Tasks</a> 命名空间的新异步模式。 此模型是在 .NET Framework 4 及更高版本中进行异步编程的推荐使用方法</td>\n</tr>\n</tbody></table>\n<h2 id=\"涉及的多线程概念\"><a href=\"#涉及的多线程概念\" class=\"headerlink\" title=\"涉及的多线程概念\"></a>涉及的多线程概念</h2><ul>\n<li>锁</li>\n<li>死锁</li>\n<li>征用条件</li>\n</ul>"},{"title":"C# 中的协变性、逆变性和不变性","date":"2017-03-18T09:35:03.000Z","_content":"\n# C# 中的协变性、逆变性和不变性\n\n## 协变和逆变的概念&ensp;\n\n* 协变性: 子类转化为父类 string -> object\n\n* 逆变性: 父类强制转换为子类 object -> string 或者 object -> (object)string\n\n* 不变性: 既不可以协变也不可以逆变 (List<T> || 自定义泛型类型不加 out 或 in 修饰)\n\n## 泛型类型的可变性\n### 泛型修饰符\n\n> out (返回值): 对于泛型参数, out 关键字指定给类型参数是协变的.\n\n> in (输入参数): 对于泛型参数, in 关键字指定改类型那个参数是逆变的.\n\n* 可以在泛型接口或泛型委托中使用\n* 泛型参数中 in 和 out 可以共同存在\n\n<!--more-->\n\n### 框架定义的泛型委托\n* `Action<T>` (T 支持逆变)\n* `Func<TResult>` (T 支持协变)\n* `Comparison<T>`\n* `Predicate<T>`\n```\npublic delegate TResult Func<out TResult>();\npublic delegate void Action<in T>(T obj);\n```\n\n### 自定义泛型委托\n\n\n### 框架定义的泛型接口\n* `IEnumerable<T>` (T 支持协变)\n* `IEnumerator<T>` (T 支持协变)\n* `IQueryable<T>` (T 支持协变)\n* `IGrouping<TKey, TElement>` (TKey 和 TElement 支持协变)\n* `IComparer<T>` (T 支持逆变)\n* `IEqualityComparer<T>` (T 支持逆变)\n* `IComparable<T>` (T 支持逆变)\n\n### 自定义泛型接口\n\n### 思考\n#### <p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p>\n```\nIEnumerable<object> obj = new List<object>();\n//如果在这里我想obj中添加\nIEnumeralbe<string> str = obj;\n```\n#### <p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p>\n\n","source":"_posts/covarianceAndContravariance.md","raw":"---\ntitle: C# 中的协变性、逆变性和不变性\ndate: 2017-3-18 17:35:03\ntags: [C# Syntax]\ncategories: [dotnet]\n---\n\n# C# 中的协变性、逆变性和不变性\n\n## 协变和逆变的概念&ensp;\n\n* 协变性: 子类转化为父类 string -> object\n\n* 逆变性: 父类强制转换为子类 object -> string 或者 object -> (object)string\n\n* 不变性: 既不可以协变也不可以逆变 (List<T> || 自定义泛型类型不加 out 或 in 修饰)\n\n## 泛型类型的可变性\n### 泛型修饰符\n\n> out (返回值): 对于泛型参数, out 关键字指定给类型参数是协变的.\n\n> in (输入参数): 对于泛型参数, in 关键字指定改类型那个参数是逆变的.\n\n* 可以在泛型接口或泛型委托中使用\n* 泛型参数中 in 和 out 可以共同存在\n\n<!--more-->\n\n### 框架定义的泛型委托\n* `Action<T>` (T 支持逆变)\n* `Func<TResult>` (T 支持协变)\n* `Comparison<T>`\n* `Predicate<T>`\n```\npublic delegate TResult Func<out TResult>();\npublic delegate void Action<in T>(T obj);\n```\n\n### 自定义泛型委托\n\n\n### 框架定义的泛型接口\n* `IEnumerable<T>` (T 支持协变)\n* `IEnumerator<T>` (T 支持协变)\n* `IQueryable<T>` (T 支持协变)\n* `IGrouping<TKey, TElement>` (TKey 和 TElement 支持协变)\n* `IComparer<T>` (T 支持逆变)\n* `IEqualityComparer<T>` (T 支持逆变)\n* `IComparable<T>` (T 支持逆变)\n\n### 自定义泛型接口\n\n### 思考\n#### <p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p>\n```\nIEnumerable<object> obj = new List<object>();\n//如果在这里我想obj中添加\nIEnumeralbe<string> str = obj;\n```\n#### <p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p>\n\n","slug":"covarianceAndContravariance","published":1,"updated":"2020-01-09T20:21:18.090Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qg0007bica7gv3t6pf","content":"<h1 id=\"C-中的协变性、逆变性和不变性\"><a href=\"#C-中的协变性、逆变性和不变性\" class=\"headerlink\" title=\"C# 中的协变性、逆变性和不变性\"></a>C# 中的协变性、逆变性和不变性</h1><h2 id=\"协变和逆变的概念-ensp\"><a href=\"#协变和逆变的概念-ensp\" class=\"headerlink\" title=\"协变和逆变的概念&ensp;\"></a>协变和逆变的概念&ensp;</h2><ul>\n<li><p>协变性: 子类转化为父类 string -&gt; object</p>\n</li>\n<li><p>逆变性: 父类强制转换为子类 object -&gt; string 或者 object -&gt; (object)string</p>\n</li>\n<li><p>不变性: 既不可以协变也不可以逆变 (List<t> || 自定义泛型类型不加 out 或 in 修饰)</t></p>\n</li>\n</ul>\n<h2 id=\"泛型类型的可变性\"><a href=\"#泛型类型的可变性\" class=\"headerlink\" title=\"泛型类型的可变性\"></a>泛型类型的可变性</h2><h3 id=\"泛型修饰符\"><a href=\"#泛型修饰符\" class=\"headerlink\" title=\"泛型修饰符\"></a>泛型修饰符</h3><blockquote>\n<p>out (返回值): 对于泛型参数, out 关键字指定给类型参数是协变的.</p>\n</blockquote>\n<blockquote>\n<p>in (输入参数): 对于泛型参数, in 关键字指定改类型那个参数是逆变的.</p>\n</blockquote>\n<ul>\n<li>可以在泛型接口或泛型委托中使用</li>\n<li>泛型参数中 in 和 out 可以共同存在</li>\n</ul>\n<a id=\"more\"></a>\n\n<h3 id=\"框架定义的泛型委托\"><a href=\"#框架定义的泛型委托\" class=\"headerlink\" title=\"框架定义的泛型委托\"></a>框架定义的泛型委托</h3><ul>\n<li><code>Action&lt;T&gt;</code> (T 支持逆变)</li>\n<li><code>Func&lt;TResult&gt;</code> (T 支持协变)</li>\n<li><code>Comparison&lt;T&gt;</code></li>\n<li><code>Predicate&lt;T&gt;</code><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public delegate TResult Func&lt;out TResult&gt;();</span><br><span class=\"line\">public delegate void Action&lt;in T&gt;(T obj);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"自定义泛型委托\"><a href=\"#自定义泛型委托\" class=\"headerlink\" title=\"自定义泛型委托\"></a>自定义泛型委托</h3><h3 id=\"框架定义的泛型接口\"><a href=\"#框架定义的泛型接口\" class=\"headerlink\" title=\"框架定义的泛型接口\"></a>框架定义的泛型接口</h3><ul>\n<li><code>IEnumerable&lt;T&gt;</code> (T 支持协变)</li>\n<li><code>IEnumerator&lt;T&gt;</code> (T 支持协变)</li>\n<li><code>IQueryable&lt;T&gt;</code> (T 支持协变)</li>\n<li><code>IGrouping&lt;TKey, TElement&gt;</code> (TKey 和 TElement 支持协变)</li>\n<li><code>IComparer&lt;T&gt;</code> (T 支持逆变)</li>\n<li><code>IEqualityComparer&lt;T&gt;</code> (T 支持逆变)</li>\n<li><code>IComparable&lt;T&gt;</code> (T 支持逆变)</li>\n</ul>\n<h3 id=\"自定义泛型接口\"><a href=\"#自定义泛型接口\" class=\"headerlink\" title=\"自定义泛型接口\"></a>自定义泛型接口</h3><h3 id=\"思考\"><a href=\"#思考\" class=\"headerlink\" title=\"思考\"></a>思考</h3><h4 id=\"为什么-out-返回值-只能协变\"><a href=\"#为什么-out-返回值-只能协变\" class=\"headerlink\" title=\" 为什么 out(返回值) 只能协变? \"></a><p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IEnumerable&lt;object&gt; obj = new List&lt;object&gt;();</span><br><span class=\"line\">//如果在这里我想obj中添加</span><br><span class=\"line\">IEnumeralbe&lt;string&gt; str = obj;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"为什么-out-返回值-只能协变-1\"><a href=\"#为什么-out-返回值-只能协变-1\" class=\"headerlink\" title=\" 为什么 out(返回值) 只能协变? \"></a><p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p></h4>","site":{"data":{}},"excerpt":"<h1 id=\"C-中的协变性、逆变性和不变性\"><a href=\"#C-中的协变性、逆变性和不变性\" class=\"headerlink\" title=\"C# 中的协变性、逆变性和不变性\"></a>C# 中的协变性、逆变性和不变性</h1><h2 id=\"协变和逆变的概念-ensp\"><a href=\"#协变和逆变的概念-ensp\" class=\"headerlink\" title=\"协变和逆变的概念&ensp;\"></a>协变和逆变的概念&ensp;</h2><ul>\n<li><p>协变性: 子类转化为父类 string -&gt; object</p>\n</li>\n<li><p>逆变性: 父类强制转换为子类 object -&gt; string 或者 object -&gt; (object)string</p>\n</li>\n<li><p>不变性: 既不可以协变也不可以逆变 (List<t> || 自定义泛型类型不加 out 或 in 修饰)</t></p>\n</li>\n</ul>\n<h2 id=\"泛型类型的可变性\"><a href=\"#泛型类型的可变性\" class=\"headerlink\" title=\"泛型类型的可变性\"></a>泛型类型的可变性</h2><h3 id=\"泛型修饰符\"><a href=\"#泛型修饰符\" class=\"headerlink\" title=\"泛型修饰符\"></a>泛型修饰符</h3><blockquote>\n<p>out (返回值): 对于泛型参数, out 关键字指定给类型参数是协变的.</p>\n</blockquote>\n<blockquote>\n<p>in (输入参数): 对于泛型参数, in 关键字指定改类型那个参数是逆变的.</p>\n</blockquote>\n<ul>\n<li>可以在泛型接口或泛型委托中使用</li>\n<li>泛型参数中 in 和 out 可以共同存在</li>\n</ul>","more":"<h3 id=\"框架定义的泛型委托\"><a href=\"#框架定义的泛型委托\" class=\"headerlink\" title=\"框架定义的泛型委托\"></a>框架定义的泛型委托</h3><ul>\n<li><code>Action&lt;T&gt;</code> (T 支持逆变)</li>\n<li><code>Func&lt;TResult&gt;</code> (T 支持协变)</li>\n<li><code>Comparison&lt;T&gt;</code></li>\n<li><code>Predicate&lt;T&gt;</code><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public delegate TResult Func&lt;out TResult&gt;();</span><br><span class=\"line\">public delegate void Action&lt;in T&gt;(T obj);</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"自定义泛型委托\"><a href=\"#自定义泛型委托\" class=\"headerlink\" title=\"自定义泛型委托\"></a>自定义泛型委托</h3><h3 id=\"框架定义的泛型接口\"><a href=\"#框架定义的泛型接口\" class=\"headerlink\" title=\"框架定义的泛型接口\"></a>框架定义的泛型接口</h3><ul>\n<li><code>IEnumerable&lt;T&gt;</code> (T 支持协变)</li>\n<li><code>IEnumerator&lt;T&gt;</code> (T 支持协变)</li>\n<li><code>IQueryable&lt;T&gt;</code> (T 支持协变)</li>\n<li><code>IGrouping&lt;TKey, TElement&gt;</code> (TKey 和 TElement 支持协变)</li>\n<li><code>IComparer&lt;T&gt;</code> (T 支持逆变)</li>\n<li><code>IEqualityComparer&lt;T&gt;</code> (T 支持逆变)</li>\n<li><code>IComparable&lt;T&gt;</code> (T 支持逆变)</li>\n</ul>\n<h3 id=\"自定义泛型接口\"><a href=\"#自定义泛型接口\" class=\"headerlink\" title=\"自定义泛型接口\"></a>自定义泛型接口</h3><h3 id=\"思考\"><a href=\"#思考\" class=\"headerlink\" title=\"思考\"></a>思考</h3><h4 id=\"为什么-out-返回值-只能协变\"><a href=\"#为什么-out-返回值-只能协变\" class=\"headerlink\" title=\" 为什么 out(返回值) 只能协变? \"></a><p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p></h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IEnumerable&lt;object&gt; obj = new List&lt;object&gt;();</span><br><span class=\"line\">//如果在这里我想obj中添加</span><br><span class=\"line\">IEnumeralbe&lt;string&gt; str = obj;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"为什么-out-返回值-只能协变-1\"><a href=\"#为什么-out-返回值-只能协变-1\" class=\"headerlink\" title=\" 为什么 out(返回值) 只能协变? \"></a><p style=\"color:red;\"> 为什么 out(返回值) 只能协变? </p></h4>"},{"title":"在 VS2013 中使用 bower","date":"2016-10-26T09:35:03.000Z","_content":"\n## 简介\nVS2015 和 Asp.Net Core 的发布, 集成了很多方便的前端工具, bower 就是其中之一. 我们使用 bower 可以很方便的安装项目所依赖的前端库.\n同样在 VS2013 或者 VS2015 中创建 MVC5 项目时, 我们也可以使用 bower.\n\n## 安装 Node 和 Bower 和 Git\n1. 要安装 Node, [download and install node.js](http://nodejs.org/)\n\n2. 使用 Node 中集成的 npm 安装 bower \n    ```\n    npm install bower -g\n    ```\n3. 安装 Git\n\n<!--more-->\n\n## 为项目添加 Bower\n### 在项目中创建一个新的 bower.json 文件\n1. 第一种方式\n\n    在项目目录下打开控制台, 运行 `bower init` 命令, 按步骤初始化完成\n\n2. 第二种方式\n\n    使用 VS2013 或 VS2015 在项目中, 右键新建 bower.json 项\n\n### 使用 bower\n1. 第一种方式 -- 直接在控制台中运行命令\n    ```\n    bower install jquery --save\n    ```\n\n2. 第二种方式 -- 使用 VS 执行\n\n    在 bower.json 文件的 dependencies 下添加所需要的前端库; 右键 bower.json 文件; Restore Packages;\n\n> 默认情况下, bower components 被安装在 bower_components 文件夹下. 通常不需要将此文件夹包含在项目中, 也不会加入到源码管理中. 使用 `bower install` 可以轻松地恢复这些文件.\n\n### 从 bower_components 文件夹中获取需要的文件\n有些人直接将 bower_components 文件夹包含在项目中, 并且直接引用 JavaScritp/Css文件. 通常 bower_components文件夹包含很多我们不需要的东西. 最好的做法是, 把需要的文件复制到其他文件夹并且引入到项目中. 使用 client side build system, 如: [Grunt](http://gruntjs.com/) 或者 [Gulp](http://gulpjs.com/) 可以很容易做到. 我们使用 Gulp.\n\n为我们的项目设置 Gulp, 可以参考 [How to use Gulp in Visual Studio](gulp_in_visualStudio.md)\n\n对于 gulp 文件, 我们需要使用下面的这些 node 模块\n```\nnpm install gulp --save-dev\nnpm install gulp-concat --save-dev\nnpm install gulp-uglify --save-dev\nnpm install del --save-dev \nnpm install gulp-bower --save-dev \nnpm install gulp-minify-css --save-dev\n```\n\n下面是 gulpfile.js 文件, MVC中由新项目模板创建的. 注释解释了每一个 gulp task 做的事情.\n```\n///\n// include plug-ins\nvar gulp = require('gulp');\nvar concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nvar del = require('del');\nvar minifyCSS = require('gulp-minify-css');\nvar copy = require('gulp-copy');\nvar bower = require('gulp-bower');\nvar sourcemaps = require('gulp-sourcemaps');\n\nvar config = {\n    //JavaScript files that will be combined into a jquery bundle\n    jquerysrc: [\n        'bower_components/jquery/dist/jquery.min.js',\n        'bower_components/jquery-validation/dist/jquery.validate.min.js',\n        'bower_components/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js'\n    ],\n    jquerybundle: 'Scripts/jquery-bundle.min.js',\n\n    //JavaScript files that will be combined into a Bootstrap bundle\n    bootstrapsrc: [\n        'bower_components/bootstrap/dist/js/bootstrap.min.js',\n        'bower_components/respond-minmax/dest/respond.min.js'\n    ],\n    bootstrapbundle: 'Scripts/bootstrap-bundle.min.js',\n\n    //Modernizr\n    modernizrsrc: ['bower_components/modernizr/modernizr.js'],\n    modernizrbundle: 'Scripts/modernizer.min.js',\n\n    //Bootstrap CSS and Fonts\n    bootstrapcss: 'bower_components/bootstrap/dist/css/bootstrap.css',\n    boostrapfonts: 'bower_components/bootstrap/dist/fonts/*.*',\n\n    appcss: 'Content/Site.css',\n    fontsout: 'Content/dist/fonts',\n    cssout: 'Content/dist/css'\n\n}\n\n// Synchronously delete the output script file(s)\ngulp.task('clean-vendor-scripts', function (cb) {\n    del([config.jquerybundle,\n              config.bootstrapbundle,\n              config.modernizrbundle], cb);\n});\n\n//Create a jquery bundled file\ngulp.task('jquery-bundle', ['clean-vendor-scripts', 'bower-restore'], function () {\n    return gulp.src(config.jquerysrc)\n     .pipe(concat('jquery-bundle.min.js'))\n     .pipe(gulp.dest('Scripts'));\n});\n\n//Create a bootstrap bundled file\ngulp.task('bootstrap-bundle', ['clean-vendor-scripts', 'bower-restore'], function () {\n    return gulp.src(config.bootstrapsrc)\n     .pipe(sourcemaps.init())\n     .pipe(concat('bootstrap-bundle.min.js'))\n     .pipe(sourcemaps.write('maps'))\n     .pipe(gulp.dest('Scripts'));\n});\n\n//Create a modernizr bundled file\ngulp.task('modernizer', ['clean-vendor-scripts', 'bower-restore'], function () {\n    return gulp.src(config.modernizrsrc)\n        .pipe(sourcemaps.init())\n        .pipe(uglify())\n        .pipe(concat('modernizer-min.js'))\n        .pipe(sourcemaps.write('maps'))\n        .pipe(gulp.dest('Scripts'));\n});\n\n// Combine and the vendor files from bower into bundles (output to the Scripts folder)\ngulp.task('vendor-scripts', ['jquery-bundle', 'bootstrap-bundle', 'modernizer'], function () {\n\n});\n\n// Synchronously delete the output style files (css / fonts)\ngulp.task('clean-styles', function (cb) {\n    del([config.fontsout,\n              config.cssout],cb);\n});\n\ngulp.task('css', ['clean-styles', 'bower-restore'], function () {\n    return gulp.src([config.bootstrapcss, config.appcss])\n     .pipe(concat('app.css'))\n     .pipe(gulp.dest(config.cssout))\n     .pipe(minifyCSS())\n     .pipe(concat('app.min.css'))\n     .pipe(gulp.dest(config.cssout));\n});\n\ngulp.task('fonts', ['clean-styles', 'bower-restore'], function () {\n    return\n    gulp.src(config.boostrapfonts)\n        .pipe(gulp.dest(config.fontsout));\n});\n\n// Combine and minify css files and output fonts\ngulp.task('styles', ['css', 'fonts'], function () {\n\n});\n\n//Restore all bower packages\ngulp.task('bower-restore', function() {\n    return bower();\n});\n\n//Set a default tasks\ngulp.task('default', ['vendor-scripts', 'styles'], function () {\n\n});\n```\n\n或者\n\n```\nvar gulp = require('gulp');\nvar concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nvar del = require('del');\nvar minifyCSS = require('gulp-minify-css');\nvar copy = require('gulp-copy');\nvar bower = require('gulp-bower');\nvar sourcemaps = require('gulp-sourcemaps');\n\nvar config = {\n    //JavaScript files that will be combined into a jquery bundle\n    jssrc: [\n        'bower_components/**/*.min.js'\n        , 'bower_components/**/*.js'\n    ]\n    , jsout: 'Scripts/lib'\n\n    //CSS and Fonts\n    , cssfontsrc: ['bower_components/**/*.min.css'\n                ,'bower_components/**/*.{otf,eot,svg,ttf,woff,woff2}']\n    , cssfontout: 'Content/lib/css'\n    , deleteend: '/*'\n}\n\n// Synchronously delete the output script file(s)\n//gulp.task('clean-vendor-scripts', function (cb) {\n//    del(\"Scripts/lib/*\", cb);\n//});\n\n//Create a jquery bundled file\ngulp.task('jsfile-copy', function (cb) {\n    del(config.jsout + +config.deleteend, cb);\n\n    // copy js\n    return gulp.src(config.jssrc)\n           .pipe(gulp.dest(config.jsout));\n});\n\n// Synchronously delete the output style files (css / fonts)\n//gulp.task('clean-styles', function (cb) {\n//    del([config.fontsout,\n//              config.cssout], cb);\n//});\n\ngulp.task('cssfont-copy', function (cb) {\n    del(config.cssfontout + config.deleteend, cb);\n\n    // copy css and font\n    return gulp.src(config.cssfontsrc)\n               .pipe(gulp.dest(config.cssfontout))\n});\n\n//Restore all bower packages\ngulp.task('bower-restore', function () {\n    return bower();\n});\n\n//Set a default tasks\ngulp.task('default', ['jsfile-copy', 'cssfont-copy'], function () {\n\n});\n```\n\n在 command line 中, 使用 run gulp 运行 gulp tasks. 会输出一些 min.js 文件到 Scripts 文件夹、一些 css 和 font 文件到 Contents/dist 文件夹. 在 Visual Studio中, 包含这些新的文件到项目中.\n\n### 移除 NuGet Packages\n如果项目中存在 NuGet 安装的一些 script 和 css, 可以 uninstall 这些.\n```\nUninstall-Package Microsoft.jQuery.Unobtrusive.Validation\n\nUninstall-Package jQuery.Validation\n\nUninstall-Package Bootstrap\n\nUninstall-Package jQuery\n\nUninstall-Package Respond\n\nUninstall-Package Modernizr\n```\n\n### 引用 Scripts 和 styles\n使用新的脚本和样式文件替换原来的目录.\n\n### 确保 Gulp 在运行项目之前先运行一次\n打开 Task Explorer window. 选择默认的 gulp task, 右键点击, select Bindings-> Before Build.\n这样默认的 gulp task 将会在每次编译之前运行了.","source":"_posts/bower_in_vs2013.md","raw":"---\ntitle: 在 VS2013 中使用 bower\ndate: 2016-10-26 17:35:03\ntags: [bower,VS2013,gulp]\ncategories: [bower]\n---\n\n## 简介\nVS2015 和 Asp.Net Core 的发布, 集成了很多方便的前端工具, bower 就是其中之一. 我们使用 bower 可以很方便的安装项目所依赖的前端库.\n同样在 VS2013 或者 VS2015 中创建 MVC5 项目时, 我们也可以使用 bower.\n\n## 安装 Node 和 Bower 和 Git\n1. 要安装 Node, [download and install node.js](http://nodejs.org/)\n\n2. 使用 Node 中集成的 npm 安装 bower \n    ```\n    npm install bower -g\n    ```\n3. 安装 Git\n\n<!--more-->\n\n## 为项目添加 Bower\n### 在项目中创建一个新的 bower.json 文件\n1. 第一种方式\n\n    在项目目录下打开控制台, 运行 `bower init` 命令, 按步骤初始化完成\n\n2. 第二种方式\n\n    使用 VS2013 或 VS2015 在项目中, 右键新建 bower.json 项\n\n### 使用 bower\n1. 第一种方式 -- 直接在控制台中运行命令\n    ```\n    bower install jquery --save\n    ```\n\n2. 第二种方式 -- 使用 VS 执行\n\n    在 bower.json 文件的 dependencies 下添加所需要的前端库; 右键 bower.json 文件; Restore Packages;\n\n> 默认情况下, bower components 被安装在 bower_components 文件夹下. 通常不需要将此文件夹包含在项目中, 也不会加入到源码管理中. 使用 `bower install` 可以轻松地恢复这些文件.\n\n### 从 bower_components 文件夹中获取需要的文件\n有些人直接将 bower_components 文件夹包含在项目中, 并且直接引用 JavaScritp/Css文件. 通常 bower_components文件夹包含很多我们不需要的东西. 最好的做法是, 把需要的文件复制到其他文件夹并且引入到项目中. 使用 client side build system, 如: [Grunt](http://gruntjs.com/) 或者 [Gulp](http://gulpjs.com/) 可以很容易做到. 我们使用 Gulp.\n\n为我们的项目设置 Gulp, 可以参考 [How to use Gulp in Visual Studio](gulp_in_visualStudio.md)\n\n对于 gulp 文件, 我们需要使用下面的这些 node 模块\n```\nnpm install gulp --save-dev\nnpm install gulp-concat --save-dev\nnpm install gulp-uglify --save-dev\nnpm install del --save-dev \nnpm install gulp-bower --save-dev \nnpm install gulp-minify-css --save-dev\n```\n\n下面是 gulpfile.js 文件, MVC中由新项目模板创建的. 注释解释了每一个 gulp task 做的事情.\n```\n///\n// include plug-ins\nvar gulp = require('gulp');\nvar concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nvar del = require('del');\nvar minifyCSS = require('gulp-minify-css');\nvar copy = require('gulp-copy');\nvar bower = require('gulp-bower');\nvar sourcemaps = require('gulp-sourcemaps');\n\nvar config = {\n    //JavaScript files that will be combined into a jquery bundle\n    jquerysrc: [\n        'bower_components/jquery/dist/jquery.min.js',\n        'bower_components/jquery-validation/dist/jquery.validate.min.js',\n        'bower_components/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js'\n    ],\n    jquerybundle: 'Scripts/jquery-bundle.min.js',\n\n    //JavaScript files that will be combined into a Bootstrap bundle\n    bootstrapsrc: [\n        'bower_components/bootstrap/dist/js/bootstrap.min.js',\n        'bower_components/respond-minmax/dest/respond.min.js'\n    ],\n    bootstrapbundle: 'Scripts/bootstrap-bundle.min.js',\n\n    //Modernizr\n    modernizrsrc: ['bower_components/modernizr/modernizr.js'],\n    modernizrbundle: 'Scripts/modernizer.min.js',\n\n    //Bootstrap CSS and Fonts\n    bootstrapcss: 'bower_components/bootstrap/dist/css/bootstrap.css',\n    boostrapfonts: 'bower_components/bootstrap/dist/fonts/*.*',\n\n    appcss: 'Content/Site.css',\n    fontsout: 'Content/dist/fonts',\n    cssout: 'Content/dist/css'\n\n}\n\n// Synchronously delete the output script file(s)\ngulp.task('clean-vendor-scripts', function (cb) {\n    del([config.jquerybundle,\n              config.bootstrapbundle,\n              config.modernizrbundle], cb);\n});\n\n//Create a jquery bundled file\ngulp.task('jquery-bundle', ['clean-vendor-scripts', 'bower-restore'], function () {\n    return gulp.src(config.jquerysrc)\n     .pipe(concat('jquery-bundle.min.js'))\n     .pipe(gulp.dest('Scripts'));\n});\n\n//Create a bootstrap bundled file\ngulp.task('bootstrap-bundle', ['clean-vendor-scripts', 'bower-restore'], function () {\n    return gulp.src(config.bootstrapsrc)\n     .pipe(sourcemaps.init())\n     .pipe(concat('bootstrap-bundle.min.js'))\n     .pipe(sourcemaps.write('maps'))\n     .pipe(gulp.dest('Scripts'));\n});\n\n//Create a modernizr bundled file\ngulp.task('modernizer', ['clean-vendor-scripts', 'bower-restore'], function () {\n    return gulp.src(config.modernizrsrc)\n        .pipe(sourcemaps.init())\n        .pipe(uglify())\n        .pipe(concat('modernizer-min.js'))\n        .pipe(sourcemaps.write('maps'))\n        .pipe(gulp.dest('Scripts'));\n});\n\n// Combine and the vendor files from bower into bundles (output to the Scripts folder)\ngulp.task('vendor-scripts', ['jquery-bundle', 'bootstrap-bundle', 'modernizer'], function () {\n\n});\n\n// Synchronously delete the output style files (css / fonts)\ngulp.task('clean-styles', function (cb) {\n    del([config.fontsout,\n              config.cssout],cb);\n});\n\ngulp.task('css', ['clean-styles', 'bower-restore'], function () {\n    return gulp.src([config.bootstrapcss, config.appcss])\n     .pipe(concat('app.css'))\n     .pipe(gulp.dest(config.cssout))\n     .pipe(minifyCSS())\n     .pipe(concat('app.min.css'))\n     .pipe(gulp.dest(config.cssout));\n});\n\ngulp.task('fonts', ['clean-styles', 'bower-restore'], function () {\n    return\n    gulp.src(config.boostrapfonts)\n        .pipe(gulp.dest(config.fontsout));\n});\n\n// Combine and minify css files and output fonts\ngulp.task('styles', ['css', 'fonts'], function () {\n\n});\n\n//Restore all bower packages\ngulp.task('bower-restore', function() {\n    return bower();\n});\n\n//Set a default tasks\ngulp.task('default', ['vendor-scripts', 'styles'], function () {\n\n});\n```\n\n或者\n\n```\nvar gulp = require('gulp');\nvar concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nvar del = require('del');\nvar minifyCSS = require('gulp-minify-css');\nvar copy = require('gulp-copy');\nvar bower = require('gulp-bower');\nvar sourcemaps = require('gulp-sourcemaps');\n\nvar config = {\n    //JavaScript files that will be combined into a jquery bundle\n    jssrc: [\n        'bower_components/**/*.min.js'\n        , 'bower_components/**/*.js'\n    ]\n    , jsout: 'Scripts/lib'\n\n    //CSS and Fonts\n    , cssfontsrc: ['bower_components/**/*.min.css'\n                ,'bower_components/**/*.{otf,eot,svg,ttf,woff,woff2}']\n    , cssfontout: 'Content/lib/css'\n    , deleteend: '/*'\n}\n\n// Synchronously delete the output script file(s)\n//gulp.task('clean-vendor-scripts', function (cb) {\n//    del(\"Scripts/lib/*\", cb);\n//});\n\n//Create a jquery bundled file\ngulp.task('jsfile-copy', function (cb) {\n    del(config.jsout + +config.deleteend, cb);\n\n    // copy js\n    return gulp.src(config.jssrc)\n           .pipe(gulp.dest(config.jsout));\n});\n\n// Synchronously delete the output style files (css / fonts)\n//gulp.task('clean-styles', function (cb) {\n//    del([config.fontsout,\n//              config.cssout], cb);\n//});\n\ngulp.task('cssfont-copy', function (cb) {\n    del(config.cssfontout + config.deleteend, cb);\n\n    // copy css and font\n    return gulp.src(config.cssfontsrc)\n               .pipe(gulp.dest(config.cssfontout))\n});\n\n//Restore all bower packages\ngulp.task('bower-restore', function () {\n    return bower();\n});\n\n//Set a default tasks\ngulp.task('default', ['jsfile-copy', 'cssfont-copy'], function () {\n\n});\n```\n\n在 command line 中, 使用 run gulp 运行 gulp tasks. 会输出一些 min.js 文件到 Scripts 文件夹、一些 css 和 font 文件到 Contents/dist 文件夹. 在 Visual Studio中, 包含这些新的文件到项目中.\n\n### 移除 NuGet Packages\n如果项目中存在 NuGet 安装的一些 script 和 css, 可以 uninstall 这些.\n```\nUninstall-Package Microsoft.jQuery.Unobtrusive.Validation\n\nUninstall-Package jQuery.Validation\n\nUninstall-Package Bootstrap\n\nUninstall-Package jQuery\n\nUninstall-Package Respond\n\nUninstall-Package Modernizr\n```\n\n### 引用 Scripts 和 styles\n使用新的脚本和样式文件替换原来的目录.\n\n### 确保 Gulp 在运行项目之前先运行一次\n打开 Task Explorer window. 选择默认的 gulp task, 右键点击, select Bindings-> Before Build.\n这样默认的 gulp task 将会在每次编译之前运行了.","slug":"bower_in_vs2013","published":1,"updated":"2020-01-09T20:21:18.090Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qi0009bicadys9cwi0","content":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>VS2015 和 Asp.Net Core 的发布, 集成了很多方便的前端工具, bower 就是其中之一. 我们使用 bower 可以很方便的安装项目所依赖的前端库.<br>同样在 VS2013 或者 VS2015 中创建 MVC5 项目时, 我们也可以使用 bower.</p>\n<h2 id=\"安装-Node-和-Bower-和-Git\"><a href=\"#安装-Node-和-Bower-和-Git\" class=\"headerlink\" title=\"安装 Node 和 Bower 和 Git\"></a>安装 Node 和 Bower 和 Git</h2><ol>\n<li><p>要安装 Node, <a href=\"http://nodejs.org/\" target=\"_blank\" rel=\"noopener\">download and install node.js</a></p>\n</li>\n<li><p>使用 Node 中集成的 npm 安装 bower </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install bower -g</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装 Git</p>\n</li>\n</ol>\n<a id=\"more\"></a>\n\n<h2 id=\"为项目添加-Bower\"><a href=\"#为项目添加-Bower\" class=\"headerlink\" title=\"为项目添加 Bower\"></a>为项目添加 Bower</h2><h3 id=\"在项目中创建一个新的-bower-json-文件\"><a href=\"#在项目中创建一个新的-bower-json-文件\" class=\"headerlink\" title=\"在项目中创建一个新的 bower.json 文件\"></a>在项目中创建一个新的 bower.json 文件</h3><ol>\n<li><p>第一种方式</p>\n<p> 在项目目录下打开控制台, 运行 <code>bower init</code> 命令, 按步骤初始化完成</p>\n</li>\n<li><p>第二种方式</p>\n<p> 使用 VS2013 或 VS2015 在项目中, 右键新建 bower.json 项</p>\n</li>\n</ol>\n<h3 id=\"使用-bower\"><a href=\"#使用-bower\" class=\"headerlink\" title=\"使用 bower\"></a>使用 bower</h3><ol>\n<li><p>第一种方式 – 直接在控制台中运行命令</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bower install jquery --save</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>第二种方式 – 使用 VS 执行</p>\n<p> 在 bower.json 文件的 dependencies 下添加所需要的前端库; 右键 bower.json 文件; Restore Packages;</p>\n</li>\n</ol>\n<blockquote>\n<p>默认情况下, bower components 被安装在 bower_components 文件夹下. 通常不需要将此文件夹包含在项目中, 也不会加入到源码管理中. 使用 <code>bower install</code> 可以轻松地恢复这些文件.</p>\n</blockquote>\n<h3 id=\"从-bower-components-文件夹中获取需要的文件\"><a href=\"#从-bower-components-文件夹中获取需要的文件\" class=\"headerlink\" title=\"从 bower_components 文件夹中获取需要的文件\"></a>从 bower_components 文件夹中获取需要的文件</h3><p>有些人直接将 bower_components 文件夹包含在项目中, 并且直接引用 JavaScritp/Css文件. 通常 bower_components文件夹包含很多我们不需要的东西. 最好的做法是, 把需要的文件复制到其他文件夹并且引入到项目中. 使用 client side build system, 如: <a href=\"http://gruntjs.com/\" target=\"_blank\" rel=\"noopener\">Grunt</a> 或者 <a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"noopener\">Gulp</a> 可以很容易做到. 我们使用 Gulp.</p>\n<p>为我们的项目设置 Gulp, 可以参考 <a href=\"gulp_in_visualStudio.md\">How to use Gulp in Visual Studio</a></p>\n<p>对于 gulp 文件, 我们需要使用下面的这些 node 模块</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install gulp --save-dev</span><br><span class=\"line\">npm install gulp-concat --save-dev</span><br><span class=\"line\">npm install gulp-uglify --save-dev</span><br><span class=\"line\">npm install del --save-dev </span><br><span class=\"line\">npm install gulp-bower --save-dev </span><br><span class=\"line\">npm install gulp-minify-css --save-dev</span><br></pre></td></tr></table></figure>\n\n<p>下面是 gulpfile.js 文件, MVC中由新项目模板创建的. 注释解释了每一个 gulp task 做的事情.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">///</span><br><span class=\"line\">// include plug-ins</span><br><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\">var concat = require(&apos;gulp-concat&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var del = require(&apos;del&apos;);</span><br><span class=\"line\">var minifyCSS = require(&apos;gulp-minify-css&apos;);</span><br><span class=\"line\">var copy = require(&apos;gulp-copy&apos;);</span><br><span class=\"line\">var bower = require(&apos;gulp-bower&apos;);</span><br><span class=\"line\">var sourcemaps = require(&apos;gulp-sourcemaps&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">var config = &#123;</span><br><span class=\"line\">    //JavaScript files that will be combined into a jquery bundle</span><br><span class=\"line\">    jquerysrc: [</span><br><span class=\"line\">        &apos;bower_components/jquery/dist/jquery.min.js&apos;,</span><br><span class=\"line\">        &apos;bower_components/jquery-validation/dist/jquery.validate.min.js&apos;,</span><br><span class=\"line\">        &apos;bower_components/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js&apos;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    jquerybundle: &apos;Scripts/jquery-bundle.min.js&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    //JavaScript files that will be combined into a Bootstrap bundle</span><br><span class=\"line\">    bootstrapsrc: [</span><br><span class=\"line\">        &apos;bower_components/bootstrap/dist/js/bootstrap.min.js&apos;,</span><br><span class=\"line\">        &apos;bower_components/respond-minmax/dest/respond.min.js&apos;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    bootstrapbundle: &apos;Scripts/bootstrap-bundle.min.js&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    //Modernizr</span><br><span class=\"line\">    modernizrsrc: [&apos;bower_components/modernizr/modernizr.js&apos;],</span><br><span class=\"line\">    modernizrbundle: &apos;Scripts/modernizer.min.js&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    //Bootstrap CSS and Fonts</span><br><span class=\"line\">    bootstrapcss: &apos;bower_components/bootstrap/dist/css/bootstrap.css&apos;,</span><br><span class=\"line\">    boostrapfonts: &apos;bower_components/bootstrap/dist/fonts/*.*&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    appcss: &apos;Content/Site.css&apos;,</span><br><span class=\"line\">    fontsout: &apos;Content/dist/fonts&apos;,</span><br><span class=\"line\">    cssout: &apos;Content/dist/css&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output script file(s)</span><br><span class=\"line\">gulp.task(&apos;clean-vendor-scripts&apos;, function (cb) &#123;</span><br><span class=\"line\">    del([config.jquerybundle,</span><br><span class=\"line\">              config.bootstrapbundle,</span><br><span class=\"line\">              config.modernizrbundle], cb);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a jquery bundled file</span><br><span class=\"line\">gulp.task(&apos;jquery-bundle&apos;, [&apos;clean-vendor-scripts&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src(config.jquerysrc)</span><br><span class=\"line\">     .pipe(concat(&apos;jquery-bundle.min.js&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(&apos;Scripts&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a bootstrap bundled file</span><br><span class=\"line\">gulp.task(&apos;bootstrap-bundle&apos;, [&apos;clean-vendor-scripts&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src(config.bootstrapsrc)</span><br><span class=\"line\">     .pipe(sourcemaps.init())</span><br><span class=\"line\">     .pipe(concat(&apos;bootstrap-bundle.min.js&apos;))</span><br><span class=\"line\">     .pipe(sourcemaps.write(&apos;maps&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(&apos;Scripts&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a modernizr bundled file</span><br><span class=\"line\">gulp.task(&apos;modernizer&apos;, [&apos;clean-vendor-scripts&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src(config.modernizrsrc)</span><br><span class=\"line\">        .pipe(sourcemaps.init())</span><br><span class=\"line\">        .pipe(uglify())</span><br><span class=\"line\">        .pipe(concat(&apos;modernizer-min.js&apos;))</span><br><span class=\"line\">        .pipe(sourcemaps.write(&apos;maps&apos;))</span><br><span class=\"line\">        .pipe(gulp.dest(&apos;Scripts&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Combine and the vendor files from bower into bundles (output to the Scripts folder)</span><br><span class=\"line\">gulp.task(&apos;vendor-scripts&apos;, [&apos;jquery-bundle&apos;, &apos;bootstrap-bundle&apos;, &apos;modernizer&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output style files (css / fonts)</span><br><span class=\"line\">gulp.task(&apos;clean-styles&apos;, function (cb) &#123;</span><br><span class=\"line\">    del([config.fontsout,</span><br><span class=\"line\">              config.cssout],cb);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(&apos;css&apos;, [&apos;clean-styles&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src([config.bootstrapcss, config.appcss])</span><br><span class=\"line\">     .pipe(concat(&apos;app.css&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(config.cssout))</span><br><span class=\"line\">     .pipe(minifyCSS())</span><br><span class=\"line\">     .pipe(concat(&apos;app.min.css&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(config.cssout));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(&apos;fonts&apos;, [&apos;clean-styles&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return</span><br><span class=\"line\">    gulp.src(config.boostrapfonts)</span><br><span class=\"line\">        .pipe(gulp.dest(config.fontsout));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Combine and minify css files and output fonts</span><br><span class=\"line\">gulp.task(&apos;styles&apos;, [&apos;css&apos;, &apos;fonts&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Restore all bower packages</span><br><span class=\"line\">gulp.task(&apos;bower-restore&apos;, function() &#123;</span><br><span class=\"line\">    return bower();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Set a default tasks</span><br><span class=\"line\">gulp.task(&apos;default&apos;, [&apos;vendor-scripts&apos;, &apos;styles&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>或者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\">var concat = require(&apos;gulp-concat&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var del = require(&apos;del&apos;);</span><br><span class=\"line\">var minifyCSS = require(&apos;gulp-minify-css&apos;);</span><br><span class=\"line\">var copy = require(&apos;gulp-copy&apos;);</span><br><span class=\"line\">var bower = require(&apos;gulp-bower&apos;);</span><br><span class=\"line\">var sourcemaps = require(&apos;gulp-sourcemaps&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">var config = &#123;</span><br><span class=\"line\">    //JavaScript files that will be combined into a jquery bundle</span><br><span class=\"line\">    jssrc: [</span><br><span class=\"line\">        &apos;bower_components/**/*.min.js&apos;</span><br><span class=\"line\">        , &apos;bower_components/**/*.js&apos;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">    , jsout: &apos;Scripts/lib&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">    //CSS and Fonts</span><br><span class=\"line\">    , cssfontsrc: [&apos;bower_components/**/*.min.css&apos;</span><br><span class=\"line\">                ,&apos;bower_components/**/*.&#123;otf,eot,svg,ttf,woff,woff2&#125;&apos;]</span><br><span class=\"line\">    , cssfontout: &apos;Content/lib/css&apos;</span><br><span class=\"line\">    , deleteend: &apos;/*&apos;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output script file(s)</span><br><span class=\"line\">//gulp.task(&apos;clean-vendor-scripts&apos;, function (cb) &#123;</span><br><span class=\"line\">//    del(&quot;Scripts/lib/*&quot;, cb);</span><br><span class=\"line\">//&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a jquery bundled file</span><br><span class=\"line\">gulp.task(&apos;jsfile-copy&apos;, function (cb) &#123;</span><br><span class=\"line\">    del(config.jsout + +config.deleteend, cb);</span><br><span class=\"line\"></span><br><span class=\"line\">    // copy js</span><br><span class=\"line\">    return gulp.src(config.jssrc)</span><br><span class=\"line\">           .pipe(gulp.dest(config.jsout));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output style files (css / fonts)</span><br><span class=\"line\">//gulp.task(&apos;clean-styles&apos;, function (cb) &#123;</span><br><span class=\"line\">//    del([config.fontsout,</span><br><span class=\"line\">//              config.cssout], cb);</span><br><span class=\"line\">//&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(&apos;cssfont-copy&apos;, function (cb) &#123;</span><br><span class=\"line\">    del(config.cssfontout + config.deleteend, cb);</span><br><span class=\"line\"></span><br><span class=\"line\">    // copy css and font</span><br><span class=\"line\">    return gulp.src(config.cssfontsrc)</span><br><span class=\"line\">               .pipe(gulp.dest(config.cssfontout))</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Restore all bower packages</span><br><span class=\"line\">gulp.task(&apos;bower-restore&apos;, function () &#123;</span><br><span class=\"line\">    return bower();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Set a default tasks</span><br><span class=\"line\">gulp.task(&apos;default&apos;, [&apos;jsfile-copy&apos;, &apos;cssfont-copy&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>在 command line 中, 使用 run gulp 运行 gulp tasks. 会输出一些 min.js 文件到 Scripts 文件夹、一些 css 和 font 文件到 Contents/dist 文件夹. 在 Visual Studio中, 包含这些新的文件到项目中.</p>\n<h3 id=\"移除-NuGet-Packages\"><a href=\"#移除-NuGet-Packages\" class=\"headerlink\" title=\"移除 NuGet Packages\"></a>移除 NuGet Packages</h3><p>如果项目中存在 NuGet 安装的一些 script 和 css, 可以 uninstall 这些.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Uninstall-Package Microsoft.jQuery.Unobtrusive.Validation</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package jQuery.Validation</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package Bootstrap</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package jQuery</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package Respond</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package Modernizr</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"引用-Scripts-和-styles\"><a href=\"#引用-Scripts-和-styles\" class=\"headerlink\" title=\"引用 Scripts 和 styles\"></a>引用 Scripts 和 styles</h3><p>使用新的脚本和样式文件替换原来的目录.</p>\n<h3 id=\"确保-Gulp-在运行项目之前先运行一次\"><a href=\"#确保-Gulp-在运行项目之前先运行一次\" class=\"headerlink\" title=\"确保 Gulp 在运行项目之前先运行一次\"></a>确保 Gulp 在运行项目之前先运行一次</h3><p>打开 Task Explorer window. 选择默认的 gulp task, 右键点击, select Bindings-&gt; Before Build.<br>这样默认的 gulp task 将会在每次编译之前运行了.</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>VS2015 和 Asp.Net Core 的发布, 集成了很多方便的前端工具, bower 就是其中之一. 我们使用 bower 可以很方便的安装项目所依赖的前端库.<br>同样在 VS2013 或者 VS2015 中创建 MVC5 项目时, 我们也可以使用 bower.</p>\n<h2 id=\"安装-Node-和-Bower-和-Git\"><a href=\"#安装-Node-和-Bower-和-Git\" class=\"headerlink\" title=\"安装 Node 和 Bower 和 Git\"></a>安装 Node 和 Bower 和 Git</h2><ol>\n<li><p>要安装 Node, <a href=\"http://nodejs.org/\" target=\"_blank\" rel=\"noopener\">download and install node.js</a></p>\n</li>\n<li><p>使用 Node 中集成的 npm 安装 bower </p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install bower -g</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>安装 Git</p>\n</li>\n</ol>","more":"<h2 id=\"为项目添加-Bower\"><a href=\"#为项目添加-Bower\" class=\"headerlink\" title=\"为项目添加 Bower\"></a>为项目添加 Bower</h2><h3 id=\"在项目中创建一个新的-bower-json-文件\"><a href=\"#在项目中创建一个新的-bower-json-文件\" class=\"headerlink\" title=\"在项目中创建一个新的 bower.json 文件\"></a>在项目中创建一个新的 bower.json 文件</h3><ol>\n<li><p>第一种方式</p>\n<p> 在项目目录下打开控制台, 运行 <code>bower init</code> 命令, 按步骤初始化完成</p>\n</li>\n<li><p>第二种方式</p>\n<p> 使用 VS2013 或 VS2015 在项目中, 右键新建 bower.json 项</p>\n</li>\n</ol>\n<h3 id=\"使用-bower\"><a href=\"#使用-bower\" class=\"headerlink\" title=\"使用 bower\"></a>使用 bower</h3><ol>\n<li><p>第一种方式 – 直接在控制台中运行命令</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bower install jquery --save</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>第二种方式 – 使用 VS 执行</p>\n<p> 在 bower.json 文件的 dependencies 下添加所需要的前端库; 右键 bower.json 文件; Restore Packages;</p>\n</li>\n</ol>\n<blockquote>\n<p>默认情况下, bower components 被安装在 bower_components 文件夹下. 通常不需要将此文件夹包含在项目中, 也不会加入到源码管理中. 使用 <code>bower install</code> 可以轻松地恢复这些文件.</p>\n</blockquote>\n<h3 id=\"从-bower-components-文件夹中获取需要的文件\"><a href=\"#从-bower-components-文件夹中获取需要的文件\" class=\"headerlink\" title=\"从 bower_components 文件夹中获取需要的文件\"></a>从 bower_components 文件夹中获取需要的文件</h3><p>有些人直接将 bower_components 文件夹包含在项目中, 并且直接引用 JavaScritp/Css文件. 通常 bower_components文件夹包含很多我们不需要的东西. 最好的做法是, 把需要的文件复制到其他文件夹并且引入到项目中. 使用 client side build system, 如: <a href=\"http://gruntjs.com/\" target=\"_blank\" rel=\"noopener\">Grunt</a> 或者 <a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"noopener\">Gulp</a> 可以很容易做到. 我们使用 Gulp.</p>\n<p>为我们的项目设置 Gulp, 可以参考 <a href=\"gulp_in_visualStudio.md\">How to use Gulp in Visual Studio</a></p>\n<p>对于 gulp 文件, 我们需要使用下面的这些 node 模块</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install gulp --save-dev</span><br><span class=\"line\">npm install gulp-concat --save-dev</span><br><span class=\"line\">npm install gulp-uglify --save-dev</span><br><span class=\"line\">npm install del --save-dev </span><br><span class=\"line\">npm install gulp-bower --save-dev </span><br><span class=\"line\">npm install gulp-minify-css --save-dev</span><br></pre></td></tr></table></figure>\n\n<p>下面是 gulpfile.js 文件, MVC中由新项目模板创建的. 注释解释了每一个 gulp task 做的事情.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">///</span><br><span class=\"line\">// include plug-ins</span><br><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\">var concat = require(&apos;gulp-concat&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var del = require(&apos;del&apos;);</span><br><span class=\"line\">var minifyCSS = require(&apos;gulp-minify-css&apos;);</span><br><span class=\"line\">var copy = require(&apos;gulp-copy&apos;);</span><br><span class=\"line\">var bower = require(&apos;gulp-bower&apos;);</span><br><span class=\"line\">var sourcemaps = require(&apos;gulp-sourcemaps&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">var config = &#123;</span><br><span class=\"line\">    //JavaScript files that will be combined into a jquery bundle</span><br><span class=\"line\">    jquerysrc: [</span><br><span class=\"line\">        &apos;bower_components/jquery/dist/jquery.min.js&apos;,</span><br><span class=\"line\">        &apos;bower_components/jquery-validation/dist/jquery.validate.min.js&apos;,</span><br><span class=\"line\">        &apos;bower_components/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js&apos;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    jquerybundle: &apos;Scripts/jquery-bundle.min.js&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    //JavaScript files that will be combined into a Bootstrap bundle</span><br><span class=\"line\">    bootstrapsrc: [</span><br><span class=\"line\">        &apos;bower_components/bootstrap/dist/js/bootstrap.min.js&apos;,</span><br><span class=\"line\">        &apos;bower_components/respond-minmax/dest/respond.min.js&apos;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    bootstrapbundle: &apos;Scripts/bootstrap-bundle.min.js&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    //Modernizr</span><br><span class=\"line\">    modernizrsrc: [&apos;bower_components/modernizr/modernizr.js&apos;],</span><br><span class=\"line\">    modernizrbundle: &apos;Scripts/modernizer.min.js&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    //Bootstrap CSS and Fonts</span><br><span class=\"line\">    bootstrapcss: &apos;bower_components/bootstrap/dist/css/bootstrap.css&apos;,</span><br><span class=\"line\">    boostrapfonts: &apos;bower_components/bootstrap/dist/fonts/*.*&apos;,</span><br><span class=\"line\"></span><br><span class=\"line\">    appcss: &apos;Content/Site.css&apos;,</span><br><span class=\"line\">    fontsout: &apos;Content/dist/fonts&apos;,</span><br><span class=\"line\">    cssout: &apos;Content/dist/css&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output script file(s)</span><br><span class=\"line\">gulp.task(&apos;clean-vendor-scripts&apos;, function (cb) &#123;</span><br><span class=\"line\">    del([config.jquerybundle,</span><br><span class=\"line\">              config.bootstrapbundle,</span><br><span class=\"line\">              config.modernizrbundle], cb);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a jquery bundled file</span><br><span class=\"line\">gulp.task(&apos;jquery-bundle&apos;, [&apos;clean-vendor-scripts&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src(config.jquerysrc)</span><br><span class=\"line\">     .pipe(concat(&apos;jquery-bundle.min.js&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(&apos;Scripts&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a bootstrap bundled file</span><br><span class=\"line\">gulp.task(&apos;bootstrap-bundle&apos;, [&apos;clean-vendor-scripts&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src(config.bootstrapsrc)</span><br><span class=\"line\">     .pipe(sourcemaps.init())</span><br><span class=\"line\">     .pipe(concat(&apos;bootstrap-bundle.min.js&apos;))</span><br><span class=\"line\">     .pipe(sourcemaps.write(&apos;maps&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(&apos;Scripts&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a modernizr bundled file</span><br><span class=\"line\">gulp.task(&apos;modernizer&apos;, [&apos;clean-vendor-scripts&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src(config.modernizrsrc)</span><br><span class=\"line\">        .pipe(sourcemaps.init())</span><br><span class=\"line\">        .pipe(uglify())</span><br><span class=\"line\">        .pipe(concat(&apos;modernizer-min.js&apos;))</span><br><span class=\"line\">        .pipe(sourcemaps.write(&apos;maps&apos;))</span><br><span class=\"line\">        .pipe(gulp.dest(&apos;Scripts&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Combine and the vendor files from bower into bundles (output to the Scripts folder)</span><br><span class=\"line\">gulp.task(&apos;vendor-scripts&apos;, [&apos;jquery-bundle&apos;, &apos;bootstrap-bundle&apos;, &apos;modernizer&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output style files (css / fonts)</span><br><span class=\"line\">gulp.task(&apos;clean-styles&apos;, function (cb) &#123;</span><br><span class=\"line\">    del([config.fontsout,</span><br><span class=\"line\">              config.cssout],cb);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(&apos;css&apos;, [&apos;clean-styles&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return gulp.src([config.bootstrapcss, config.appcss])</span><br><span class=\"line\">     .pipe(concat(&apos;app.css&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(config.cssout))</span><br><span class=\"line\">     .pipe(minifyCSS())</span><br><span class=\"line\">     .pipe(concat(&apos;app.min.css&apos;))</span><br><span class=\"line\">     .pipe(gulp.dest(config.cssout));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(&apos;fonts&apos;, [&apos;clean-styles&apos;, &apos;bower-restore&apos;], function () &#123;</span><br><span class=\"line\">    return</span><br><span class=\"line\">    gulp.src(config.boostrapfonts)</span><br><span class=\"line\">        .pipe(gulp.dest(config.fontsout));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Combine and minify css files and output fonts</span><br><span class=\"line\">gulp.task(&apos;styles&apos;, [&apos;css&apos;, &apos;fonts&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Restore all bower packages</span><br><span class=\"line\">gulp.task(&apos;bower-restore&apos;, function() &#123;</span><br><span class=\"line\">    return bower();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Set a default tasks</span><br><span class=\"line\">gulp.task(&apos;default&apos;, [&apos;vendor-scripts&apos;, &apos;styles&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>或者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\">var concat = require(&apos;gulp-concat&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var del = require(&apos;del&apos;);</span><br><span class=\"line\">var minifyCSS = require(&apos;gulp-minify-css&apos;);</span><br><span class=\"line\">var copy = require(&apos;gulp-copy&apos;);</span><br><span class=\"line\">var bower = require(&apos;gulp-bower&apos;);</span><br><span class=\"line\">var sourcemaps = require(&apos;gulp-sourcemaps&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">var config = &#123;</span><br><span class=\"line\">    //JavaScript files that will be combined into a jquery bundle</span><br><span class=\"line\">    jssrc: [</span><br><span class=\"line\">        &apos;bower_components/**/*.min.js&apos;</span><br><span class=\"line\">        , &apos;bower_components/**/*.js&apos;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">    , jsout: &apos;Scripts/lib&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">    //CSS and Fonts</span><br><span class=\"line\">    , cssfontsrc: [&apos;bower_components/**/*.min.css&apos;</span><br><span class=\"line\">                ,&apos;bower_components/**/*.&#123;otf,eot,svg,ttf,woff,woff2&#125;&apos;]</span><br><span class=\"line\">    , cssfontout: &apos;Content/lib/css&apos;</span><br><span class=\"line\">    , deleteend: &apos;/*&apos;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output script file(s)</span><br><span class=\"line\">//gulp.task(&apos;clean-vendor-scripts&apos;, function (cb) &#123;</span><br><span class=\"line\">//    del(&quot;Scripts/lib/*&quot;, cb);</span><br><span class=\"line\">//&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Create a jquery bundled file</span><br><span class=\"line\">gulp.task(&apos;jsfile-copy&apos;, function (cb) &#123;</span><br><span class=\"line\">    del(config.jsout + +config.deleteend, cb);</span><br><span class=\"line\"></span><br><span class=\"line\">    // copy js</span><br><span class=\"line\">    return gulp.src(config.jssrc)</span><br><span class=\"line\">           .pipe(gulp.dest(config.jsout));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Synchronously delete the output style files (css / fonts)</span><br><span class=\"line\">//gulp.task(&apos;clean-styles&apos;, function (cb) &#123;</span><br><span class=\"line\">//    del([config.fontsout,</span><br><span class=\"line\">//              config.cssout], cb);</span><br><span class=\"line\">//&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(&apos;cssfont-copy&apos;, function (cb) &#123;</span><br><span class=\"line\">    del(config.cssfontout + config.deleteend, cb);</span><br><span class=\"line\"></span><br><span class=\"line\">    // copy css and font</span><br><span class=\"line\">    return gulp.src(config.cssfontsrc)</span><br><span class=\"line\">               .pipe(gulp.dest(config.cssfontout))</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Restore all bower packages</span><br><span class=\"line\">gulp.task(&apos;bower-restore&apos;, function () &#123;</span><br><span class=\"line\">    return bower();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Set a default tasks</span><br><span class=\"line\">gulp.task(&apos;default&apos;, [&apos;jsfile-copy&apos;, &apos;cssfont-copy&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>在 command line 中, 使用 run gulp 运行 gulp tasks. 会输出一些 min.js 文件到 Scripts 文件夹、一些 css 和 font 文件到 Contents/dist 文件夹. 在 Visual Studio中, 包含这些新的文件到项目中.</p>\n<h3 id=\"移除-NuGet-Packages\"><a href=\"#移除-NuGet-Packages\" class=\"headerlink\" title=\"移除 NuGet Packages\"></a>移除 NuGet Packages</h3><p>如果项目中存在 NuGet 安装的一些 script 和 css, 可以 uninstall 这些.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Uninstall-Package Microsoft.jQuery.Unobtrusive.Validation</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package jQuery.Validation</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package Bootstrap</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package jQuery</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package Respond</span><br><span class=\"line\"></span><br><span class=\"line\">Uninstall-Package Modernizr</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"引用-Scripts-和-styles\"><a href=\"#引用-Scripts-和-styles\" class=\"headerlink\" title=\"引用 Scripts 和 styles\"></a>引用 Scripts 和 styles</h3><p>使用新的脚本和样式文件替换原来的目录.</p>\n<h3 id=\"确保-Gulp-在运行项目之前先运行一次\"><a href=\"#确保-Gulp-在运行项目之前先运行一次\" class=\"headerlink\" title=\"确保 Gulp 在运行项目之前先运行一次\"></a>确保 Gulp 在运行项目之前先运行一次</h3><p>打开 Task Explorer window. 选择默认的 gulp task, 右键点击, select Bindings-&gt; Before Build.<br>这样默认的 gulp task 将会在每次编译之前运行了.</p>"},{"title":"C# 语法糖","date":"2016-12-02T03:30:00.000Z","_content":"\n## 语法糖\n\n| 符号        | 说明           |\n| ------------- |:-------------:|\n| **??**      | 非空取前者值, 空取后者值 | \n| **?.**      |       |\n\n### 0.0 示例 **??**\n```csharp\nvar str = GetValue() ?? \"test\";\n```\n相当于\n```csharp\nvar str = GetValue();\nif(str == null)\n{\n    str = \"test\";\n}\n```\n\n### 0.1 示例 **?.**","source":"_posts/csharp-syntax.md","raw":"---\ntitle: C# 语法糖\ndate: 2016-12-02 11:30:00\ncategories: [dotnet]\n---\n\n## 语法糖\n\n| 符号        | 说明           |\n| ------------- |:-------------:|\n| **??**      | 非空取前者值, 空取后者值 | \n| **?.**      |       |\n\n### 0.0 示例 **??**\n```csharp\nvar str = GetValue() ?? \"test\";\n```\n相当于\n```csharp\nvar str = GetValue();\nif(str == null)\n{\n    str = \"test\";\n}\n```\n\n### 0.1 示例 **?.**","slug":"csharp-syntax","published":1,"updated":"2020-01-09T20:21:18.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qk000bbicaehez85s0","content":"<h2 id=\"语法糖\"><a href=\"#语法糖\" class=\"headerlink\" title=\"语法糖\"></a>语法糖</h2><table>\n<thead>\n<tr>\n<th>符号</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>??</strong></td>\n<td align=\"center\">非空取前者值, 空取后者值</td>\n</tr>\n<tr>\n<td><strong>?.</strong></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<h3 id=\"0-0-示例\"><a href=\"#0-0-示例\" class=\"headerlink\" title=\"0.0 示例 ??\"></a>0.0 示例 <strong>??</strong></h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue() ?? <span class=\"string\">\"test\"</span>;</span><br></pre></td></tr></table></figure>\n\n<p>相当于</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(str == <span class=\"literal\">null</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    str = <span class=\"string\">\"test\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"0-1-示例\"><a href=\"#0-1-示例\" class=\"headerlink\" title=\"0.1 示例 ?.\"></a>0.1 示例 <strong>?.</strong></h3>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"语法糖\"><a href=\"#语法糖\" class=\"headerlink\" title=\"语法糖\"></a>语法糖</h2><table>\n<thead>\n<tr>\n<th>符号</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>??</strong></td>\n<td align=\"center\">非空取前者值, 空取后者值</td>\n</tr>\n<tr>\n<td><strong>?.</strong></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<h3 id=\"0-0-示例\"><a href=\"#0-0-示例\" class=\"headerlink\" title=\"0.0 示例 ??\"></a>0.0 示例 <strong>??</strong></h3><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue() ?? <span class=\"string\">\"test\"</span>;</span><br></pre></td></tr></table></figure>\n\n<p>相当于</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = GetValue();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(str == <span class=\"literal\">null</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    str = <span class=\"string\">\"test\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"0-1-示例\"><a href=\"#0-1-示例\" class=\"headerlink\" title=\"0.1 示例 ?.\"></a>0.1 示例 <strong>?.</strong></h3>"},{"title":"Elasticsearch 5.x.x 在 Windows 下安装配置","date":"2017-01-18T03:39:03.000Z","_content":"# 简介\n关于 Elasticsearch 的介绍可以查看 [Elasticsearch 权威指南](https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details), 讲解的非常详细.\n\n本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置\n\n# 安装\n由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境\n\n* 安装最新版 JAVA, 由 [www.java.com](http://www.java.com/) 下载\n\n    安装目录示例: `C:\\Program Files\\Java`\n\n<!--more-->    \n\n* 配置 JAVA 环境变量\n\n    新建系统变量 JAVA_HOME, 指向 JAVA 安装路径\n    ![](/assets/elasticsearch/java_home.png)\n    编辑系统变量中 Path ,新增 `%JAVA_HOME%\\bin` 或 `%JAVA_HOME%\\jre\\bin`\n    ![](/assets/elasticsearch/path_java_home.png)\n\n* 下载 Elasticsearch 5.x.x 版本 zip 包, 可由 [elasticsearch.org/download](http://www.elasticsearch.org/download/) 下载, 解压到相应目录\n    ![](/assets/elasticsearch/elasticsearch511.png)\n\n* 现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态\n    ![](/assets/elasticsearch/9200status.png)\n\n> 也可以将 elasticsearch 添加为 windows 服务, 随系统启动\n> * 在控制台执行 ealsticsearch-service install 命令即可\n> * 卸载服务命令 ealsticsearch-service remove\n> * 重启服务命令 ealsticsearch-service restart\n\n# 安装插件\n## 安装 elasticsearch-head\nGit 地址 [elasticsearch-head](https://github.com/mobz/elasticsearch-head), 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.\n\n具体操作在项目的 ReadMe 文件中已经描述的很详细了, [查看设置](https://github.com/mobz/elasticsearch-head#running-with-built-in-server)\n\n设置完成后, 打开对应地址可以看到如下结果:\n![](/assets/elasticsearch/elasticsearch_head.png)\n其中 index 和 db_news 是建立的索引\n\n## 安装 Kibana\n下载地址 [https://www.elastic.co/products](https://www.elastic.co/products)\n> 版本要与 elasticsearch 版本对应\n\n* 解压 zip 文件. 开启 elasticsearch 服务后\n* 进入相应 bin 目录, 运行 kibana\n* 访问 localhost://5601 即可\n\n## 安装 elasticsearch-analysis-ik\nGit 地址 [elasticsearch-analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n    ![](/assets/elasticsearch/ik_version.png)\n* 将 zip 解压到新建立的 ik 文件夹下\n    ![](/assets/elasticsearch/ik_detail.png)\n\n## 安装 elasticsearch-analysis-pinyin\nGit 地址 [elasticsearch-analysis-pinyin](https://github.com/medcl/elasticsearch-analysis-pinyin)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n* 将 zip 解压到新建立的 pinyin 文件夹下\n\n安装完成后, 重启 Elasticsearch 服务就可以使用了.\n\n## 使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\n有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理\n\n下载最新版 Maven: [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)\n\n* 解压\n* 配置环境变量 (路径\\bin)\n* 测试 (mvn -v)\n* 进入已经下载的 `elasticsearch-analysis-ik` 文件夹下\n* 运行 mvn package\n* 结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可\n> elasticsearch-analysis-pinyin 操作相同","source":"_posts/elasticsearch-windows-1_install_plugins.md","raw":"---\ntitle: Elasticsearch 5.x.x 在 Windows 下安装配置\ndate: 2017-01-18 11:39:03\ntags: [Elasticsearch,windows]\n---\n# 简介\n关于 Elasticsearch 的介绍可以查看 [Elasticsearch 权威指南](https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details), 讲解的非常详细.\n\n本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置\n\n# 安装\n由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境\n\n* 安装最新版 JAVA, 由 [www.java.com](http://www.java.com/) 下载\n\n    安装目录示例: `C:\\Program Files\\Java`\n\n<!--more-->    \n\n* 配置 JAVA 环境变量\n\n    新建系统变量 JAVA_HOME, 指向 JAVA 安装路径\n    ![](/assets/elasticsearch/java_home.png)\n    编辑系统变量中 Path ,新增 `%JAVA_HOME%\\bin` 或 `%JAVA_HOME%\\jre\\bin`\n    ![](/assets/elasticsearch/path_java_home.png)\n\n* 下载 Elasticsearch 5.x.x 版本 zip 包, 可由 [elasticsearch.org/download](http://www.elasticsearch.org/download/) 下载, 解压到相应目录\n    ![](/assets/elasticsearch/elasticsearch511.png)\n\n* 现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态\n    ![](/assets/elasticsearch/9200status.png)\n\n> 也可以将 elasticsearch 添加为 windows 服务, 随系统启动\n> * 在控制台执行 ealsticsearch-service install 命令即可\n> * 卸载服务命令 ealsticsearch-service remove\n> * 重启服务命令 ealsticsearch-service restart\n\n# 安装插件\n## 安装 elasticsearch-head\nGit 地址 [elasticsearch-head](https://github.com/mobz/elasticsearch-head), 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.\n\n具体操作在项目的 ReadMe 文件中已经描述的很详细了, [查看设置](https://github.com/mobz/elasticsearch-head#running-with-built-in-server)\n\n设置完成后, 打开对应地址可以看到如下结果:\n![](/assets/elasticsearch/elasticsearch_head.png)\n其中 index 和 db_news 是建立的索引\n\n## 安装 Kibana\n下载地址 [https://www.elastic.co/products](https://www.elastic.co/products)\n> 版本要与 elasticsearch 版本对应\n\n* 解压 zip 文件. 开启 elasticsearch 服务后\n* 进入相应 bin 目录, 运行 kibana\n* 访问 localhost://5601 即可\n\n## 安装 elasticsearch-analysis-ik\nGit 地址 [elasticsearch-analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n    ![](/assets/elasticsearch/ik_version.png)\n* 将 zip 解压到新建立的 ik 文件夹下\n    ![](/assets/elasticsearch/ik_detail.png)\n\n## 安装 elasticsearch-analysis-pinyin\nGit 地址 [elasticsearch-analysis-pinyin](https://github.com/medcl/elasticsearch-analysis-pinyin)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n* 将 zip 解压到新建立的 pinyin 文件夹下\n\n安装完成后, 重启 Elasticsearch 服务就可以使用了.\n\n## 使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\n有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理\n\n下载最新版 Maven: [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)\n\n* 解压\n* 配置环境变量 (路径\\bin)\n* 测试 (mvn -v)\n* 进入已经下载的 `elasticsearch-analysis-ik` 文件夹下\n* 运行 mvn package\n* 结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可\n> elasticsearch-analysis-pinyin 操作相同","slug":"elasticsearch-windows-1_install_plugins","published":1,"updated":"2020-01-09T20:21:18.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qm000dbica3cpj0n1y","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>关于 Elasticsearch 的介绍可以查看 <a href=\"https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details\" target=\"_blank\" rel=\"noopener\">Elasticsearch 权威指南</a>, 讲解的非常详细.</p>\n<p>本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境</p>\n<ul>\n<li><p>安装最新版 JAVA, 由 <a href=\"http://www.java.com/\" target=\"_blank\" rel=\"noopener\">www.java.com</a> 下载</p>\n<p>  安装目录示例: <code>C:\\Program Files\\Java</code></p>\n</li>\n</ul>\n<a id=\"more\"></a>    \n\n<ul>\n<li><p>配置 JAVA 环境变量</p>\n<p>  新建系统变量 JAVA_HOME, 指向 JAVA 安装路径<br>  <img src=\"/assets/elasticsearch/java_home.png\" alt><br>  编辑系统变量中 Path ,新增 <code>%JAVA_HOME%\\bin</code> 或 <code>%JAVA_HOME%\\jre\\bin</code><br>  <img src=\"/assets/elasticsearch/path_java_home.png\" alt></p>\n</li>\n<li><p>下载 Elasticsearch 5.x.x 版本 zip 包, 可由 <a href=\"http://www.elasticsearch.org/download/\" target=\"_blank\" rel=\"noopener\">elasticsearch.org/download</a> 下载, 解压到相应目录<br>  <img src=\"/assets/elasticsearch/elasticsearch511.png\" alt></p>\n</li>\n<li><p>现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态<br>  <img src=\"/assets/elasticsearch/9200status.png\" alt></p>\n</li>\n</ul>\n<blockquote>\n<p>也可以将 elasticsearch 添加为 windows 服务, 随系统启动</p>\n<ul>\n<li>在控制台执行 ealsticsearch-service install 命令即可</li>\n<li>卸载服务命令 ealsticsearch-service remove</li>\n<li>重启服务命令 ealsticsearch-service restart</li>\n</ul>\n</blockquote>\n<h1 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h1><h2 id=\"安装-elasticsearch-head\"><a href=\"#安装-elasticsearch-head\" class=\"headerlink\" title=\"安装 elasticsearch-head\"></a>安装 elasticsearch-head</h2><p>Git 地址 <a href=\"https://github.com/mobz/elasticsearch-head\" target=\"_blank\" rel=\"noopener\">elasticsearch-head</a>, 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.</p>\n<p>具体操作在项目的 ReadMe 文件中已经描述的很详细了, <a href=\"https://github.com/mobz/elasticsearch-head#running-with-built-in-server\" target=\"_blank\" rel=\"noopener\">查看设置</a></p>\n<p>设置完成后, 打开对应地址可以看到如下结果:<br><img src=\"/assets/elasticsearch/elasticsearch_head.png\" alt><br>其中 index 和 db_news 是建立的索引</p>\n<h2 id=\"安装-Kibana\"><a href=\"#安装-Kibana\" class=\"headerlink\" title=\"安装 Kibana\"></a>安装 Kibana</h2><p>下载地址 <a href=\"https://www.elastic.co/products\" target=\"_blank\" rel=\"noopener\">https://www.elastic.co/products</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>解压 zip 文件. 开启 elasticsearch 服务后</li>\n<li>进入相应 bin 目录, 运行 kibana</li>\n<li>访问 localhost://5601 即可</li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-ik\"><a href=\"#安装-elasticsearch-analysis-ik\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-ik\"></a>安装 elasticsearch-analysis-ik</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-ik\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-ik</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)<br>  <img src=\"/assets/elasticsearch/ik_version.png\" alt></li>\n<li>将 zip 解压到新建立的 ik 文件夹下<br>  <img src=\"/assets/elasticsearch/ik_detail.png\" alt></li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-pinyin\"><a href=\"#安装-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-pinyin\"></a>安装 elasticsearch-analysis-pinyin</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-pinyin\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-pinyin</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)</li>\n<li>将 zip 解压到新建立的 pinyin 文件夹下</li>\n</ul>\n<p>安装完成后, 重启 Elasticsearch 服务就可以使用了.</p>\n<h2 id=\"使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\"><a href=\"#使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\"></a>使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin</h2><p>有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理</p>\n<p>下载最新版 Maven: <a href=\"http://maven.apache.org/download.cgi\" target=\"_blank\" rel=\"noopener\">http://maven.apache.org/download.cgi</a></p>\n<ul>\n<li>解压</li>\n<li>配置环境变量 (路径\\bin)</li>\n<li>测试 (mvn -v)</li>\n<li>进入已经下载的 <code>elasticsearch-analysis-ik</code> 文件夹下</li>\n<li>运行 mvn package</li>\n<li>结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可<blockquote>\n<p>elasticsearch-analysis-pinyin 操作相同</p>\n</blockquote>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>关于 Elasticsearch 的介绍可以查看 <a href=\"https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details\" target=\"_blank\" rel=\"noopener\">Elasticsearch 权威指南</a>, 讲解的非常详细.</p>\n<p>本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境</p>\n<ul>\n<li><p>安装最新版 JAVA, 由 <a href=\"http://www.java.com/\" target=\"_blank\" rel=\"noopener\">www.java.com</a> 下载</p>\n<p>  安装目录示例: <code>C:\\Program Files\\Java</code></p>\n</li>\n</ul>","more":"<ul>\n<li><p>配置 JAVA 环境变量</p>\n<p>  新建系统变量 JAVA_HOME, 指向 JAVA 安装路径<br>  <img src=\"/assets/elasticsearch/java_home.png\" alt><br>  编辑系统变量中 Path ,新增 <code>%JAVA_HOME%\\bin</code> 或 <code>%JAVA_HOME%\\jre\\bin</code><br>  <img src=\"/assets/elasticsearch/path_java_home.png\" alt></p>\n</li>\n<li><p>下载 Elasticsearch 5.x.x 版本 zip 包, 可由 <a href=\"http://www.elasticsearch.org/download/\" target=\"_blank\" rel=\"noopener\">elasticsearch.org/download</a> 下载, 解压到相应目录<br>  <img src=\"/assets/elasticsearch/elasticsearch511.png\" alt></p>\n</li>\n<li><p>现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态<br>  <img src=\"/assets/elasticsearch/9200status.png\" alt></p>\n</li>\n</ul>\n<blockquote>\n<p>也可以将 elasticsearch 添加为 windows 服务, 随系统启动</p>\n<ul>\n<li>在控制台执行 ealsticsearch-service install 命令即可</li>\n<li>卸载服务命令 ealsticsearch-service remove</li>\n<li>重启服务命令 ealsticsearch-service restart</li>\n</ul>\n</blockquote>\n<h1 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h1><h2 id=\"安装-elasticsearch-head\"><a href=\"#安装-elasticsearch-head\" class=\"headerlink\" title=\"安装 elasticsearch-head\"></a>安装 elasticsearch-head</h2><p>Git 地址 <a href=\"https://github.com/mobz/elasticsearch-head\" target=\"_blank\" rel=\"noopener\">elasticsearch-head</a>, 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.</p>\n<p>具体操作在项目的 ReadMe 文件中已经描述的很详细了, <a href=\"https://github.com/mobz/elasticsearch-head#running-with-built-in-server\" target=\"_blank\" rel=\"noopener\">查看设置</a></p>\n<p>设置完成后, 打开对应地址可以看到如下结果:<br><img src=\"/assets/elasticsearch/elasticsearch_head.png\" alt><br>其中 index 和 db_news 是建立的索引</p>\n<h2 id=\"安装-Kibana\"><a href=\"#安装-Kibana\" class=\"headerlink\" title=\"安装 Kibana\"></a>安装 Kibana</h2><p>下载地址 <a href=\"https://www.elastic.co/products\" target=\"_blank\" rel=\"noopener\">https://www.elastic.co/products</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>解压 zip 文件. 开启 elasticsearch 服务后</li>\n<li>进入相应 bin 目录, 运行 kibana</li>\n<li>访问 localhost://5601 即可</li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-ik\"><a href=\"#安装-elasticsearch-analysis-ik\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-ik\"></a>安装 elasticsearch-analysis-ik</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-ik\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-ik</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)<br>  <img src=\"/assets/elasticsearch/ik_version.png\" alt></li>\n<li>将 zip 解压到新建立的 ik 文件夹下<br>  <img src=\"/assets/elasticsearch/ik_detail.png\" alt></li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-pinyin\"><a href=\"#安装-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-pinyin\"></a>安装 elasticsearch-analysis-pinyin</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-pinyin\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-pinyin</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)</li>\n<li>将 zip 解压到新建立的 pinyin 文件夹下</li>\n</ul>\n<p>安装完成后, 重启 Elasticsearch 服务就可以使用了.</p>\n<h2 id=\"使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\"><a href=\"#使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\"></a>使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin</h2><p>有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理</p>\n<p>下载最新版 Maven: <a href=\"http://maven.apache.org/download.cgi\" target=\"_blank\" rel=\"noopener\">http://maven.apache.org/download.cgi</a></p>\n<ul>\n<li>解压</li>\n<li>配置环境变量 (路径\\bin)</li>\n<li>测试 (mvn -v)</li>\n<li>进入已经下载的 <code>elasticsearch-analysis-ik</code> 文件夹下</li>\n<li>运行 mvn package</li>\n<li>结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可<blockquote>\n<p>elasticsearch-analysis-pinyin 操作相同</p>\n</blockquote>\n</li>\n</ul>"},{"title":"Asynchronous Programming Model (APM)","date":"2016-12-06T02:55:08.000Z","_content":"\n也称为 IAsyncResult 模式, 异步操作需要使用 Begin*OperationName* 和 End*OperationName* 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).\n\n> 从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式. 详见: [Task Parallel Libary (TPL)](https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx) 和 [Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx)\n因此, 不再建议使用此种模式.\n\n<!--more-->\n\n在调用完 **Begin***OperationName* 后, 应用程序可以继续在调用线程上执行其他操作, 同时异步操作在另外一个线程上执行. 每次调用 **Begin***OperationName* 时, 应用程序还应调用 **End***OperationName* 来获取操作的结果.\n\n## 开始一个异步操作\n**Begin***OperationName* 方法开始异步操作 *OperationName*, 并返回实现 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 接口的对象. [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx)存储有关异步操作信息. 异步操作信息如下:\n\n| Member        | Description   |\n| ------------- |:-------------:|\n| [AsyncState](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncstate(v=vs.110).aspx)      | 一个特定于应用程序的可选对象, 其中包含有关异步操作的信息 |\n| [AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx)      | 一个 [WaitHandle](https://msdn.microsoft.com/zh-cn/library/system.threading.waithandle(v=vs.110).aspx), 可用来在异步操作完成之前阻止应用程序执行      |\n| [CompletedSynchronously](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.completedsynchronously(v=vs.110).aspx) | 指示异步操作是否是在用于调用 **Begin***OperationName* 的线程上完成, 而不是在单独的 ThreadPool 线程上完成      |\n| [IsCompleted](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx) | 指示异步操作是否完成      |\n\n**Begin***OperationName* 方法使用该方法同步版本签名中通过值或引用传递的任何参数. 并且不包含任何输出参数. **Begin***OperationName* 方法签名还包含两个附加参数. \n* 第一个参数定义了一个 [AsyncCallback](https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx) 委托, 当异步操作完成时调用委托所引用的方法. 操作完成时, 如果不想调用任何方法, 可以指定为 null.\n* 第二个参数是用户自定义对象, 此对象可用来向异步操作完成时调用的方法传递应用程序特定的状态信息.\n\n如果 **Begin***OperationName* 方法还采用其他一些操作特定的参数 (例如, 一个用于存储从文件读取的字节的字节数组), 则 [AsyncCallback](https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx) 和应用程序状态对象将是 **Begin***OperationName* 方法签名中的最后两个参数\n\n**Begin***OperationName* 立即返回对调用线程 (主线程) 的控制. 如果 **Begin***OperationName* 方法抛出异常, 则会在开始异步操作之前抛出异常, 并且不会调用回调方法.\n\n## 结束异步操作\n**End***OperationName* 方法可结束异步操作 *OperationName*. **End***OperationName* 方法的返回值与其同步对应方法的返回值类型相同, 并且是特定于异步操作的. 例如, EndRead 方法返回从 [FileStream](https://msdn.microsoft.com/zh-cn/library/system.io.filestream(v=vs.110).aspx) 读取的字节数, [EndGetHostByName](https://msdn.microsoft.com/zh-cn/library/system.net.dns.endgethostbyname(v=vs.110).aspx) 方法返回包含有关主机的信息的 [IPHostEntry](https://msdn.microsoft.com/zh-cn/library/system.net.iphostentry(v=vs.110).aspx) 对象. **End***OperationName* 方法采用该方法同步版本的签名中声明的所有输出参数或引用参数. 除了来自同步方法的参数外, **End***OperationName* 方法还包括 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 参数. 调用方必须将对应调用返回的实例传递给 BeginOperationName. \n如果调用 **End***OperationName* 时 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 对象表示的异步操作尚未完成, 则 **End***OperationName* 将在异步操作完成之前阻止调用线程. 异步操作引发的异常是从 **End***OperationName* 方法引发的. 未定义多次使用同一 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 调用 **End***OperationName* 方法的效果. 同样, 也未定义使用不是相关 Begin 方法返回的 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 调用 **End***OperationName* 方法的效果. \n\n> 对于这两种未定义的情况, 实施者应考虑引发 [InvalidOperationException](https://msdn.microsoft.com/zh-cn/library/system.invalidoperationexception(v=vs.110).aspx). \n\n> 此设计模式的实施者应通知调用方异步操作已通过以下步骤完成: 将 [IsCompleted](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx) 设置为 true, 调用异步回调方法 ( 如果已指定一个回调方法 ), 然后发送 [AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx) 信号. \n\n对于访问异步操作的结果, 应用程序开发人员有若干种设计选择. 正确的选择取决于应用程序是否有可以在操作完成时执行的指令. 如果应用程序在接收到异步操作结果之前不能进行任何其他工作, 则必须在获得这些结果之前先阻止该应用程序进行其他工作. 若要在异步操作完成之前阻止应用程序, 可以使用下列方法之一: \n\n* 从应用程序的主线程调用 **End***OperationName*, 阻止应用程序执行, 直到操作完成. 有关演示此方法的示例, 请参阅[Blocking Application Execution by Ending an Async Operation](https://msdn.microsoft.com/zh-cn/library/ms228967(v=vs.110).aspx). \n* 使用 [AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx) 来阻止应用程序执行, 直到一个或多个操作完成. 有关演示此方法的示例, 请参阅[Blocking Application Execution Using an AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/ms228962(v=vs.110).aspx). \n\n在异步操作完成时不需要阻止的应用程序可使用下列方法之一: \n\n* 按以下方式轮询操作完成状态: 定期检查 [IsCompleted](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx) 属性, 并在操作完成后调用 **End***OperationName*. 有关演示此方法的示例, 请参阅[Polling for the Status of an Asynchronous Operation](https://msdn.microsoft.com/zh-cn/library/ms228968(v=vs.110).aspx). \n* 使用 [AsyncCallback](https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx) 委托来指定要在操作完成时调用的方法. 有关演示此方法的示例, 请参阅[Using an AsyncCallback Delegate to End an Asynchronous Operation](https://msdn.microsoft.com/zh-cn/library/ms228972(v=vs.110).aspx). ","source":"_posts/asynchronous_programming_model.md","raw":"---\ntitle: Asynchronous Programming Model (APM)\ndate: 2016-12-06 10:55:08\ntags: [IAsyncResult, async, .net]\n---\n\n也称为 IAsyncResult 模式, 异步操作需要使用 Begin*OperationName* 和 End*OperationName* 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).\n\n> 从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式. 详见: [Task Parallel Libary (TPL)](https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx) 和 [Task-based Asynchronous Pattern (TAP)](https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx)\n因此, 不再建议使用此种模式.\n\n<!--more-->\n\n在调用完 **Begin***OperationName* 后, 应用程序可以继续在调用线程上执行其他操作, 同时异步操作在另外一个线程上执行. 每次调用 **Begin***OperationName* 时, 应用程序还应调用 **End***OperationName* 来获取操作的结果.\n\n## 开始一个异步操作\n**Begin***OperationName* 方法开始异步操作 *OperationName*, 并返回实现 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 接口的对象. [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx)存储有关异步操作信息. 异步操作信息如下:\n\n| Member        | Description   |\n| ------------- |:-------------:|\n| [AsyncState](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncstate(v=vs.110).aspx)      | 一个特定于应用程序的可选对象, 其中包含有关异步操作的信息 |\n| [AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx)      | 一个 [WaitHandle](https://msdn.microsoft.com/zh-cn/library/system.threading.waithandle(v=vs.110).aspx), 可用来在异步操作完成之前阻止应用程序执行      |\n| [CompletedSynchronously](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.completedsynchronously(v=vs.110).aspx) | 指示异步操作是否是在用于调用 **Begin***OperationName* 的线程上完成, 而不是在单独的 ThreadPool 线程上完成      |\n| [IsCompleted](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx) | 指示异步操作是否完成      |\n\n**Begin***OperationName* 方法使用该方法同步版本签名中通过值或引用传递的任何参数. 并且不包含任何输出参数. **Begin***OperationName* 方法签名还包含两个附加参数. \n* 第一个参数定义了一个 [AsyncCallback](https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx) 委托, 当异步操作完成时调用委托所引用的方法. 操作完成时, 如果不想调用任何方法, 可以指定为 null.\n* 第二个参数是用户自定义对象, 此对象可用来向异步操作完成时调用的方法传递应用程序特定的状态信息.\n\n如果 **Begin***OperationName* 方法还采用其他一些操作特定的参数 (例如, 一个用于存储从文件读取的字节的字节数组), 则 [AsyncCallback](https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx) 和应用程序状态对象将是 **Begin***OperationName* 方法签名中的最后两个参数\n\n**Begin***OperationName* 立即返回对调用线程 (主线程) 的控制. 如果 **Begin***OperationName* 方法抛出异常, 则会在开始异步操作之前抛出异常, 并且不会调用回调方法.\n\n## 结束异步操作\n**End***OperationName* 方法可结束异步操作 *OperationName*. **End***OperationName* 方法的返回值与其同步对应方法的返回值类型相同, 并且是特定于异步操作的. 例如, EndRead 方法返回从 [FileStream](https://msdn.microsoft.com/zh-cn/library/system.io.filestream(v=vs.110).aspx) 读取的字节数, [EndGetHostByName](https://msdn.microsoft.com/zh-cn/library/system.net.dns.endgethostbyname(v=vs.110).aspx) 方法返回包含有关主机的信息的 [IPHostEntry](https://msdn.microsoft.com/zh-cn/library/system.net.iphostentry(v=vs.110).aspx) 对象. **End***OperationName* 方法采用该方法同步版本的签名中声明的所有输出参数或引用参数. 除了来自同步方法的参数外, **End***OperationName* 方法还包括 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 参数. 调用方必须将对应调用返回的实例传递给 BeginOperationName. \n如果调用 **End***OperationName* 时 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 对象表示的异步操作尚未完成, 则 **End***OperationName* 将在异步操作完成之前阻止调用线程. 异步操作引发的异常是从 **End***OperationName* 方法引发的. 未定义多次使用同一 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 调用 **End***OperationName* 方法的效果. 同样, 也未定义使用不是相关 Begin 方法返回的 [IAsyncResult](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx) 调用 **End***OperationName* 方法的效果. \n\n> 对于这两种未定义的情况, 实施者应考虑引发 [InvalidOperationException](https://msdn.microsoft.com/zh-cn/library/system.invalidoperationexception(v=vs.110).aspx). \n\n> 此设计模式的实施者应通知调用方异步操作已通过以下步骤完成: 将 [IsCompleted](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx) 设置为 true, 调用异步回调方法 ( 如果已指定一个回调方法 ), 然后发送 [AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx) 信号. \n\n对于访问异步操作的结果, 应用程序开发人员有若干种设计选择. 正确的选择取决于应用程序是否有可以在操作完成时执行的指令. 如果应用程序在接收到异步操作结果之前不能进行任何其他工作, 则必须在获得这些结果之前先阻止该应用程序进行其他工作. 若要在异步操作完成之前阻止应用程序, 可以使用下列方法之一: \n\n* 从应用程序的主线程调用 **End***OperationName*, 阻止应用程序执行, 直到操作完成. 有关演示此方法的示例, 请参阅[Blocking Application Execution by Ending an Async Operation](https://msdn.microsoft.com/zh-cn/library/ms228967(v=vs.110).aspx). \n* 使用 [AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx) 来阻止应用程序执行, 直到一个或多个操作完成. 有关演示此方法的示例, 请参阅[Blocking Application Execution Using an AsyncWaitHandle](https://msdn.microsoft.com/zh-cn/library/ms228962(v=vs.110).aspx). \n\n在异步操作完成时不需要阻止的应用程序可使用下列方法之一: \n\n* 按以下方式轮询操作完成状态: 定期检查 [IsCompleted](https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx) 属性, 并在操作完成后调用 **End***OperationName*. 有关演示此方法的示例, 请参阅[Polling for the Status of an Asynchronous Operation](https://msdn.microsoft.com/zh-cn/library/ms228968(v=vs.110).aspx). \n* 使用 [AsyncCallback](https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx) 委托来指定要在操作完成时调用的方法. 有关演示此方法的示例, 请参阅[Using an AsyncCallback Delegate to End an Asynchronous Operation](https://msdn.microsoft.com/zh-cn/library/ms228972(v=vs.110).aspx). ","slug":"asynchronous_programming_model","published":1,"updated":"2020-01-09T20:21:18.090Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qn000fbicahsy4pzyk","content":"<p>也称为 IAsyncResult 模式, 异步操作需要使用 Begin<em>OperationName</em> 和 End<em>OperationName</em> 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).</p>\n<blockquote>\n<p>从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式. 详见: <a href=\"https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task Parallel Libary (TPL)</a> 和 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a><br>因此, 不再建议使用此种模式.</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<p>在调用完 <strong>Begin*</strong>OperationName* 后, 应用程序可以继续在调用线程上执行其他操作, 同时异步操作在另外一个线程上执行. 每次调用 <strong>Begin*</strong>OperationName* 时, 应用程序还应调用 <strong>End*</strong>OperationName* 来获取操作的结果.</p>\n<h2 id=\"开始一个异步操作\"><a href=\"#开始一个异步操作\" class=\"headerlink\" title=\"开始一个异步操作\"></a>开始一个异步操作</h2><p><strong>Begin*</strong>OperationName* 方法开始异步操作 <em>OperationName</em>, 并返回实现 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 接口的对象. <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a>存储有关异步操作信息. 异步操作信息如下:</p>\n<table>\n<thead>\n<tr>\n<th>Member</th>\n<th align=\"center\">Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncstate(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncState</a></td>\n<td align=\"center\">一个特定于应用程序的可选对象, 其中包含有关异步操作的信息</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncWaitHandle</a></td>\n<td align=\"center\">一个 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.threading.waithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">WaitHandle</a>, 可用来在异步操作完成之前阻止应用程序执行</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.completedsynchronously(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">CompletedSynchronously</a></td>\n<td align=\"center\">指示异步操作是否是在用于调用 <strong>Begin*</strong>OperationName* 的线程上完成, 而不是在单独的 ThreadPool 线程上完成</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IsCompleted</a></td>\n<td align=\"center\">指示异步操作是否完成</td>\n</tr>\n</tbody></table>\n<p><strong>Begin*</strong>OperationName* 方法使用该方法同步版本签名中通过值或引用传递的任何参数. 并且不包含任何输出参数. <strong>Begin*</strong>OperationName* 方法签名还包含两个附加参数. </p>\n<ul>\n<li>第一个参数定义了一个 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncCallback</a> 委托, 当异步操作完成时调用委托所引用的方法. 操作完成时, 如果不想调用任何方法, 可以指定为 null.</li>\n<li>第二个参数是用户自定义对象, 此对象可用来向异步操作完成时调用的方法传递应用程序特定的状态信息.</li>\n</ul>\n<p>如果 <strong>Begin*</strong>OperationName* 方法还采用其他一些操作特定的参数 (例如, 一个用于存储从文件读取的字节的字节数组), 则 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncCallback</a> 和应用程序状态对象将是 <strong>Begin*</strong>OperationName* 方法签名中的最后两个参数</p>\n<p><strong>Begin*</strong>OperationName* 立即返回对调用线程 (主线程) 的控制. 如果 <strong>Begin*</strong>OperationName* 方法抛出异常, 则会在开始异步操作之前抛出异常, 并且不会调用回调方法.</p>\n<h2 id=\"结束异步操作\"><a href=\"#结束异步操作\" class=\"headerlink\" title=\"结束异步操作\"></a>结束异步操作</h2><p><strong>End*</strong>OperationName* 方法可结束异步操作 <em>OperationName</em>. <strong>End*</strong>OperationName* 方法的返回值与其同步对应方法的返回值类型相同, 并且是特定于异步操作的. 例如, EndRead 方法返回从 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.io.filestream(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">FileStream</a> 读取的字节数, <a href=\"https://msdn.microsoft.com/zh-cn/library/system.net.dns.endgethostbyname(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">EndGetHostByName</a> 方法返回包含有关主机的信息的 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.net.iphostentry(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IPHostEntry</a> 对象. <strong>End*</strong>OperationName* 方法采用该方法同步版本的签名中声明的所有输出参数或引用参数. 除了来自同步方法的参数外, <strong>End*</strong>OperationName* 方法还包括 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 参数. 调用方必须将对应调用返回的实例传递给 BeginOperationName.<br>如果调用 <strong>End*</strong>OperationName* 时 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 对象表示的异步操作尚未完成, 则 <strong>End*</strong>OperationName* 将在异步操作完成之前阻止调用线程. 异步操作引发的异常是从 <strong>End*</strong>OperationName* 方法引发的. 未定义多次使用同一 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 调用 <strong>End*</strong>OperationName* 方法的效果. 同样, 也未定义使用不是相关 Begin 方法返回的 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 调用 <strong>End*</strong>OperationName* 方法的效果. </p>\n<blockquote>\n<p>对于这两种未定义的情况, 实施者应考虑引发 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.invalidoperationexception(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">InvalidOperationException</a>. </p>\n</blockquote>\n<blockquote>\n<p>此设计模式的实施者应通知调用方异步操作已通过以下步骤完成: 将 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IsCompleted</a> 设置为 true, 调用异步回调方法 ( 如果已指定一个回调方法 ), 然后发送 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncWaitHandle</a> 信号. </p>\n</blockquote>\n<p>对于访问异步操作的结果, 应用程序开发人员有若干种设计选择. 正确的选择取决于应用程序是否有可以在操作完成时执行的指令. 如果应用程序在接收到异步操作结果之前不能进行任何其他工作, 则必须在获得这些结果之前先阻止该应用程序进行其他工作. 若要在异步操作完成之前阻止应用程序, 可以使用下列方法之一: </p>\n<ul>\n<li>从应用程序的主线程调用 <strong>End*</strong>OperationName*, 阻止应用程序执行, 直到操作完成. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228967(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Blocking Application Execution by Ending an Async Operation</a>. </li>\n<li>使用 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncWaitHandle</a> 来阻止应用程序执行, 直到一个或多个操作完成. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228962(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Blocking Application Execution Using an AsyncWaitHandle</a>. </li>\n</ul>\n<p>在异步操作完成时不需要阻止的应用程序可使用下列方法之一: </p>\n<ul>\n<li>按以下方式轮询操作完成状态: 定期检查 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IsCompleted</a> 属性, 并在操作完成后调用 <strong>End*</strong>OperationName*. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228968(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Polling for the Status of an Asynchronous Operation</a>. </li>\n<li>使用 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncCallback</a> 委托来指定要在操作完成时调用的方法. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228972(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Using an AsyncCallback Delegate to End an Asynchronous Operation</a>. </li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>也称为 IAsyncResult 模式, 异步操作需要使用 Begin<em>OperationName</em> 和 End<em>OperationName</em> 方法. (例如, FileStream类提供了BeginRead 和 EndRead (Read方法的异步版本) 方法来异步读取字节).</p>\n<blockquote>\n<p>从 .NET Framework 4.0 开始, 任务并行库为异步和并行编程提供了新的模式. 详见: <a href=\"https://msdn.microsoft.com/zh-cn/library/dd460717(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task Parallel Libary (TPL)</a> 和 <a href=\"https://msdn.microsoft.com/zh-cn/library/hh873175(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Task-based Asynchronous Pattern (TAP)</a><br>因此, 不再建议使用此种模式.</p>\n</blockquote>","more":"<p>在调用完 <strong>Begin*</strong>OperationName* 后, 应用程序可以继续在调用线程上执行其他操作, 同时异步操作在另外一个线程上执行. 每次调用 <strong>Begin*</strong>OperationName* 时, 应用程序还应调用 <strong>End*</strong>OperationName* 来获取操作的结果.</p>\n<h2 id=\"开始一个异步操作\"><a href=\"#开始一个异步操作\" class=\"headerlink\" title=\"开始一个异步操作\"></a>开始一个异步操作</h2><p><strong>Begin*</strong>OperationName* 方法开始异步操作 <em>OperationName</em>, 并返回实现 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 接口的对象. <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a>存储有关异步操作信息. 异步操作信息如下:</p>\n<table>\n<thead>\n<tr>\n<th>Member</th>\n<th align=\"center\">Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncstate(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncState</a></td>\n<td align=\"center\">一个特定于应用程序的可选对象, 其中包含有关异步操作的信息</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncWaitHandle</a></td>\n<td align=\"center\">一个 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.threading.waithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">WaitHandle</a>, 可用来在异步操作完成之前阻止应用程序执行</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.completedsynchronously(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">CompletedSynchronously</a></td>\n<td align=\"center\">指示异步操作是否是在用于调用 <strong>Begin*</strong>OperationName* 的线程上完成, 而不是在单独的 ThreadPool 线程上完成</td>\n</tr>\n<tr>\n<td><a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IsCompleted</a></td>\n<td align=\"center\">指示异步操作是否完成</td>\n</tr>\n</tbody></table>\n<p><strong>Begin*</strong>OperationName* 方法使用该方法同步版本签名中通过值或引用传递的任何参数. 并且不包含任何输出参数. <strong>Begin*</strong>OperationName* 方法签名还包含两个附加参数. </p>\n<ul>\n<li>第一个参数定义了一个 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncCallback</a> 委托, 当异步操作完成时调用委托所引用的方法. 操作完成时, 如果不想调用任何方法, 可以指定为 null.</li>\n<li>第二个参数是用户自定义对象, 此对象可用来向异步操作完成时调用的方法传递应用程序特定的状态信息.</li>\n</ul>\n<p>如果 <strong>Begin*</strong>OperationName* 方法还采用其他一些操作特定的参数 (例如, 一个用于存储从文件读取的字节的字节数组), 则 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncCallback</a> 和应用程序状态对象将是 <strong>Begin*</strong>OperationName* 方法签名中的最后两个参数</p>\n<p><strong>Begin*</strong>OperationName* 立即返回对调用线程 (主线程) 的控制. 如果 <strong>Begin*</strong>OperationName* 方法抛出异常, 则会在开始异步操作之前抛出异常, 并且不会调用回调方法.</p>\n<h2 id=\"结束异步操作\"><a href=\"#结束异步操作\" class=\"headerlink\" title=\"结束异步操作\"></a>结束异步操作</h2><p><strong>End*</strong>OperationName* 方法可结束异步操作 <em>OperationName</em>. <strong>End*</strong>OperationName* 方法的返回值与其同步对应方法的返回值类型相同, 并且是特定于异步操作的. 例如, EndRead 方法返回从 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.io.filestream(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">FileStream</a> 读取的字节数, <a href=\"https://msdn.microsoft.com/zh-cn/library/system.net.dns.endgethostbyname(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">EndGetHostByName</a> 方法返回包含有关主机的信息的 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.net.iphostentry(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IPHostEntry</a> 对象. <strong>End*</strong>OperationName* 方法采用该方法同步版本的签名中声明的所有输出参数或引用参数. 除了来自同步方法的参数外, <strong>End*</strong>OperationName* 方法还包括 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 参数. 调用方必须将对应调用返回的实例传递给 BeginOperationName.<br>如果调用 <strong>End*</strong>OperationName* 时 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 对象表示的异步操作尚未完成, 则 <strong>End*</strong>OperationName* 将在异步操作完成之前阻止调用线程. 异步操作引发的异常是从 <strong>End*</strong>OperationName* 方法引发的. 未定义多次使用同一 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 调用 <strong>End*</strong>OperationName* 方法的效果. 同样, 也未定义使用不是相关 Begin 方法返回的 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IAsyncResult</a> 调用 <strong>End*</strong>OperationName* 方法的效果. </p>\n<blockquote>\n<p>对于这两种未定义的情况, 实施者应考虑引发 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.invalidoperationexception(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">InvalidOperationException</a>. </p>\n</blockquote>\n<blockquote>\n<p>此设计模式的实施者应通知调用方异步操作已通过以下步骤完成: 将 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IsCompleted</a> 设置为 true, 调用异步回调方法 ( 如果已指定一个回调方法 ), 然后发送 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncWaitHandle</a> 信号. </p>\n</blockquote>\n<p>对于访问异步操作的结果, 应用程序开发人员有若干种设计选择. 正确的选择取决于应用程序是否有可以在操作完成时执行的指令. 如果应用程序在接收到异步操作结果之前不能进行任何其他工作, 则必须在获得这些结果之前先阻止该应用程序进行其他工作. 若要在异步操作完成之前阻止应用程序, 可以使用下列方法之一: </p>\n<ul>\n<li>从应用程序的主线程调用 <strong>End*</strong>OperationName*, 阻止应用程序执行, 直到操作完成. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228967(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Blocking Application Execution by Ending an Async Operation</a>. </li>\n<li>使用 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.asyncwaithandle(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncWaitHandle</a> 来阻止应用程序执行, 直到一个或多个操作完成. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228962(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Blocking Application Execution Using an AsyncWaitHandle</a>. </li>\n</ul>\n<p>在异步操作完成时不需要阻止的应用程序可使用下列方法之一: </p>\n<ul>\n<li>按以下方式轮询操作完成状态: 定期检查 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.iasyncresult.iscompleted(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">IsCompleted</a> 属性, 并在操作完成后调用 <strong>End*</strong>OperationName*. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228968(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Polling for the Status of an Asynchronous Operation</a>. </li>\n<li>使用 <a href=\"https://msdn.microsoft.com/zh-cn/library/system.asynccallback(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">AsyncCallback</a> 委托来指定要在操作完成时调用的方法. 有关演示此方法的示例, 请参阅<a href=\"https://msdn.microsoft.com/zh-cn/library/ms228972(v=vs.110).aspx\" target=\"_blank\" rel=\"noopener\">Using an AsyncCallback Delegate to End an Asynchronous Operation</a>. </li>\n</ul>"},{"title":"Elasticsearch 5.x.x 在 Windows 下基本使用","date":"2017-03-27T04:35:03.000Z","_content":"","source":"_posts/elasticsearch-windows-2_basic_usage.md","raw":"---\ntitle: Elasticsearch 5.x.x 在 Windows 下基本使用\ndate: 2017-03-27 12:35:03\ntags: [Elasticsearch,windows]\n---","slug":"elasticsearch-windows-2_basic_usage","published":1,"updated":"2020-01-09T20:21:18.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qo000hbicabw2n17u0","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Elasticsearch 5.x.x 在 Windows 下安装配置","date":"2017-01-18T03:39:03.000Z","_content":"# 简介\n关于 Elasticsearch 的介绍可以查看 [Elasticsearch 权威指南](https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details), 讲解的非常详细.\n\n本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置\n\n# 安装\n由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境\n\n* 安装最新版 JAVA, 由 [www.java.com](http://www.java.com/) 下载\n\n    安装目录示例: `C:\\Program Files\\Java`\n\n<!--more-->    \n\n* 配置 JAVA 环境变量\n\n    新建系统变量 JAVA_HOME, 指向 JAVA 安装路径\n    ![](/assets/elasticsearch/java_home.png)\n    编辑系统变量中 Path ,新增 `%JAVA_HOME%\\bin` 或 `%JAVA_HOME%\\jre\\bin`\n    ![](/assets/elasticsearch/path_java_home.png)\n\n* 下载 Elasticsearch 5.x.x 版本 zip 包, 可由 [elasticsearch.org/download](http://www.elasticsearch.org/download/) 下载, 解压到相应目录\n    ![](/assets/elasticsearch/elasticsearch511.png)\n\n* 现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态\n    ![](/assets/elasticsearch/9200status.png)\n\n> 也可以将 elasticsearch 添加为 windows 服务, 随系统启动\n> * 在控制台执行 ealsticsearch-service install 命令即可\n> * 卸载服务命令 ealsticsearch-service remove\n> * 重启服务命令 ealsticsearch-service restart\n\n# 安装插件\n## 安装 elasticsearch-head\nGit 地址 [elasticsearch-head](https://github.com/mobz/elasticsearch-head), 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.\n\n具体操作在项目的 ReadMe 文件中已经描述的很详细了, [查看设置](https://github.com/mobz/elasticsearch-head#running-with-built-in-server)\n\n设置完成后, 打开对应地址可以看到如下结果:\n![](/assets/elasticsearch/elasticsearch_head.png)\n其中 index 和 db_news 是建立的索引\n\n## 安装 Kibana\n下载地址 [https://www.elastic.co/products](https://www.elastic.co/products)\n> 版本要与 elasticsearch 版本对应\n\n* 解压 zip 文件. 开启 elasticsearch 服务后\n* 进入相应 bin 目录, 运行 kibana\n* 访问 localhost://5601 即可\n\n## 安装 elasticsearch-analysis-ik\nGit 地址 [elasticsearch-analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n    ![](/assets/elasticsearch/ik_version.png)\n* 将 zip 解压到新建立的 ik 文件夹下\n    ![](/assets/elasticsearch/ik_detail.png)\n\n## 安装 elasticsearch-analysis-pinyin\nGit 地址 [elasticsearch-analysis-pinyin](https://github.com/medcl/elasticsearch-analysis-pinyin)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n* 将 zip 解压到新建立的 pinyin 文件夹下\n\n安装完成后, 重启 Elasticsearch 服务就可以使用了.\n\n## 使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\n有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理\n\n下载最新版 Maven: [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)\n\n* 解压\n* 配置环境变量 (路径\\bin)\n* 测试 (mvn -v)\n* 进入已经下载的 `elasticsearch-analysis-ik` 文件夹下\n* 运行 mvn package\n* 结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可\n> elasticsearch-analysis-pinyin 操作相同","source":"_posts/elasticsearch-windows-5.1.1.md","raw":"---\ntitle: Elasticsearch 5.x.x 在 Windows 下安装配置\ndate: 2017-01-18 11:39:03\ntags: [Elasticsearch,windows]\ncategories: [Elasticsearch]\n---\n# 简介\n关于 Elasticsearch 的介绍可以查看 [Elasticsearch 权威指南](https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details), 讲解的非常详细.\n\n本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置\n\n# 安装\n由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境\n\n* 安装最新版 JAVA, 由 [www.java.com](http://www.java.com/) 下载\n\n    安装目录示例: `C:\\Program Files\\Java`\n\n<!--more-->    \n\n* 配置 JAVA 环境变量\n\n    新建系统变量 JAVA_HOME, 指向 JAVA 安装路径\n    ![](/assets/elasticsearch/java_home.png)\n    编辑系统变量中 Path ,新增 `%JAVA_HOME%\\bin` 或 `%JAVA_HOME%\\jre\\bin`\n    ![](/assets/elasticsearch/path_java_home.png)\n\n* 下载 Elasticsearch 5.x.x 版本 zip 包, 可由 [elasticsearch.org/download](http://www.elasticsearch.org/download/) 下载, 解压到相应目录\n    ![](/assets/elasticsearch/elasticsearch511.png)\n\n* 现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态\n    ![](/assets/elasticsearch/9200status.png)\n\n> 也可以将 elasticsearch 添加为 windows 服务, 随系统启动\n> * 在控制台执行 ealsticsearch-service install 命令即可\n> * 卸载服务命令 ealsticsearch-service remove\n> * 重启服务命令 ealsticsearch-service restart\n\n# 安装插件\n## 安装 elasticsearch-head\nGit 地址 [elasticsearch-head](https://github.com/mobz/elasticsearch-head), 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.\n\n具体操作在项目的 ReadMe 文件中已经描述的很详细了, [查看设置](https://github.com/mobz/elasticsearch-head#running-with-built-in-server)\n\n设置完成后, 打开对应地址可以看到如下结果:\n![](/assets/elasticsearch/elasticsearch_head.png)\n其中 index 和 db_news 是建立的索引\n\n## 安装 Kibana\n下载地址 [https://www.elastic.co/products](https://www.elastic.co/products)\n> 版本要与 elasticsearch 版本对应\n\n* 解压 zip 文件. 开启 elasticsearch 服务后\n* 进入相应 bin 目录, 运行 kibana\n* 访问 localhost://5601 即可\n\n## 安装 elasticsearch-analysis-ik\nGit 地址 [elasticsearch-analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n    ![](/assets/elasticsearch/ik_version.png)\n* 将 zip 解压到新建立的 ik 文件夹下\n    ![](/assets/elasticsearch/ik_detail.png)\n\n## 安装 elasticsearch-analysis-pinyin\nGit 地址 [elasticsearch-analysis-pinyin](https://github.com/medcl/elasticsearch-analysis-pinyin)\n> 版本要与 elasticsearch 版本对应\n\n* 在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹\n* 根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)\n* 将 zip 解压到新建立的 pinyin 文件夹下\n\n安装完成后, 重启 Elasticsearch 服务就可以使用了.\n\n## 使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\n有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理\n\n下载最新版 Maven: [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)\n\n* 解压\n* 配置环境变量 (路径\\bin)\n* 测试 (mvn -v)\n* 进入已经下载的 `elasticsearch-analysis-ik` 文件夹下\n* 运行 mvn package\n* 结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可\n> elasticsearch-analysis-pinyin 操作相同","slug":"elasticsearch-windows-5.1.1","published":1,"updated":"2020-01-09T20:21:18.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qq000jbicacmlpsrce","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>关于 Elasticsearch 的介绍可以查看 <a href=\"https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details\" target=\"_blank\" rel=\"noopener\">Elasticsearch 权威指南</a>, 讲解的非常详细.</p>\n<p>本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境</p>\n<ul>\n<li><p>安装最新版 JAVA, 由 <a href=\"http://www.java.com/\" target=\"_blank\" rel=\"noopener\">www.java.com</a> 下载</p>\n<p>  安装目录示例: <code>C:\\Program Files\\Java</code></p>\n</li>\n</ul>\n<a id=\"more\"></a>    \n\n<ul>\n<li><p>配置 JAVA 环境变量</p>\n<p>  新建系统变量 JAVA_HOME, 指向 JAVA 安装路径<br>  <img src=\"/assets/elasticsearch/java_home.png\" alt><br>  编辑系统变量中 Path ,新增 <code>%JAVA_HOME%\\bin</code> 或 <code>%JAVA_HOME%\\jre\\bin</code><br>  <img src=\"/assets/elasticsearch/path_java_home.png\" alt></p>\n</li>\n<li><p>下载 Elasticsearch 5.x.x 版本 zip 包, 可由 <a href=\"http://www.elasticsearch.org/download/\" target=\"_blank\" rel=\"noopener\">elasticsearch.org/download</a> 下载, 解压到相应目录<br>  <img src=\"/assets/elasticsearch/elasticsearch511.png\" alt></p>\n</li>\n<li><p>现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态<br>  <img src=\"/assets/elasticsearch/9200status.png\" alt></p>\n</li>\n</ul>\n<blockquote>\n<p>也可以将 elasticsearch 添加为 windows 服务, 随系统启动</p>\n<ul>\n<li>在控制台执行 ealsticsearch-service install 命令即可</li>\n<li>卸载服务命令 ealsticsearch-service remove</li>\n<li>重启服务命令 ealsticsearch-service restart</li>\n</ul>\n</blockquote>\n<h1 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h1><h2 id=\"安装-elasticsearch-head\"><a href=\"#安装-elasticsearch-head\" class=\"headerlink\" title=\"安装 elasticsearch-head\"></a>安装 elasticsearch-head</h2><p>Git 地址 <a href=\"https://github.com/mobz/elasticsearch-head\" target=\"_blank\" rel=\"noopener\">elasticsearch-head</a>, 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.</p>\n<p>具体操作在项目的 ReadMe 文件中已经描述的很详细了, <a href=\"https://github.com/mobz/elasticsearch-head#running-with-built-in-server\" target=\"_blank\" rel=\"noopener\">查看设置</a></p>\n<p>设置完成后, 打开对应地址可以看到如下结果:<br><img src=\"/assets/elasticsearch/elasticsearch_head.png\" alt><br>其中 index 和 db_news 是建立的索引</p>\n<h2 id=\"安装-Kibana\"><a href=\"#安装-Kibana\" class=\"headerlink\" title=\"安装 Kibana\"></a>安装 Kibana</h2><p>下载地址 <a href=\"https://www.elastic.co/products\" target=\"_blank\" rel=\"noopener\">https://www.elastic.co/products</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>解压 zip 文件. 开启 elasticsearch 服务后</li>\n<li>进入相应 bin 目录, 运行 kibana</li>\n<li>访问 localhost://5601 即可</li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-ik\"><a href=\"#安装-elasticsearch-analysis-ik\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-ik\"></a>安装 elasticsearch-analysis-ik</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-ik\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-ik</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)<br>  <img src=\"/assets/elasticsearch/ik_version.png\" alt></li>\n<li>将 zip 解压到新建立的 ik 文件夹下<br>  <img src=\"/assets/elasticsearch/ik_detail.png\" alt></li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-pinyin\"><a href=\"#安装-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-pinyin\"></a>安装 elasticsearch-analysis-pinyin</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-pinyin\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-pinyin</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)</li>\n<li>将 zip 解压到新建立的 pinyin 文件夹下</li>\n</ul>\n<p>安装完成后, 重启 Elasticsearch 服务就可以使用了.</p>\n<h2 id=\"使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\"><a href=\"#使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\"></a>使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin</h2><p>有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理</p>\n<p>下载最新版 Maven: <a href=\"http://maven.apache.org/download.cgi\" target=\"_blank\" rel=\"noopener\">http://maven.apache.org/download.cgi</a></p>\n<ul>\n<li>解压</li>\n<li>配置环境变量 (路径\\bin)</li>\n<li>测试 (mvn -v)</li>\n<li>进入已经下载的 <code>elasticsearch-analysis-ik</code> 文件夹下</li>\n<li>运行 mvn package</li>\n<li>结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可<blockquote>\n<p>elasticsearch-analysis-pinyin 操作相同</p>\n</blockquote>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>关于 Elasticsearch 的介绍可以查看 <a href=\"https://www.gitbook.com/book/fuxiaopang/learnelasticsearch/details\" target=\"_blank\" rel=\"noopener\">Elasticsearch 权威指南</a>, 讲解的非常详细.</p>\n<p>本文主要讲解, Elasticsearch 5.x.x 版本在 Windows 环境下的安装和中文分词插件配置</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>由于 Elasticsearch 是基于 Lucene 的, 所以要依赖 Java 环境</p>\n<ul>\n<li><p>安装最新版 JAVA, 由 <a href=\"http://www.java.com/\" target=\"_blank\" rel=\"noopener\">www.java.com</a> 下载</p>\n<p>  安装目录示例: <code>C:\\Program Files\\Java</code></p>\n</li>\n</ul>","more":"<ul>\n<li><p>配置 JAVA 环境变量</p>\n<p>  新建系统变量 JAVA_HOME, 指向 JAVA 安装路径<br>  <img src=\"/assets/elasticsearch/java_home.png\" alt><br>  编辑系统变量中 Path ,新增 <code>%JAVA_HOME%\\bin</code> 或 <code>%JAVA_HOME%\\jre\\bin</code><br>  <img src=\"/assets/elasticsearch/path_java_home.png\" alt></p>\n</li>\n<li><p>下载 Elasticsearch 5.x.x 版本 zip 包, 可由 <a href=\"http://www.elasticsearch.org/download/\" target=\"_blank\" rel=\"noopener\">elasticsearch.org/download</a> 下载, 解压到相应目录<br>  <img src=\"/assets/elasticsearch/elasticsearch511.png\" alt></p>\n</li>\n<li><p>现在可直接在控制台运行 elasticsearch.bat, 就已经启动了 elasticsearch 服务, 可在浏览器中输入 localhost:9200 查看状态<br>  <img src=\"/assets/elasticsearch/9200status.png\" alt></p>\n</li>\n</ul>\n<blockquote>\n<p>也可以将 elasticsearch 添加为 windows 服务, 随系统启动</p>\n<ul>\n<li>在控制台执行 ealsticsearch-service install 命令即可</li>\n<li>卸载服务命令 ealsticsearch-service remove</li>\n<li>重启服务命令 ealsticsearch-service restart</li>\n</ul>\n</blockquote>\n<h1 id=\"安装插件\"><a href=\"#安装插件\" class=\"headerlink\" title=\"安装插件\"></a>安装插件</h1><h2 id=\"安装-elasticsearch-head\"><a href=\"#安装-elasticsearch-head\" class=\"headerlink\" title=\"安装 elasticsearch-head\"></a>安装 elasticsearch-head</h2><p>Git 地址 <a href=\"https://github.com/mobz/elasticsearch-head\" target=\"_blank\" rel=\"noopener\">elasticsearch-head</a>, 对于 Elasticsearch 5.x, elasticsearch-head 不再以插件的方式集成到 Elasticsearch 中, 而是作为独立的服务.</p>\n<p>具体操作在项目的 ReadMe 文件中已经描述的很详细了, <a href=\"https://github.com/mobz/elasticsearch-head#running-with-built-in-server\" target=\"_blank\" rel=\"noopener\">查看设置</a></p>\n<p>设置完成后, 打开对应地址可以看到如下结果:<br><img src=\"/assets/elasticsearch/elasticsearch_head.png\" alt><br>其中 index 和 db_news 是建立的索引</p>\n<h2 id=\"安装-Kibana\"><a href=\"#安装-Kibana\" class=\"headerlink\" title=\"安装 Kibana\"></a>安装 Kibana</h2><p>下载地址 <a href=\"https://www.elastic.co/products\" target=\"_blank\" rel=\"noopener\">https://www.elastic.co/products</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>解压 zip 文件. 开启 elasticsearch 服务后</li>\n<li>进入相应 bin 目录, 运行 kibana</li>\n<li>访问 localhost://5601 即可</li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-ik\"><a href=\"#安装-elasticsearch-analysis-ik\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-ik\"></a>安装 elasticsearch-analysis-ik</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-ik\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-ik</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 ik 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)<br>  <img src=\"/assets/elasticsearch/ik_version.png\" alt></li>\n<li>将 zip 解压到新建立的 ik 文件夹下<br>  <img src=\"/assets/elasticsearch/ik_detail.png\" alt></li>\n</ul>\n<h2 id=\"安装-elasticsearch-analysis-pinyin\"><a href=\"#安装-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"安装 elasticsearch-analysis-pinyin\"></a>安装 elasticsearch-analysis-pinyin</h2><p>Git 地址 <a href=\"https://github.com/medcl/elasticsearch-analysis-pinyin\" target=\"_blank\" rel=\"noopener\">elasticsearch-analysis-pinyin</a></p>\n<blockquote>\n<p>版本要与 elasticsearch 版本对应</p>\n</blockquote>\n<ul>\n<li>在 Elasticsearch 根目录中 plugins 下新建 pinyin 文件夹</li>\n<li>根据对应关系, 选择下载 v5.x.x 的 Release zip 文件(当然也可以下载源码, 自己编译)</li>\n<li>将 zip 解压到新建立的 pinyin 文件夹下</li>\n</ul>\n<p>安装完成后, 重启 Elasticsearch 服务就可以使用了.</p>\n<h2 id=\"使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\"><a href=\"#使用-Maven-打包-elasticsearch-analysis-ik-和-elasticsearch-analysis-pinyin\" class=\"headerlink\" title=\"使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin\"></a>使用 Maven 打包 elasticsearch-analysis-ik 和 elasticsearch-analysis-pinyin</h2><p>有时候在 github 上不能直接下载 release 包, 我们就需要 Maven 来处理</p>\n<p>下载最新版 Maven: <a href=\"http://maven.apache.org/download.cgi\" target=\"_blank\" rel=\"noopener\">http://maven.apache.org/download.cgi</a></p>\n<ul>\n<li>解压</li>\n<li>配置环境变量 (路径\\bin)</li>\n<li>测试 (mvn -v)</li>\n<li>进入已经下载的 <code>elasticsearch-analysis-ik</code> 文件夹下</li>\n<li>运行 mvn package</li>\n<li>结束后复制 target/releases//elasticsearch-analysis-ik-{version}.zip 即可<blockquote>\n<p>elasticsearch-analysis-pinyin 操作相同</p>\n</blockquote>\n</li>\n</ul>"},{"title":"异步编程模式","date":"2016-12-07T04:12:33.000Z","_content":"","source":"_posts/event-based_asynchronous_pattern.md","raw":"---\ntitle: 异步编程模式\ndate: 2016-12-07 12:12:33\ntags: [async, event-based, .net]\n---","slug":"event-based_asynchronous_pattern","published":1,"updated":"2020-01-09T20:21:18.091Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qr000lbica7a20sen9","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"git pull时保存或删除凭证","date":"2016-10-19T09:25:50.000Z","_content":"\n#### 保存Git凭证:\n`git config --local credential.helper\nstore`\n#### 删除已经保存的凭证:\n`git config --local credential.helper\nremove`","source":"_posts/git_command.md","raw":"---\ntitle: git pull时保存或删除凭证\ndate: 2016-10-19 17:25:50\ncategories: [Git]\n---\n\n#### 保存Git凭证:\n`git config --local credential.helper\nstore`\n#### 删除已经保存的凭证:\n`git config --local credential.helper\nremove`","slug":"git_command","published":1,"updated":"2020-01-09T20:21:18.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qs000nbicahtpudq8u","content":"<h4 id=\"保存Git凭证\"><a href=\"#保存Git凭证\" class=\"headerlink\" title=\"保存Git凭证:\"></a>保存Git凭证:</h4><p><code>git config --local credential.helper\nstore</code></p>\n<h4 id=\"删除已经保存的凭证\"><a href=\"#删除已经保存的凭证\" class=\"headerlink\" title=\"删除已经保存的凭证:\"></a>删除已经保存的凭证:</h4><p><code>git config --local credential.helper\nremove</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"保存Git凭证\"><a href=\"#保存Git凭证\" class=\"headerlink\" title=\"保存Git凭证:\"></a>保存Git凭证:</h4><p><code>git config --local credential.helper\nstore</code></p>\n<h4 id=\"删除已经保存的凭证\"><a href=\"#删除已经保存的凭证\" class=\"headerlink\" title=\"删除已经保存的凭证:\"></a>删除已经保存的凭证:</h4><p><code>git config --local credential.helper\nremove</code></p>\n"},{"title":"beego Config 说明","date":"2016-10-19T09:25:50.000Z","_content":"\n* beego.BConfig\n    * AppName \n    * RunMode \n    * RouterCaseSensitive \n    * ServerName \n    * RecoverPanic \n    * CopyRequestBody \n    * EnableGzip \n    * MaxMemory \n    * EnableErrorsShow \n    * **WebConfig**\n        * AutoRender \n        * EnableDocs \n        * FlashName \n        * FlashSeperator \n        * DirectoryIndex \n        * StaticDir \n            > 单目录: StaticDir = download\n\n            > 多目录: StaticDir = download:down download2:down2\n\n        * StaticExtensionsToGzip\n            > StaticExtensionsToGzip = .css, .js\n\n        * TemplateLeft\n            > 模板左标签，默认值是{% raw %}{{{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateLeft=\"{% raw %}{{{% endraw %}\"\n\n        * TemplateRight\n            > 模板右标签，默认值是{% raw %}}}{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateRight=\"{% raw %}{{{% endraw %}\"\n\n        * ViewsPath\n        * EnableXSRF\n        * XSRFKEY\n        * XSRFExpire\n        * **Session**\n            * SessionOn\n            * SessionProvider\n            * SessionName\n            * SessionGCMaxLifetime\n            * SessionProviderConfig\n            * SessionCookieLifeTime\n            * SessionAutoSetCookie\n            * SessionDomain\n    * **Listen**\n\n        * Graceful\n        * ServerTimeOut\n        * ListenTCP4\n        * EnableHTTP\n        * HTTPAddr\n        * HTTPPort\n        * EnableHTTPS\n        * HTTPSAddr\n        * HTTPSPort\n        * HTTPSCertFile\n        * HTTPSKeyFile\n        * EnableAdmin\n        * AdminAddr\n        * AdminPort\n        * EnableFcgi\n        * EnableStdIo\n    * **Log**\n        * AccessLogs\n        * FileLineNum\n        * Outputs","source":"_posts/go-beego-config.md","raw":"---\ntitle: beego Config 说明\ndate: 2016-10-19 17:25:50\ncategories: [go]\n---\n\n* beego.BConfig\n    * AppName \n    * RunMode \n    * RouterCaseSensitive \n    * ServerName \n    * RecoverPanic \n    * CopyRequestBody \n    * EnableGzip \n    * MaxMemory \n    * EnableErrorsShow \n    * **WebConfig**\n        * AutoRender \n        * EnableDocs \n        * FlashName \n        * FlashSeperator \n        * DirectoryIndex \n        * StaticDir \n            > 单目录: StaticDir = download\n\n            > 多目录: StaticDir = download:down download2:down2\n\n        * StaticExtensionsToGzip\n            > StaticExtensionsToGzip = .css, .js\n\n        * TemplateLeft\n            > 模板左标签，默认值是{% raw %}{{{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateLeft=\"{% raw %}{{{% endraw %}\"\n\n        * TemplateRight\n            > 模板右标签，默认值是{% raw %}}}{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateRight=\"{% raw %}{{{% endraw %}\"\n\n        * ViewsPath\n        * EnableXSRF\n        * XSRFKEY\n        * XSRFExpire\n        * **Session**\n            * SessionOn\n            * SessionProvider\n            * SessionName\n            * SessionGCMaxLifetime\n            * SessionProviderConfig\n            * SessionCookieLifeTime\n            * SessionAutoSetCookie\n            * SessionDomain\n    * **Listen**\n\n        * Graceful\n        * ServerTimeOut\n        * ListenTCP4\n        * EnableHTTP\n        * HTTPAddr\n        * HTTPPort\n        * EnableHTTPS\n        * HTTPSAddr\n        * HTTPSPort\n        * HTTPSCertFile\n        * HTTPSKeyFile\n        * EnableAdmin\n        * AdminAddr\n        * AdminPort\n        * EnableFcgi\n        * EnableStdIo\n    * **Log**\n        * AccessLogs\n        * FileLineNum\n        * Outputs","slug":"go-beego-config","published":1,"updated":"2020-01-09T20:21:18.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qt000pbicagnn8tkvt","content":"<ul>\n<li><p>beego.BConfig</p>\n<ul>\n<li><p>AppName </p>\n</li>\n<li><p>RunMode </p>\n</li>\n<li><p>RouterCaseSensitive </p>\n</li>\n<li><p>ServerName </p>\n</li>\n<li><p>RecoverPanic </p>\n</li>\n<li><p>CopyRequestBody </p>\n</li>\n<li><p>EnableGzip </p>\n</li>\n<li><p>MaxMemory </p>\n</li>\n<li><p>EnableErrorsShow </p>\n</li>\n<li><p><strong>WebConfig</strong></p>\n<ul>\n<li><p>AutoRender </p>\n</li>\n<li><p>EnableDocs </p>\n</li>\n<li><p>FlashName </p>\n</li>\n<li><p>FlashSeperator </p>\n</li>\n<li><p>DirectoryIndex </p>\n</li>\n<li><p>StaticDir </p>\n<blockquote>\n<p>单目录: StaticDir = download</p>\n</blockquote>\n<blockquote>\n<p>多目录: StaticDir = download:down download2:down2</p>\n</blockquote>\n</li>\n<li><p>StaticExtensionsToGzip</p>\n<blockquote>\n<p>StaticExtensionsToGzip = .css, .js</p>\n</blockquote>\n</li>\n<li><p>TemplateLeft</p>\n<blockquote>\n<p>模板左标签，默认值是{{</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateLeft=”{{“</p>\n</blockquote>\n</li>\n<li><p>TemplateRight</p>\n<blockquote>\n<p>模板右标签，默认值是}}</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateRight=”{{“</p>\n</blockquote>\n</li>\n<li><p>ViewsPath</p>\n</li>\n<li><p>EnableXSRF</p>\n</li>\n<li><p>XSRFKEY</p>\n</li>\n<li><p>XSRFExpire</p>\n</li>\n<li><p><strong>Session</strong></p>\n<ul>\n<li>SessionOn</li>\n<li>SessionProvider</li>\n<li>SessionName</li>\n<li>SessionGCMaxLifetime</li>\n<li>SessionProviderConfig</li>\n<li>SessionCookieLifeTime</li>\n<li>SessionAutoSetCookie</li>\n<li>SessionDomain</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Listen</strong></p>\n<ul>\n<li>Graceful</li>\n<li>ServerTimeOut</li>\n<li>ListenTCP4</li>\n<li>EnableHTTP</li>\n<li>HTTPAddr</li>\n<li>HTTPPort</li>\n<li>EnableHTTPS</li>\n<li>HTTPSAddr</li>\n<li>HTTPSPort</li>\n<li>HTTPSCertFile</li>\n<li>HTTPSKeyFile</li>\n<li>EnableAdmin</li>\n<li>AdminAddr</li>\n<li>AdminPort</li>\n<li>EnableFcgi</li>\n<li>EnableStdIo</li>\n</ul>\n</li>\n<li><p><strong>Log</strong></p>\n<ul>\n<li>AccessLogs</li>\n<li>FileLineNum</li>\n<li>Outputs</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>beego.BConfig</p>\n<ul>\n<li><p>AppName </p>\n</li>\n<li><p>RunMode </p>\n</li>\n<li><p>RouterCaseSensitive </p>\n</li>\n<li><p>ServerName </p>\n</li>\n<li><p>RecoverPanic </p>\n</li>\n<li><p>CopyRequestBody </p>\n</li>\n<li><p>EnableGzip </p>\n</li>\n<li><p>MaxMemory </p>\n</li>\n<li><p>EnableErrorsShow </p>\n</li>\n<li><p><strong>WebConfig</strong></p>\n<ul>\n<li><p>AutoRender </p>\n</li>\n<li><p>EnableDocs </p>\n</li>\n<li><p>FlashName </p>\n</li>\n<li><p>FlashSeperator </p>\n</li>\n<li><p>DirectoryIndex </p>\n</li>\n<li><p>StaticDir </p>\n<blockquote>\n<p>单目录: StaticDir = download</p>\n</blockquote>\n<blockquote>\n<p>多目录: StaticDir = download:down download2:down2</p>\n</blockquote>\n</li>\n<li><p>StaticExtensionsToGzip</p>\n<blockquote>\n<p>StaticExtensionsToGzip = .css, .js</p>\n</blockquote>\n</li>\n<li><p>TemplateLeft</p>\n<blockquote>\n<p>模板左标签，默认值是{{</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateLeft=”{{“</p>\n</blockquote>\n</li>\n<li><p>TemplateRight</p>\n<blockquote>\n<p>模板右标签，默认值是}}</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateRight=”{{“</p>\n</blockquote>\n</li>\n<li><p>ViewsPath</p>\n</li>\n<li><p>EnableXSRF</p>\n</li>\n<li><p>XSRFKEY</p>\n</li>\n<li><p>XSRFExpire</p>\n</li>\n<li><p><strong>Session</strong></p>\n<ul>\n<li>SessionOn</li>\n<li>SessionProvider</li>\n<li>SessionName</li>\n<li>SessionGCMaxLifetime</li>\n<li>SessionProviderConfig</li>\n<li>SessionCookieLifeTime</li>\n<li>SessionAutoSetCookie</li>\n<li>SessionDomain</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Listen</strong></p>\n<ul>\n<li>Graceful</li>\n<li>ServerTimeOut</li>\n<li>ListenTCP4</li>\n<li>EnableHTTP</li>\n<li>HTTPAddr</li>\n<li>HTTPPort</li>\n<li>EnableHTTPS</li>\n<li>HTTPSAddr</li>\n<li>HTTPSPort</li>\n<li>HTTPSCertFile</li>\n<li>HTTPSKeyFile</li>\n<li>EnableAdmin</li>\n<li>AdminAddr</li>\n<li>AdminPort</li>\n<li>EnableFcgi</li>\n<li>EnableStdIo</li>\n</ul>\n</li>\n<li><p><strong>Log</strong></p>\n<ul>\n<li>AccessLogs</li>\n<li>FileLineNum</li>\n<li>Outputs</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"beego Config 说明","date":"2016-10-19T09:25:50.000Z","_content":"\n* beego.BConfig\n    * AppName \n    * RunMode \n    * RouterCaseSensitive \n    * ServerName \n    * RecoverPanic \n    * CopyRequestBody \n    * EnableGzip \n    * MaxMemory \n    * EnableErrorsShow \n    * **WebConfig**\n        * AutoRender \n        * EnableDocs \n        * FlashName \n        * FlashSeperator \n        * DirectoryIndex \n        * StaticDir \n            > 单目录: StaticDir = download\n\n            > 多目录: StaticDir = download:down download2:down2\n\n        * StaticExtensionsToGzip\n            > StaticExtensionsToGzip = .css, .js\n\n        * TemplateLeft\n            > 模板左标签，默认值是{% raw %}{{{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateLeft=\"{% raw %}{{{% endraw %}\"\n\n        * TemplateRight\n            > 模板右标签，默认值是{% raw %}}}{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateRight=\"{% raw %}{{{% endraw %}\"\n\n        * ViewsPath\n        * EnableXSRF\n        * XSRFKEY\n        * XSRFExpire\n        * **Session**\n            * SessionOn\n            * SessionProvider\n            * SessionName\n            * SessionGCMaxLifetime\n            * SessionProviderConfig\n            * SessionCookieLifeTime\n            * SessionAutoSetCookie\n            * SessionDomain\n    * **Listen**\n\n        * Graceful\n        * ServerTimeOut\n        * ListenTCP4\n        * EnableHTTP\n        * HTTPAddr\n        * HTTPPort\n        * EnableHTTPS\n        * HTTPSAddr\n        * HTTPSPort\n        * HTTPSCertFile\n        * HTTPSKeyFile\n        * EnableAdmin\n        * AdminAddr\n        * AdminPort\n        * EnableFcgi\n        * EnableStdIo\n    * **Log**\n        * AccessLogs\n        * FileLineNum\n        * Outputs","source":"_posts/golang-beego-config.md","raw":"---\ntitle: beego Config 说明\ndate: 2016-10-19 17:25:50\ncategories: [go]\n---\n\n* beego.BConfig\n    * AppName \n    * RunMode \n    * RouterCaseSensitive \n    * ServerName \n    * RecoverPanic \n    * CopyRequestBody \n    * EnableGzip \n    * MaxMemory \n    * EnableErrorsShow \n    * **WebConfig**\n        * AutoRender \n        * EnableDocs \n        * FlashName \n        * FlashSeperator \n        * DirectoryIndex \n        * StaticDir \n            > 单目录: StaticDir = download\n\n            > 多目录: StaticDir = download:down download2:down2\n\n        * StaticExtensionsToGzip\n            > StaticExtensionsToGzip = .css, .js\n\n        * TemplateLeft\n            > 模板左标签，默认值是{% raw %}{{{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateLeft=\"{% raw %}{{{% endraw %}\"\n\n        * TemplateRight\n            > 模板右标签，默认值是{% raw %}}}{% endraw %}\n\n            > beego.BConfig.WebConfig.TemplateRight=\"{% raw %}{{{% endraw %}\"\n\n        * ViewsPath\n        * EnableXSRF\n        * XSRFKEY\n        * XSRFExpire\n        * **Session**\n            * SessionOn\n            * SessionProvider\n            * SessionName\n            * SessionGCMaxLifetime\n            * SessionProviderConfig\n            * SessionCookieLifeTime\n            * SessionAutoSetCookie\n            * SessionDomain\n    * **Listen**\n\n        * Graceful\n        * ServerTimeOut\n        * ListenTCP4\n        * EnableHTTP\n        * HTTPAddr\n        * HTTPPort\n        * EnableHTTPS\n        * HTTPSAddr\n        * HTTPSPort\n        * HTTPSCertFile\n        * HTTPSKeyFile\n        * EnableAdmin\n        * AdminAddr\n        * AdminPort\n        * EnableFcgi\n        * EnableStdIo\n    * **Log**\n        * AccessLogs\n        * FileLineNum\n        * Outputs","slug":"golang-beego-config","published":1,"updated":"2020-01-09T20:21:18.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qu000rbica6detepqj","content":"<ul>\n<li><p>beego.BConfig</p>\n<ul>\n<li><p>AppName </p>\n</li>\n<li><p>RunMode </p>\n</li>\n<li><p>RouterCaseSensitive </p>\n</li>\n<li><p>ServerName </p>\n</li>\n<li><p>RecoverPanic </p>\n</li>\n<li><p>CopyRequestBody </p>\n</li>\n<li><p>EnableGzip </p>\n</li>\n<li><p>MaxMemory </p>\n</li>\n<li><p>EnableErrorsShow </p>\n</li>\n<li><p><strong>WebConfig</strong></p>\n<ul>\n<li><p>AutoRender </p>\n</li>\n<li><p>EnableDocs </p>\n</li>\n<li><p>FlashName </p>\n</li>\n<li><p>FlashSeperator </p>\n</li>\n<li><p>DirectoryIndex </p>\n</li>\n<li><p>StaticDir </p>\n<blockquote>\n<p>单目录: StaticDir = download</p>\n</blockquote>\n<blockquote>\n<p>多目录: StaticDir = download:down download2:down2</p>\n</blockquote>\n</li>\n<li><p>StaticExtensionsToGzip</p>\n<blockquote>\n<p>StaticExtensionsToGzip = .css, .js</p>\n</blockquote>\n</li>\n<li><p>TemplateLeft</p>\n<blockquote>\n<p>模板左标签，默认值是{{</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateLeft=”{{“</p>\n</blockquote>\n</li>\n<li><p>TemplateRight</p>\n<blockquote>\n<p>模板右标签，默认值是}}</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateRight=”{{“</p>\n</blockquote>\n</li>\n<li><p>ViewsPath</p>\n</li>\n<li><p>EnableXSRF</p>\n</li>\n<li><p>XSRFKEY</p>\n</li>\n<li><p>XSRFExpire</p>\n</li>\n<li><p><strong>Session</strong></p>\n<ul>\n<li>SessionOn</li>\n<li>SessionProvider</li>\n<li>SessionName</li>\n<li>SessionGCMaxLifetime</li>\n<li>SessionProviderConfig</li>\n<li>SessionCookieLifeTime</li>\n<li>SessionAutoSetCookie</li>\n<li>SessionDomain</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Listen</strong></p>\n<ul>\n<li>Graceful</li>\n<li>ServerTimeOut</li>\n<li>ListenTCP4</li>\n<li>EnableHTTP</li>\n<li>HTTPAddr</li>\n<li>HTTPPort</li>\n<li>EnableHTTPS</li>\n<li>HTTPSAddr</li>\n<li>HTTPSPort</li>\n<li>HTTPSCertFile</li>\n<li>HTTPSKeyFile</li>\n<li>EnableAdmin</li>\n<li>AdminAddr</li>\n<li>AdminPort</li>\n<li>EnableFcgi</li>\n<li>EnableStdIo</li>\n</ul>\n</li>\n<li><p><strong>Log</strong></p>\n<ul>\n<li>AccessLogs</li>\n<li>FileLineNum</li>\n<li>Outputs</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><p>beego.BConfig</p>\n<ul>\n<li><p>AppName </p>\n</li>\n<li><p>RunMode </p>\n</li>\n<li><p>RouterCaseSensitive </p>\n</li>\n<li><p>ServerName </p>\n</li>\n<li><p>RecoverPanic </p>\n</li>\n<li><p>CopyRequestBody </p>\n</li>\n<li><p>EnableGzip </p>\n</li>\n<li><p>MaxMemory </p>\n</li>\n<li><p>EnableErrorsShow </p>\n</li>\n<li><p><strong>WebConfig</strong></p>\n<ul>\n<li><p>AutoRender </p>\n</li>\n<li><p>EnableDocs </p>\n</li>\n<li><p>FlashName </p>\n</li>\n<li><p>FlashSeperator </p>\n</li>\n<li><p>DirectoryIndex </p>\n</li>\n<li><p>StaticDir </p>\n<blockquote>\n<p>单目录: StaticDir = download</p>\n</blockquote>\n<blockquote>\n<p>多目录: StaticDir = download:down download2:down2</p>\n</blockquote>\n</li>\n<li><p>StaticExtensionsToGzip</p>\n<blockquote>\n<p>StaticExtensionsToGzip = .css, .js</p>\n</blockquote>\n</li>\n<li><p>TemplateLeft</p>\n<blockquote>\n<p>模板左标签，默认值是{{</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateLeft=”{{“</p>\n</blockquote>\n</li>\n<li><p>TemplateRight</p>\n<blockquote>\n<p>模板右标签，默认值是}}</p>\n</blockquote>\n<blockquote>\n<p>beego.BConfig.WebConfig.TemplateRight=”{{“</p>\n</blockquote>\n</li>\n<li><p>ViewsPath</p>\n</li>\n<li><p>EnableXSRF</p>\n</li>\n<li><p>XSRFKEY</p>\n</li>\n<li><p>XSRFExpire</p>\n</li>\n<li><p><strong>Session</strong></p>\n<ul>\n<li>SessionOn</li>\n<li>SessionProvider</li>\n<li>SessionName</li>\n<li>SessionGCMaxLifetime</li>\n<li>SessionProviderConfig</li>\n<li>SessionCookieLifeTime</li>\n<li>SessionAutoSetCookie</li>\n<li>SessionDomain</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><strong>Listen</strong></p>\n<ul>\n<li>Graceful</li>\n<li>ServerTimeOut</li>\n<li>ListenTCP4</li>\n<li>EnableHTTP</li>\n<li>HTTPAddr</li>\n<li>HTTPPort</li>\n<li>EnableHTTPS</li>\n<li>HTTPSAddr</li>\n<li>HTTPSPort</li>\n<li>HTTPSCertFile</li>\n<li>HTTPSKeyFile</li>\n<li>EnableAdmin</li>\n<li>AdminAddr</li>\n<li>AdminPort</li>\n<li>EnableFcgi</li>\n<li>EnableStdIo</li>\n</ul>\n</li>\n<li><p><strong>Log</strong></p>\n<ul>\n<li>AccessLogs</li>\n<li>FileLineNum</li>\n<li>Outputs</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"Go 函数的接收类型何时应该使用指针","date":"2017-10-13T02:39:20.000Z","_content":"\n对于刚入门 Go 的人来说, 为函数的 receiver 指定为 **值类型** 或 **指针类型** 是很困难的. 如果不知道如何取舍, 选择指针类型的 reveiver. 但是有时候 **值类型** 的 receiver 更加合适, 比如对象是一些轻量级的不变的 structs, 使用 **值类型** 的 receiver 会更加高效. 下面是列举了一些常用的判断指导.\n\n## 使用指针类型\n\n* 如果该函数会修改receiver\n* 如果receiver是 `struct` 并且包含互斥类型 `sync.Mutex`，或者是类似的同步变量，receiver必须是指针，这样可以避免对象拷贝\n* 如果receiver是较大的 `struct` 或者 `array`，使用指针则更加高效。多大才算大？假设 `struct` 内所有成员都要作为函数变量传进去，如果觉得这时数据太多，就是 `struct` 太大\n* 如果receiver是 `struct`, `array` 或者 `slice`, 并且其中某个element指向了某个可变量，则这个时候receiver选指针会使代码的意图更加明显\n\n## 不使用\n\n* 如果receiver是 `map`、`func` 或者 `chan`\n* 如果receiver是 `slice` 并且该函数并不会修改此 `slice`\n* 如果receiver使较小的 `struct` 或者 `array`，并且其变量都是些不变量、常量，例如 `time.Time` , 因为 **值类型** 的 receiver 可以减少需要回收的垃圾量\n\n> **最后，如果不确定用哪个，使用指针类型的receiver**","source":"_posts/go指针使用情况.md","raw":"---\ntitle: Go 函数的接收类型何时应该使用指针\ndate: 2017-10-13 10:39:20\ncategories: [go]\n---\n\n对于刚入门 Go 的人来说, 为函数的 receiver 指定为 **值类型** 或 **指针类型** 是很困难的. 如果不知道如何取舍, 选择指针类型的 reveiver. 但是有时候 **值类型** 的 receiver 更加合适, 比如对象是一些轻量级的不变的 structs, 使用 **值类型** 的 receiver 会更加高效. 下面是列举了一些常用的判断指导.\n\n## 使用指针类型\n\n* 如果该函数会修改receiver\n* 如果receiver是 `struct` 并且包含互斥类型 `sync.Mutex`，或者是类似的同步变量，receiver必须是指针，这样可以避免对象拷贝\n* 如果receiver是较大的 `struct` 或者 `array`，使用指针则更加高效。多大才算大？假设 `struct` 内所有成员都要作为函数变量传进去，如果觉得这时数据太多，就是 `struct` 太大\n* 如果receiver是 `struct`, `array` 或者 `slice`, 并且其中某个element指向了某个可变量，则这个时候receiver选指针会使代码的意图更加明显\n\n## 不使用\n\n* 如果receiver是 `map`、`func` 或者 `chan`\n* 如果receiver是 `slice` 并且该函数并不会修改此 `slice`\n* 如果receiver使较小的 `struct` 或者 `array`，并且其变量都是些不变量、常量，例如 `time.Time` , 因为 **值类型** 的 receiver 可以减少需要回收的垃圾量\n\n> **最后，如果不确定用哪个，使用指针类型的receiver**","slug":"go指针使用情况","published":1,"updated":"2020-01-09T20:21:18.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qv000tbicade56b00i","content":"<p>对于刚入门 Go 的人来说, 为函数的 receiver 指定为 <strong>值类型</strong> 或 <strong>指针类型</strong> 是很困难的. 如果不知道如何取舍, 选择指针类型的 reveiver. 但是有时候 <strong>值类型</strong> 的 receiver 更加合适, 比如对象是一些轻量级的不变的 structs, 使用 <strong>值类型</strong> 的 receiver 会更加高效. 下面是列举了一些常用的判断指导.</p>\n<h2 id=\"使用指针类型\"><a href=\"#使用指针类型\" class=\"headerlink\" title=\"使用指针类型\"></a>使用指针类型</h2><ul>\n<li>如果该函数会修改receiver</li>\n<li>如果receiver是 <code>struct</code> 并且包含互斥类型 <code>sync.Mutex</code>，或者是类似的同步变量，receiver必须是指针，这样可以避免对象拷贝</li>\n<li>如果receiver是较大的 <code>struct</code> 或者 <code>array</code>，使用指针则更加高效。多大才算大？假设 <code>struct</code> 内所有成员都要作为函数变量传进去，如果觉得这时数据太多，就是 <code>struct</code> 太大</li>\n<li>如果receiver是 <code>struct</code>, <code>array</code> 或者 <code>slice</code>, 并且其中某个element指向了某个可变量，则这个时候receiver选指针会使代码的意图更加明显</li>\n</ul>\n<h2 id=\"不使用\"><a href=\"#不使用\" class=\"headerlink\" title=\"不使用\"></a>不使用</h2><ul>\n<li>如果receiver是 <code>map</code>、<code>func</code> 或者 <code>chan</code></li>\n<li>如果receiver是 <code>slice</code> 并且该函数并不会修改此 <code>slice</code></li>\n<li>如果receiver使较小的 <code>struct</code> 或者 <code>array</code>，并且其变量都是些不变量、常量，例如 <code>time.Time</code> , 因为 <strong>值类型</strong> 的 receiver 可以减少需要回收的垃圾量</li>\n</ul>\n<blockquote>\n<p><strong>最后，如果不确定用哪个，使用指针类型的receiver</strong></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>对于刚入门 Go 的人来说, 为函数的 receiver 指定为 <strong>值类型</strong> 或 <strong>指针类型</strong> 是很困难的. 如果不知道如何取舍, 选择指针类型的 reveiver. 但是有时候 <strong>值类型</strong> 的 receiver 更加合适, 比如对象是一些轻量级的不变的 structs, 使用 <strong>值类型</strong> 的 receiver 会更加高效. 下面是列举了一些常用的判断指导.</p>\n<h2 id=\"使用指针类型\"><a href=\"#使用指针类型\" class=\"headerlink\" title=\"使用指针类型\"></a>使用指针类型</h2><ul>\n<li>如果该函数会修改receiver</li>\n<li>如果receiver是 <code>struct</code> 并且包含互斥类型 <code>sync.Mutex</code>，或者是类似的同步变量，receiver必须是指针，这样可以避免对象拷贝</li>\n<li>如果receiver是较大的 <code>struct</code> 或者 <code>array</code>，使用指针则更加高效。多大才算大？假设 <code>struct</code> 内所有成员都要作为函数变量传进去，如果觉得这时数据太多，就是 <code>struct</code> 太大</li>\n<li>如果receiver是 <code>struct</code>, <code>array</code> 或者 <code>slice</code>, 并且其中某个element指向了某个可变量，则这个时候receiver选指针会使代码的意图更加明显</li>\n</ul>\n<h2 id=\"不使用\"><a href=\"#不使用\" class=\"headerlink\" title=\"不使用\"></a>不使用</h2><ul>\n<li>如果receiver是 <code>map</code>、<code>func</code> 或者 <code>chan</code></li>\n<li>如果receiver是 <code>slice</code> 并且该函数并不会修改此 <code>slice</code></li>\n<li>如果receiver使较小的 <code>struct</code> 或者 <code>array</code>，并且其变量都是些不变量、常量，例如 <code>time.Time</code> , 因为 <strong>值类型</strong> 的 receiver 可以减少需要回收的垃圾量</li>\n</ul>\n<blockquote>\n<p><strong>最后，如果不确定用哪个，使用指针类型的receiver</strong></p>\n</blockquote>\n"},{"title":"(转)Go结构体和指针","date":"2017-10-12T12:23:50.000Z","_content":"> 原文地址: [jemygraw/TechDoc](https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md)\n\n基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。\n\n## **结构体定义**\n\n上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。\n\n简单来讲，Go提供的`结构体`就是把`使用各种数据类型定义`的`不同变量组合起来`的`高级数据类型`。闲话不多说，看例子:\n\n\ttype Rect struct {\n\t\twidth float64\n\t\tlength float64\n\t}\n\n上面我们定义了一个矩形结构体，首先是关键是`type`表示要`定义一个新的数据类型了`，然后是新的数据类型名称`Rect`，最后是`struct`关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为`width和length的数据类型相同`，还可以写成如下格式：\n\n```go\ntype Rect struct {\n  width, length float64\n}\n```\n\n<!--more-->\n\n好了，来用结构体干点啥吧，计算一下矩形面积。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect Rect\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(rect.width * rect.length)\n}\n```\n从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过`.`来访问内部的成员。包括`给内部成员赋值`和`读取内部成员值`。\n\n在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{width: 100, length: 200}\n\n  fmt.Println(rect.width * rect.length)\n}\n```\n\n当然`如果你知道结构体成员定义的顺序`，也可以不使用`key:value`的方式赋值，`直接按照结构体成员定义的顺序给它们赋值`。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"* Length:\",\n    rect.length, \"= Area:\", rect.width*rect.length)\n}\n```\n输出结果为\n\n\tWidth: 100 * Length: 200 = Area: 20000\n\n**结构体参数传递方式**\n\n我们说过，`Go函数的参数传递方式是值传递`，这句话`对结构体也是适用的`。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc double_area(rect Rect) float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\nfunc main() {\n  var rect = Rect{100, 200}\n  fmt.Println(double_area(rect))\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length)\n}\n```\n上面的例子输出为:\n\n\t80000\n\tWidth: 100 Length: 200\n\n也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。\n\n\n## **结构体组合函数**\n\n上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？\n\n确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。`Go使用组合函数的方式来为结构体定义结构体方法`。我们仔细看一下上面的area()函数定义。\n\n首先是关键字`func`表示这是一个函数，第二个参数是`结构体类型和实例变量`，第三个是`函数名称`，第四个是`函数返回值`。这里我们可以看出area()函数和普通函数定义的`区别就在于`area()函数`多了一个结构体类型限定`。这样一来Go就知道了这是一个为结构体定义的`方法`。\n\n这里需要注意一点就是`定义在结构体上面的函数(function)`一般叫做`方法(method)`。\n\n## **结构体和指针**\n\n我们在指针一节讲到过，`指针的主要作用就是在函数内部改变传递进来变量的值`。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是\\*Rect，结构体遇到指针的时候，你`不需要使用*去访问结构体的成员`，直接使用`.`引用就可以了。所以上面的例子中我们直接使用`rect.width=100` 和`rect.length=200`来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为`*Rect`。\n\n其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为`Rect`也是可以的。如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n这里Go足够聪明，所以rect.area()也是可以的。\n\n至于`使不使用结构体指针和使不使用指针的出发点是一样的`，那就是`你是否试图在函数内部改变传递进来的参数的值`。再举个例子如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) double_area() float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(*rect)\n  fmt.Println(\"Double Width:\", rect.width, \"Double Length:\", rect.length,\n    \"Double Area:\", rect.double_area())\n  fmt.Println(*rect)\n}\n```\n这个例子的输出是：\n\n\t{100 200}\n\tDouble Width: 200 Double Length: 400 Double Area: 80000\n\t{200 400}\n\n\n## **结构体内嵌类型**\n\n我们可以在一个`结构体内部定义另外一个结构体类型的成员`。例如iPhone也是Phone，我们看下例子：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  phone Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.phone.price = 5000\n  p.phone.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.phone.price)\n  fmt.Println(\"Color:\", p.phone.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是`“iPhone也是(is-a)Phone”`，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是`“iPhone有一个(has-a)Phone”`，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在这个例子中，我们定义IPhone结构体的时候，`不再定义Phone变量`，`直接把结构体Phone类型定义在那里`。然后IPhone就可以`像访问直接定义在自己结构体里面的成员一样访问Phone的成员`。\n\n上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\nfunc (phone Phone) ringing() {\n  fmt.Println(\"Phone is ringing...\")\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n\n  p.ringing()\n}\n```\n输出结果为：\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\tPhone is ringing...\n\n\n## **接口**\n\n我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\nfunc main() {\n  var nokia NokiaPhone\n  nokia.call()\n\n  var iPhone IPhone\n  iPhone.call()\n}\n```\n我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。\n\n再仔细看一下`接口的定义`，首先是关键字`type`，然后是`接口名称`，最后是关键字`interface`表示这个类型是接口类型。`在接口类型里面，我们定义了一组方法`。\n\nGo语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，`任何其他类型只要实现了这些方法就是实现了这个接口`，`不一定非要显式地声明`要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n}\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc main() {\n  var phone Phone\n\n  phone = new(NokiaPhone)\n  phone.call()\n\n  phone = new(IPhone)\n  phone.call()\n\n}\n```\n在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：\n\n\tI am Nokia, I can call you!\n\tI am iPhone, I can call you!\n\n以前我们说过，`Go语言式静态类型语言，变量的类型在运行过程中不能改变`。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？\n\n原来，在Go语言里面，`一个类型A只要实现了接口X所定义的全部方法`，那么`A类型的变量`也是`X类型的变量`。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。\n\n我们为Phone添加一个方法sales()，再来熟悉一下接口用法。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\nfunc main() {\n  var phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var totalSales = 0\n  for _, phone := range phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}\n```\t\n输出结果：\n\n\t14200\n\n上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。\n\n接口类型还可以作为结构体的数据成员。\n\n假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\ntype Person struct {\n  phones []Phone\n  name   string\n  age    int\n}\n\nfunc (person Person) total_cost() int {\n  var sum = 0\n  for _, phone := range person.phones {\n    sum += phone.sales()\n  }\n  return sum\n}\n\nfunc main() {\n  var bought_phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var person = Person{name: \"Jemy\", age: 25, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}\n```\t\n这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：\n\n\tJemy\n\t25\n\t14200\n\t\n## **小结**\n\nGo的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。","source":"_posts/go指针和结构体.md","raw":"---\ntitle: (转)Go结构体和指针\ndate: 2017-10-12 20:23:50\ncategories: [go]\n---\n> 原文地址: [jemygraw/TechDoc](https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md)\n\n基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。\n\n## **结构体定义**\n\n上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。\n\n简单来讲，Go提供的`结构体`就是把`使用各种数据类型定义`的`不同变量组合起来`的`高级数据类型`。闲话不多说，看例子:\n\n\ttype Rect struct {\n\t\twidth float64\n\t\tlength float64\n\t}\n\n上面我们定义了一个矩形结构体，首先是关键是`type`表示要`定义一个新的数据类型了`，然后是新的数据类型名称`Rect`，最后是`struct`关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为`width和length的数据类型相同`，还可以写成如下格式：\n\n```go\ntype Rect struct {\n  width, length float64\n}\n```\n\n<!--more-->\n\n好了，来用结构体干点啥吧，计算一下矩形面积。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect Rect\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(rect.width * rect.length)\n}\n```\n从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过`.`来访问内部的成员。包括`给内部成员赋值`和`读取内部成员值`。\n\n在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{width: 100, length: 200}\n\n  fmt.Println(rect.width * rect.length)\n}\n```\n\n当然`如果你知道结构体成员定义的顺序`，也可以不使用`key:value`的方式赋值，`直接按照结构体成员定义的顺序给它们赋值`。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"* Length:\",\n    rect.length, \"= Area:\", rect.width*rect.length)\n}\n```\n输出结果为\n\n\tWidth: 100 * Length: 200 = Area: 20000\n\n**结构体参数传递方式**\n\n我们说过，`Go函数的参数传递方式是值传递`，这句话`对结构体也是适用的`。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc double_area(rect Rect) float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\nfunc main() {\n  var rect = Rect{100, 200}\n  fmt.Println(double_area(rect))\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length)\n}\n```\n上面的例子输出为:\n\n\t80000\n\tWidth: 100 Length: 200\n\n也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。\n\n\n## **结构体组合函数**\n\n上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = Rect{100, 200}\n\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？\n\n确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。`Go使用组合函数的方式来为结构体定义结构体方法`。我们仔细看一下上面的area()函数定义。\n\n首先是关键字`func`表示这是一个函数，第二个参数是`结构体类型和实例变量`，第三个是`函数名称`，第四个是`函数返回值`。这里我们可以看出area()函数和普通函数定义的`区别就在于`area()函数`多了一个结构体类型限定`。这样一来Go就知道了这是一个为结构体定义的`方法`。\n\n这里需要注意一点就是`定义在结构体上面的函数(function)`一般叫做`方法(method)`。\n\n## **结构体和指针**\n\n我们在指针一节讲到过，`指针的主要作用就是在函数内部改变传递进来变量的值`。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n\n上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是\\*Rect，结构体遇到指针的时候，你`不需要使用*去访问结构体的成员`，直接使用`.`引用就可以了。所以上面的例子中我们直接使用`rect.width=100` 和`rect.length=200`来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为`*Rect`。\n\n其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为`Rect`也是可以的。如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect Rect) area() float64 {\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(\"Width:\", rect.width, \"Length:\", rect.length,\n    \"Area:\", rect.area())\n}\n```\n这里Go足够聪明，所以rect.area()也是可以的。\n\n至于`使不使用结构体指针和使不使用指针的出发点是一样的`，那就是`你是否试图在函数内部改变传递进来的参数的值`。再举个例子如下：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Rect struct {\n  width, length float64\n}\n\nfunc (rect *Rect) double_area() float64 {\n  rect.width *= 2\n  rect.length *= 2\n  return rect.width * rect.length\n}\n\nfunc main() {\n  var rect = new(Rect)\n  rect.width = 100\n  rect.length = 200\n  fmt.Println(*rect)\n  fmt.Println(\"Double Width:\", rect.width, \"Double Length:\", rect.length,\n    \"Double Area:\", rect.double_area())\n  fmt.Println(*rect)\n}\n```\n这个例子的输出是：\n\n\t{100 200}\n\tDouble Width: 200 Double Length: 400 Double Area: 80000\n\t{200 400}\n\n\n## **结构体内嵌类型**\n\n我们可以在一个`结构体内部定义另外一个结构体类型的成员`。例如iPhone也是Phone，我们看下例子：\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  phone Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.phone.price = 5000\n  p.phone.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.phone.price)\n  fmt.Println(\"Color:\", p.phone.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是`“iPhone也是(is-a)Phone”`，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是`“iPhone有一个(has-a)Phone”`，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n}\n```\n输出结果为\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\n在这个例子中，我们定义IPhone结构体的时候，`不再定义Phone变量`，`直接把结构体Phone类型定义在那里`。然后IPhone就可以`像访问直接定义在自己结构体里面的成员一样访问Phone的成员`。\n\n上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。\n\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone struct {\n  price int\n  color string\n}\n\nfunc (phone Phone) ringing() {\n  fmt.Println(\"Phone is ringing...\")\n}\n\ntype IPhone struct {\n  Phone\n  model string\n}\n\nfunc main() {\n  var p IPhone\n  p.price = 5000\n  p.color = \"Black\"\n  p.model = \"iPhone 5\"\n  fmt.Println(\"I have a iPhone:\")\n  fmt.Println(\"Price:\", p.price)\n  fmt.Println(\"Color:\", p.color)\n  fmt.Println(\"Model:\", p.model)\n\n  p.ringing()\n}\n```\n输出结果为：\n\n\tI have a iPhone:\n\tPrice: 5000\n\tColor: Black\n\tModel: iPhone 5\n\tPhone is ringing...\n\n\n## **接口**\n\n我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\nfunc main() {\n  var nokia NokiaPhone\n  nokia.call()\n\n  var iPhone IPhone\n  iPhone.call()\n}\n```\n我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。\n\n再仔细看一下`接口的定义`，首先是关键字`type`，然后是`接口名称`，最后是关键字`interface`表示这个类型是接口类型。`在接口类型里面，我们定义了一组方法`。\n\nGo语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，`任何其他类型只要实现了这些方法就是实现了这个接口`，`不一定非要显式地声明`要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n}\n\ntype NokiaPhone struct {\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\n\ntype IPhone struct {\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc main() {\n  var phone Phone\n\n  phone = new(NokiaPhone)\n  phone.call()\n\n  phone = new(IPhone)\n  phone.call()\n\n}\n```\n在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：\n\n\tI am Nokia, I can call you!\n\tI am iPhone, I can call you!\n\n以前我们说过，`Go语言式静态类型语言，变量的类型在运行过程中不能改变`。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？\n\n原来，在Go语言里面，`一个类型A只要实现了接口X所定义的全部方法`，那么`A类型的变量`也是`X类型的变量`。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。\n\n我们为Phone添加一个方法sales()，再来熟悉一下接口用法。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  call()\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) call() {\n  fmt.Println(\"I am Nokia, I can call you!\")\n}\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) call() {\n  fmt.Println(\"I am iPhone, I can call you!\")\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\nfunc main() {\n  var phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var totalSales = 0\n  for _, phone := range phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}\n```\t\n输出结果：\n\n\t14200\n\n上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。\n\n接口类型还可以作为结构体的数据成员。\n\n假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。\n```go\npackage main\n\nimport (\n  \"fmt\"\n)\n\ntype Phone interface {\n  sales() int\n}\n\ntype NokiaPhone struct {\n  price int\n}\n\nfunc (nokiaPhone NokiaPhone) sales() int {\n  return nokiaPhone.price\n}\n\ntype IPhone struct {\n  price int\n}\n\nfunc (iPhone IPhone) sales() int {\n  return iPhone.price\n}\n\ntype Person struct {\n  phones []Phone\n  name   string\n  age    int\n}\n\nfunc (person Person) total_cost() int {\n  var sum = 0\n  for _, phone := range person.phones {\n    sum += phone.sales()\n  }\n  return sum\n}\n\nfunc main() {\n  var bought_phones = [5]Phone{\n    NokiaPhone{price: 350},\n    IPhone{price: 5000},\n    IPhone{price: 3400},\n    NokiaPhone{price: 450},\n    IPhone{price: 5000},\n  }\n\n  var person = Person{name: \"Jemy\", age: 25, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}\n```\t\n这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：\n\n\tJemy\n\t25\n\t14200\n\t\n## **小结**\n\nGo的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。","slug":"go指针和结构体","published":1,"updated":"2020-01-09T20:21:18.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qw000vbica6vs2higw","content":"<blockquote>\n<p>原文地址: <a href=\"https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md\" target=\"_blank\" rel=\"noopener\">jemygraw/TechDoc</a></p>\n</blockquote>\n<p>基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。</p>\n<h2 id=\"结构体定义\"><a href=\"#结构体定义\" class=\"headerlink\" title=\"结构体定义\"></a><strong>结构体定义</strong></h2><p>上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。</p>\n<p>简单来讲，Go提供的<code>结构体</code>就是把<code>使用各种数据类型定义</code>的<code>不同变量组合起来</code>的<code>高级数据类型</code>。闲话不多说，看例子:</p>\n<pre><code>type Rect struct {\n    width float64\n    length float64\n}</code></pre><p>上面我们定义了一个矩形结构体，首先是关键是<code>type</code>表示要<code>定义一个新的数据类型了</code>，然后是新的数据类型名称<code>Rect</code>，最后是<code>struct</code>关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为<code>width和length的数据类型相同</code>，还可以写成如下格式：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<p>好了，来用结构体干点啥吧，计算一下矩形面积。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect Rect</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过<code>.</code>来访问内部的成员。包括<code>给内部成员赋值</code>和<code>读取内部成员值</code>。</p>\n<p>在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;width: <span class=\"number\">100</span>, length: <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>当然<code>如果你知道结构体成员定义的顺序</code>，也可以不使用<code>key:value</code>的方式赋值，<code>直接按照结构体成员定义的顺序给它们赋值</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"* Length:\"</span>,</span><br><span class=\"line\">    rect.length, <span class=\"string\">\"= Area:\"</span>, rect.width*rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>Width: 100 * Length: 200 = Area: 20000</code></pre><p><strong>结构体参数传递方式</strong></p>\n<p>我们说过，<code>Go函数的参数传递方式是值传递</code>，这句话<code>对结构体也是适用的</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">double_area</span><span class=\"params\">(rect Rect)</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\">  fmt.Println(double_area(rect))</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子输出为:</p>\n<pre><code>80000\nWidth: 100 Length: 200</code></pre><p>也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。</p>\n<h2 id=\"结构体组合函数\"><a href=\"#结构体组合函数\" class=\"headerlink\" title=\"结构体组合函数\"></a><strong>结构体组合函数</strong></h2><p>上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？</p>\n<p>确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。<code>Go使用组合函数的方式来为结构体定义结构体方法</code>。我们仔细看一下上面的area()函数定义。</p>\n<p>首先是关键字<code>func</code>表示这是一个函数，第二个参数是<code>结构体类型和实例变量</code>，第三个是<code>函数名称</code>，第四个是<code>函数返回值</code>。这里我们可以看出area()函数和普通函数定义的<code>区别就在于</code>area()函数<code>多了一个结构体类型限定</code>。这样一来Go就知道了这是一个为结构体定义的<code>方法</code>。</p>\n<p>这里需要注意一点就是<code>定义在结构体上面的函数(function)</code>一般叫做<code>方法(method)</code>。</p>\n<h2 id=\"结构体和指针\"><a href=\"#结构体和指针\" class=\"headerlink\" title=\"结构体和指针\"></a><strong>结构体和指针</strong></h2><p>我们在指针一节讲到过，<code>指针的主要作用就是在函数内部改变传递进来变量的值</code>。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是*Rect，结构体遇到指针的时候，你<code>不需要使用*去访问结构体的成员</code>，直接使用<code>.</code>引用就可以了。所以上面的例子中我们直接使用<code>rect.width=100</code> 和<code>rect.length=200</code>来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为<code>*Rect</code>。</p>\n<p>其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为<code>Rect</code>也是可以的。如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里Go足够聪明，所以rect.area()也是可以的。</p>\n<p>至于<code>使不使用结构体指针和使不使用指针的出发点是一样的</code>，那就是<code>你是否试图在函数内部改变传递进来的参数的值</code>。再举个例子如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">double_area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Double Width:\"</span>, rect.width, <span class=\"string\">\"Double Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Double Area:\"</span>, rect.double_area())</span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这个例子的输出是：</p>\n<pre><code>{100 200}\nDouble Width: 200 Double Length: 400 Double Area: 80000\n{200 400}</code></pre><h2 id=\"结构体内嵌类型\"><a href=\"#结构体内嵌类型\" class=\"headerlink\" title=\"结构体内嵌类型\"></a><strong>结构体内嵌类型</strong></h2><p>我们可以在一个<code>结构体内部定义另外一个结构体类型的成员</code>。例如iPhone也是Phone，我们看下例子：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  phone Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.phone.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.phone.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.phone.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.phone.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是<code>“iPhone也是(is-a)Phone”</code>，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是<code>“iPhone有一个(has-a)Phone”</code>，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在这个例子中，我们定义IPhone结构体的时候，<code>不再定义Phone变量</code>，<code>直接把结构体Phone类型定义在那里</code>。然后IPhone就可以<code>像访问直接定义在自己结构体里面的成员一样访问Phone的成员</code>。</p>\n<p>上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(phone Phone)</span> <span class=\"title\">ringing</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Phone is ringing...\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\"></span><br><span class=\"line\">  p.ringing()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为：</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5\nPhone is ringing...</code></pre><h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a><strong>接口</strong></h2><p>我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> nokia NokiaPhone</span><br><span class=\"line\">  nokia.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> iPhone IPhone</span><br><span class=\"line\">  iPhone.call()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。</p>\n<p>再仔细看一下<code>接口的定义</code>，首先是关键字<code>type</code>，然后是<code>接口名称</code>，最后是关键字<code>interface</code>表示这个类型是接口类型。<code>在接口类型里面，我们定义了一组方法</code>。</p>\n<p>Go语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，<code>任何其他类型只要实现了这些方法就是实现了这个接口</code>，<code>不一定非要显式地声明</code>要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  call()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> phone Phone</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(NokiaPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(IPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：</p>\n<pre><code>I am Nokia, I can call you!\nI am iPhone, I can call you!</code></pre><p>以前我们说过，<code>Go语言式静态类型语言，变量的类型在运行过程中不能改变</code>。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？</p>\n<p>原来，在Go语言里面，<code>一个类型A只要实现了接口X所定义的全部方法</code>，那么<code>A类型的变量</code>也是<code>X类型的变量</code>。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。</p>\n<p>我们为Phone添加一个方法sales()，再来熟悉一下接口用法。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  call()\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)\n}\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> totalSales = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}</code></pre>\n<p>输出结果：</p>\n<pre><code>14200</code></pre><p>上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。</p>\n<p>接口类型还可以作为结构体的数据成员。</p>\n<p>假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"keyword\">type</span> Person <span class=\"keyword\">struct</span> {\n  phones []Phone\n  name   <span class=\"keyword\">string</span>\n  age    <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(person Person)</span> <span class=\"title\">total_cost</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> person.phones {\n    sum += phone.sales()\n  }\n  <span class=\"keyword\">return</span> sum\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> bought_phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> person = Person{name: <span class=\"string\">\"Jemy\"</span>, age: <span class=\"number\">25</span>, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}</code></pre>\n<p>这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：</p>\n<pre><code>Jemy\n25\n14200</code></pre><h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a><strong>小结</strong></h2><p>Go的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>原文地址: <a href=\"https://github.com/jemygraw/TechDoc/blob/master/Go%E8%BD%BB%E6%9D%BE%E5%AD%A6/go_tutorial_8_struct_interface.md\" target=\"_blank\" rel=\"noopener\">jemygraw/TechDoc</a></p>\n</blockquote>\n<p>基本上到这里的时候，就是上了一个台阶了。Go的精华特点即将展开。</p>\n<h2 id=\"结构体定义\"><a href=\"#结构体定义\" class=\"headerlink\" title=\"结构体定义\"></a><strong>结构体定义</strong></h2><p>上面我们说过Go的指针和C的不同，结构体也是一样的。Go是一门删繁就简的语言，一切令人困惑的特性都必须去掉。</p>\n<p>简单来讲，Go提供的<code>结构体</code>就是把<code>使用各种数据类型定义</code>的<code>不同变量组合起来</code>的<code>高级数据类型</code>。闲话不多说，看例子:</p>\n<pre><code>type Rect struct {\n    width float64\n    length float64\n}</code></pre><p>上面我们定义了一个矩形结构体，首先是关键是<code>type</code>表示要<code>定义一个新的数据类型了</code>，然后是新的数据类型名称<code>Rect</code>，最后是<code>struct</code>关键字，表示这个高级数据类型是结构体类型。在上面的例子中，因为<code>width和length的数据类型相同</code>，还可以写成如下格式：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","more":"<p>好了，来用结构体干点啥吧，计算一下矩形面积。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect Rect</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>从上面的例子看到，其实结构体类型和基础数据类型使用方式差不多，唯一的区别就是结构体类型可以通过<code>.</code>来访问内部的成员。包括<code>给内部成员赋值</code>和<code>读取内部成员值</code>。</p>\n<p>在上面的例子中，我们是用var关键字先定义了一个Rect变量，然后对它的成员赋值。我们也可以使用初始化的方式来给Rect变量的内部成员赋值。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;width: <span class=\"number\">100</span>, length: <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(rect.width * rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>当然<code>如果你知道结构体成员定义的顺序</code>，也可以不使用<code>key:value</code>的方式赋值，<code>直接按照结构体成员定义的顺序给它们赋值</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"* Length:\"</span>,</span><br><span class=\"line\">    rect.length, <span class=\"string\">\"= Area:\"</span>, rect.width*rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>Width: 100 * Length: 200 = Area: 20000</code></pre><p><strong>结构体参数传递方式</strong></p>\n<p>我们说过，<code>Go函数的参数传递方式是值传递</code>，这句话<code>对结构体也是适用的</code>。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">double_area</span><span class=\"params\">(rect Rect)</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\">  fmt.Println(double_area(rect))</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子输出为:</p>\n<pre><code>80000\nWidth: 100 Length: 200</code></pre><p>也就说虽然在double_area函数里面我们将结构体的宽度和长度都加倍，但仍然没有影响main函数里面的rect变量的宽度和长度。</p>\n<h2 id=\"结构体组合函数\"><a href=\"#结构体组合函数\" class=\"headerlink\" title=\"结构体组合函数\"></a><strong>结构体组合函数</strong></h2><p>上面我们在main函数中计算了矩形的面积，但是我们觉得矩形的面积如果能够作为矩形结构体的“内部函数”提供会更好。这样我们就可以直接说这个矩形面积是多少，而不用另外去取宽度和长度去计算。现在我们看看结构体“内部函数”定义方法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = Rect&#123;<span class=\"number\">100</span>, <span class=\"number\">200</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>咦？这个是什么“内部方法”，根本没有定义在Rect数据类型的内部啊？</p>\n<p>确实如此，我们看到，虽然main函数中的rect变量可以直接调用函数area()来获取矩形面积，但是area()函数确实没有定义在Rect结构体内部，这点和C语言的有很大不同。<code>Go使用组合函数的方式来为结构体定义结构体方法</code>。我们仔细看一下上面的area()函数定义。</p>\n<p>首先是关键字<code>func</code>表示这是一个函数，第二个参数是<code>结构体类型和实例变量</code>，第三个是<code>函数名称</code>，第四个是<code>函数返回值</code>。这里我们可以看出area()函数和普通函数定义的<code>区别就在于</code>area()函数<code>多了一个结构体类型限定</code>。这样一来Go就知道了这是一个为结构体定义的<code>方法</code>。</p>\n<p>这里需要注意一点就是<code>定义在结构体上面的函数(function)</code>一般叫做<code>方法(method)</code>。</p>\n<h2 id=\"结构体和指针\"><a href=\"#结构体和指针\" class=\"headerlink\" title=\"结构体和指针\"></a><strong>结构体和指针</strong></h2><p>我们在指针一节讲到过，<code>指针的主要作用就是在函数内部改变传递进来变量的值</code>。对于上面的计算矩形面积的例子，我们可以修改一下代码如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面的例子中，使用了new函数来创建一个结构体指针rect，也就是说rect的类型是*Rect，结构体遇到指针的时候，你<code>不需要使用*去访问结构体的成员</code>，直接使用<code>.</code>引用就可以了。所以上面的例子中我们直接使用<code>rect.width=100</code> 和<code>rect.length=200</code>来设置结构体成员值。因为这个时候rect是结构体指针，所以我们定义area()函数的时候结构体限定类型为<code>*Rect</code>。</p>\n<p>其实在计算面积的这个例子中，我们不需要改变矩形的宽或者长度，所以定义area函数的时候结构体限定类型仍然为<code>Rect</code>也是可以的。如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect Rect)</span> <span class=\"title\">area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Width:\"</span>, rect.width, <span class=\"string\">\"Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Area:\"</span>, rect.area())</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这里Go足够聪明，所以rect.area()也是可以的。</p>\n<p>至于<code>使不使用结构体指针和使不使用指针的出发点是一样的</code>，那就是<code>你是否试图在函数内部改变传递进来的参数的值</code>。再举个例子如下：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Rect <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  width, length <span class=\"keyword\">float64</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(rect *Rect)</span> <span class=\"title\">double_area</span><span class=\"params\">()</span> <span class=\"title\">float64</span></span> &#123;</span><br><span class=\"line\">  rect.width *= <span class=\"number\">2</span></span><br><span class=\"line\">  rect.length *= <span class=\"number\">2</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> rect.width * rect.length</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rect = <span class=\"built_in\">new</span>(Rect)</span><br><span class=\"line\">  rect.width = <span class=\"number\">100</span></span><br><span class=\"line\">  rect.length = <span class=\"number\">200</span></span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Double Width:\"</span>, rect.width, <span class=\"string\">\"Double Length:\"</span>, rect.length,</span><br><span class=\"line\">    <span class=\"string\">\"Double Area:\"</span>, rect.double_area())</span><br><span class=\"line\">  fmt.Println(*rect)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这个例子的输出是：</p>\n<pre><code>{100 200}\nDouble Width: 200 Double Length: 400 Double Area: 80000\n{200 400}</code></pre><h2 id=\"结构体内嵌类型\"><a href=\"#结构体内嵌类型\" class=\"headerlink\" title=\"结构体内嵌类型\"></a><strong>结构体内嵌类型</strong></h2><p>我们可以在一个<code>结构体内部定义另外一个结构体类型的成员</code>。例如iPhone也是Phone，我们看下例子：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  phone Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.phone.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.phone.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.phone.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.phone.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在上面的例子中，我们在结构体IPhone里面定义了一个Phone变量phone，然后我们可以像正常的访问结构体成员一样访问phone的成员数据。但是我们原来的意思是<code>“iPhone也是(is-a)Phone”</code>，而这里的结构体IPhone里面定义了一个phone变量，给人的感觉就是<code>“iPhone有一个(has-a)Phone”</code>，挺奇怪的。当然Go也知道这种方式很奇怪，所以支持如下做法：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5</code></pre><p>在这个例子中，我们定义IPhone结构体的时候，<code>不再定义Phone变量</code>，<code>直接把结构体Phone类型定义在那里</code>。然后IPhone就可以<code>像访问直接定义在自己结构体里面的成员一样访问Phone的成员</code>。</p>\n<p>上面的例子中，我们演示了结构体的内嵌类型以及内嵌类型的成员访问，除此之外，假设结构体A内部定义了一个内嵌结构体B，那么A同时也可以调用所有定义在B上面的函数。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  price <span class=\"keyword\">int</span></span><br><span class=\"line\">  color <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(phone Phone)</span> <span class=\"title\">ringing</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Phone is ringing...\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">  Phone</span><br><span class=\"line\">  model <span class=\"keyword\">string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> p IPhone</span><br><span class=\"line\">  p.price = <span class=\"number\">5000</span></span><br><span class=\"line\">  p.color = <span class=\"string\">\"Black\"</span></span><br><span class=\"line\">  p.model = <span class=\"string\">\"iPhone 5\"</span></span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I have a iPhone:\"</span>)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Price:\"</span>, p.price)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Color:\"</span>, p.color)</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"Model:\"</span>, p.model)</span><br><span class=\"line\"></span><br><span class=\"line\">  p.ringing()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>输出结果为：</p>\n<pre><code>I have a iPhone:\nPrice: 5000\nColor: Black\nModel: iPhone 5\nPhone is ringing...</code></pre><h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a><strong>接口</strong></h2><p>我们先看一个例子，关于Nokia手机和iPhone手机都能够打电话的例子。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> nokia NokiaPhone</span><br><span class=\"line\">  nokia.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> iPhone IPhone</span><br><span class=\"line\">  iPhone.call()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>我们定义了NokiaPhone和IPhone，它们都有各自的方法call()，表示自己都能够打电话。但是我们想一想，是手机都应该能够打电话，所以这个不算是NokiaPhone或是IPhone的独特特点。否则iPhone不可能卖这么贵了。</p>\n<p>再仔细看一下<code>接口的定义</code>，首先是关键字<code>type</code>，然后是<code>接口名称</code>，最后是关键字<code>interface</code>表示这个类型是接口类型。<code>在接口类型里面，我们定义了一组方法</code>。</p>\n<p>Go语言提供了一种接口功能，它把所有的具有共性的方法定义在一起，<code>任何其他类型只要实现了这些方法就是实现了这个接口</code>，<code>不一定非要显式地声明</code>要去实现哪些接口啦。比如上面的手机的call()方法，就完全可以定义在接口Phone里面，而NokiaPhone和IPhone只要实现了这个接口就是一个Phone。</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">  call()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> phone Phone</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(NokiaPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">  phone = <span class=\"built_in\">new</span>(IPhone)</span><br><span class=\"line\">  phone.call()</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的例子中，我们定义了一个接口Phone，接口里面有一个方法call()，仅此而已。然后我们在main函数里面定义了一个Phone类型变量，并分别为之赋值为NokiaPhone和IPhone。然后调用call()方法，输出结果如下：</p>\n<pre><code>I am Nokia, I can call you!\nI am iPhone, I can call you!</code></pre><p>以前我们说过，<code>Go语言式静态类型语言，变量的类型在运行过程中不能改变</code>。但是在上面的例子中，phone变量好像先定义为Phone类型，然后是NokiaPhone类型，最后成为了IPhone类型，真的是这样吗？</p>\n<p>原来，在Go语言里面，<code>一个类型A只要实现了接口X所定义的全部方法</code>，那么<code>A类型的变量</code>也是<code>X类型的变量</code>。在上面的例子中，NokiaPhone和IPhone都实现了Phone接口的call()方法，所以它们都是Phone，这样一来是不是感觉正常了一些。</p>\n<p>我们为Phone添加一个方法sales()，再来熟悉一下接口用法。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  call()\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am Nokia, I can call you!\"</span>)\n}\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> {\n  fmt.Println(<span class=\"string\">\"I am iPhone, I can call you!\"</span>)\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> totalSales = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> phones {\n    totalSales += phone.sales()\n  }\n  fmt.Println(totalSales)\n\n}</code></pre>\n<p>输出结果：</p>\n<pre><code>14200</code></pre><p>上面的例子中，我们定义了一个手机数组，然后计算手机的总售价。可以看到，由于NokiaPhone和IPhone都实现了sales()方法，所以它们都是Phone类型，但是计算售价的时候，Go会知道调用哪个对象实现的方法。</p>\n<p>接口类型还可以作为结构体的数据成员。</p>\n<p>假设有个败家子，iPhone没有出的时候，买了好几款Nokia，iPhone出来后，又买了好多部iPhone，老爸要来看看这小子一共花了多少钱。</p>\n<pre><code class=\"go\"><span class=\"keyword\">package</span> main\n\n<span class=\"keyword\">import</span> (\n  <span class=\"string\">\"fmt\"</span>\n)\n\n<span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> {\n  sales() <span class=\"keyword\">int</span>\n}\n\n<span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> nokiaPhone.price\n}\n\n<span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> {\n  price <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">sales</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">return</span> iPhone.price\n}\n\n<span class=\"keyword\">type</span> Person <span class=\"keyword\">struct</span> {\n  phones []Phone\n  name   <span class=\"keyword\">string</span>\n  age    <span class=\"keyword\">int</span>\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(person Person)</span> <span class=\"title\">total_cost</span><span class=\"params\">()</span> <span class=\"title\">int</span></span> {\n  <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>\n  <span class=\"keyword\">for</span> _, phone := <span class=\"keyword\">range</span> person.phones {\n    sum += phone.sales()\n  }\n  <span class=\"keyword\">return</span> sum\n}\n\n<span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> {\n  <span class=\"keyword\">var</span> bought_phones = [<span class=\"number\">5</span>]Phone{\n    NokiaPhone{price: <span class=\"number\">350</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n    IPhone{price: <span class=\"number\">3400</span>},\n    NokiaPhone{price: <span class=\"number\">450</span>},\n    IPhone{price: <span class=\"number\">5000</span>},\n  }\n\n  <span class=\"keyword\">var</span> person = Person{name: <span class=\"string\">\"Jemy\"</span>, age: <span class=\"number\">25</span>, phones: bought_phones[:]}\n\n  fmt.Println(person.name)\n  fmt.Println(person.age)\n  fmt.Println(person.total_cost())\n}</code></pre>\n<p>这个例子纯为演示接口作为结构体数据成员，如有雷同，纯属巧合。这里面我们定义了一个Person结构体，结构体内部定义了一个手机类型切片。另外我们定义了Person的total_cost()方法用来计算手机花费总额。输出结果如下：</p>\n<pre><code>Jemy\n25\n14200</code></pre><h2 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a><strong>小结</strong></h2><p>Go的结构体和接口的实现方法可谓删繁就简，去除了很多别的语言令人困惑的地方，而且学习难度也不大，很容易上手。不过由于思想比较独到，也有可能会有人觉得功能太简单而无用，这个就各有看法了，不过在逐渐的使用过程中，我们会慢慢领悟到这种设计所带来的好处，以及所避免的问题。</p>"},{"title":"Go 编码基本规范","date":"2017-10-13T05:29:20.000Z","_content":"## 声明空的切片 (Slices)\n相对于 `t := []string{}` 更推崇 `var t []string`\n\n前者是 `non-nil`, 但是长度为0, 而后者声明了一个 `nil` 的 `slice`. 都能实现相应的功能 ( 函数 `len` 和 `cap` 都为 0 ), 但应该首选 `nil` `slice`\n\n只有在特定的情况下, 选择 `non-nil` 但长度为 0 的 `slice`\n\n* 编码 JSON 对象的时候\n  > `nil slice` 编码为 `null`, 而 `[]string{}` 编码为 JSON 数组 `[]`\n\n设计接口时, 不区分两者的区别, 可能导致微妙的编程错误\n\n## Crypto Rand\n即便使用一次, 也不要使用 `math/rand` 生成键.\n\n使用 `crypto/rand` 的 Reader:\n```go\nimport (\n  \"crypto/rand\"\n  // \"encoding/base64\"\n  // \"encoding/hex\"\n  \"fmt\"\n)\n\nfunc Key() string{\n  buf := make([]byte, 16)\n  _, err = rand.Read(buf)\n  if err != nil {\n    panic(err)\n  }\n  return fmt.Sprintf(\"%x\", buf)\n  // or hex.EncodeToString(buf)\n  // or base64.StdEncoding.EncodeToString(buf)\n}\n```\n\n## Imports\n避免重命名导入从而避免名称冲突; 如果发生冲突, 最好重命名本地或特殊项目的导入包.\n\n导入时, 应组织分组, 之间添加空行. 标准库的包总在第一组内.\n```go\npackage main\n\nimport (\n  \"fmt\"\n  \"hash/adler32\"\n  \"os\"\n\n  \"appengine/foo\"\n  \"appengine/user\"\n\n  \"code.google.com/p/x/y\"\n  \"github.com/foo/bar\"\n)\n```\n\n## Import 三种方式\n1. 点操作\n    `import( . \"fmt\")`\n    > 这个点操作的含义就是这个包导入之后在你调用这个包的函数时，你可以省略前缀的包名，也就是前面你调用的 `fmt.Println(\"hello world\")` 可以省略的写成 `Println(\"hello world\")`\n2. 别名操作 ( 别名操作顾名思义可以把包命名成另一个用起来容易记忆的名字 )\n    > `import( f \"fmt\" )`   别名操作调用包函数时前缀变成了重命名的前缀，即 `f.Println(\"hello world\")`\n3. _操作   这个操作经常是让很多人费解的一个操作符，请看下面这个import\n    ```go\n    import (\n      \"database/sql\"\n      _ \"github.com/ziutek/mymysql/godrv\"\n    )\n    ```\n    > `_` 操作其实只是引入该包. 当导入一个包时, 它所有的 `init()` 函数就会被执行，但有些时候并非真的需要使用这些包, 仅仅是希望它的 `init()` 函数被执行而已. 这个时候就可以使用_操作引用该包了. 即使用_操作引用包是无法通过包名来调用包中的导出函数, 而是只是为了简单的调用其init函数(). \n\n## Import Dot\n`import .` 的形式可以用于测试场景, 由于循环依赖, 不能成为被测试包的一部分\n```go\npackage foo_test\n\nimport (\n\t\"bar/testutil\" // 同样也 import \"foo\"\n\t. \"foo\"\n)\n```\n这种情况下, 由于 `bar/testtuil` 包中导入了 `foo`, 所以 `foo_test` 不能再次包含 `foo` 这个包. 所以我们使用 `import .` 的形式. 除了这种情况外, 不要使用 `import .`. 它让程序更难阅读.\n\n## 接口\n","source":"_posts/go编码基本规范.md","raw":"---\ntitle: Go 编码基本规范\ndate: 2017-10-13 13:29:20\ncategories: [go]\n---\n## 声明空的切片 (Slices)\n相对于 `t := []string{}` 更推崇 `var t []string`\n\n前者是 `non-nil`, 但是长度为0, 而后者声明了一个 `nil` 的 `slice`. 都能实现相应的功能 ( 函数 `len` 和 `cap` 都为 0 ), 但应该首选 `nil` `slice`\n\n只有在特定的情况下, 选择 `non-nil` 但长度为 0 的 `slice`\n\n* 编码 JSON 对象的时候\n  > `nil slice` 编码为 `null`, 而 `[]string{}` 编码为 JSON 数组 `[]`\n\n设计接口时, 不区分两者的区别, 可能导致微妙的编程错误\n\n## Crypto Rand\n即便使用一次, 也不要使用 `math/rand` 生成键.\n\n使用 `crypto/rand` 的 Reader:\n```go\nimport (\n  \"crypto/rand\"\n  // \"encoding/base64\"\n  // \"encoding/hex\"\n  \"fmt\"\n)\n\nfunc Key() string{\n  buf := make([]byte, 16)\n  _, err = rand.Read(buf)\n  if err != nil {\n    panic(err)\n  }\n  return fmt.Sprintf(\"%x\", buf)\n  // or hex.EncodeToString(buf)\n  // or base64.StdEncoding.EncodeToString(buf)\n}\n```\n\n## Imports\n避免重命名导入从而避免名称冲突; 如果发生冲突, 最好重命名本地或特殊项目的导入包.\n\n导入时, 应组织分组, 之间添加空行. 标准库的包总在第一组内.\n```go\npackage main\n\nimport (\n  \"fmt\"\n  \"hash/adler32\"\n  \"os\"\n\n  \"appengine/foo\"\n  \"appengine/user\"\n\n  \"code.google.com/p/x/y\"\n  \"github.com/foo/bar\"\n)\n```\n\n## Import 三种方式\n1. 点操作\n    `import( . \"fmt\")`\n    > 这个点操作的含义就是这个包导入之后在你调用这个包的函数时，你可以省略前缀的包名，也就是前面你调用的 `fmt.Println(\"hello world\")` 可以省略的写成 `Println(\"hello world\")`\n2. 别名操作 ( 别名操作顾名思义可以把包命名成另一个用起来容易记忆的名字 )\n    > `import( f \"fmt\" )`   别名操作调用包函数时前缀变成了重命名的前缀，即 `f.Println(\"hello world\")`\n3. _操作   这个操作经常是让很多人费解的一个操作符，请看下面这个import\n    ```go\n    import (\n      \"database/sql\"\n      _ \"github.com/ziutek/mymysql/godrv\"\n    )\n    ```\n    > `_` 操作其实只是引入该包. 当导入一个包时, 它所有的 `init()` 函数就会被执行，但有些时候并非真的需要使用这些包, 仅仅是希望它的 `init()` 函数被执行而已. 这个时候就可以使用_操作引用该包了. 即使用_操作引用包是无法通过包名来调用包中的导出函数, 而是只是为了简单的调用其init函数(). \n\n## Import Dot\n`import .` 的形式可以用于测试场景, 由于循环依赖, 不能成为被测试包的一部分\n```go\npackage foo_test\n\nimport (\n\t\"bar/testutil\" // 同样也 import \"foo\"\n\t. \"foo\"\n)\n```\n这种情况下, 由于 `bar/testtuil` 包中导入了 `foo`, 所以 `foo_test` 不能再次包含 `foo` 这个包. 所以我们使用 `import .` 的形式. 除了这种情况外, 不要使用 `import .`. 它让程序更难阅读.\n\n## 接口\n","slug":"go编码基本规范","published":1,"updated":"2020-01-09T20:21:18.093Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qy000xbica7buuts2j","content":"<h2 id=\"声明空的切片-Slices\"><a href=\"#声明空的切片-Slices\" class=\"headerlink\" title=\"声明空的切片 (Slices)\"></a>声明空的切片 (Slices)</h2><p>相对于 <code>t := []string{}</code> 更推崇 <code>var t []string</code></p>\n<p>前者是 <code>non-nil</code>, 但是长度为0, 而后者声明了一个 <code>nil</code> 的 <code>slice</code>. 都能实现相应的功能 ( 函数 <code>len</code> 和 <code>cap</code> 都为 0 ), 但应该首选 <code>nil</code> <code>slice</code></p>\n<p>只有在特定的情况下, 选择 <code>non-nil</code> 但长度为 0 的 <code>slice</code></p>\n<ul>\n<li>编码 JSON 对象的时候<blockquote>\n<p><code>nil slice</code> 编码为 <code>null</code>, 而 <code>[]string{}</code> 编码为 JSON 数组 <code>[]</code></p>\n</blockquote>\n</li>\n</ul>\n<p>设计接口时, 不区分两者的区别, 可能导致微妙的编程错误</p>\n<h2 id=\"Crypto-Rand\"><a href=\"#Crypto-Rand\" class=\"headerlink\" title=\"Crypto Rand\"></a>Crypto Rand</h2><p>即便使用一次, 也不要使用 <code>math/rand</code> 生成键.</p>\n<p>使用 <code>crypto/rand</code> 的 Reader:</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"crypto/rand\"</span></span><br><span class=\"line\">  <span class=\"comment\">// \"encoding/base64\"</span></span><br><span class=\"line\">  <span class=\"comment\">// \"encoding/hex\"</span></span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Key</span><span class=\"params\">()</span> <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">  buf := <span class=\"built_in\">make</span>([]<span class=\"keyword\">byte</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">  _, err = rand.Read(buf)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">panic</span>(err)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fmt.Sprintf(<span class=\"string\">\"%x\"</span>, buf)</span><br><span class=\"line\">  <span class=\"comment\">// or hex.EncodeToString(buf)</span></span><br><span class=\"line\">  <span class=\"comment\">// or base64.StdEncoding.EncodeToString(buf)</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Imports\"><a href=\"#Imports\" class=\"headerlink\" title=\"Imports\"></a>Imports</h2><p>避免重命名导入从而避免名称冲突; 如果发生冲突, 最好重命名本地或特殊项目的导入包.</p>\n<p>导入时, 应组织分组, 之间添加空行. 标准库的包总在第一组内.</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  <span class=\"string\">\"hash/adler32\"</span></span><br><span class=\"line\">  <span class=\"string\">\"os\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">\"appengine/foo\"</span></span><br><span class=\"line\">  <span class=\"string\">\"appengine/user\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">\"code.google.com/p/x/y\"</span></span><br><span class=\"line\">  <span class=\"string\">\"github.com/foo/bar\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Import-三种方式\"><a href=\"#Import-三种方式\" class=\"headerlink\" title=\"Import 三种方式\"></a>Import 三种方式</h2><ol>\n<li><p>点操作<br> <code>import( . &quot;fmt&quot;)</code></p>\n<blockquote>\n<p>这个点操作的含义就是这个包导入之后在你调用这个包的函数时，你可以省略前缀的包名，也就是前面你调用的 <code>fmt.Println(&quot;hello world&quot;)</code> 可以省略的写成 <code>Println(&quot;hello world&quot;)</code></p>\n</blockquote>\n</li>\n<li><p>别名操作 ( 别名操作顾名思义可以把包命名成另一个用起来容易记忆的名字 )</p>\n<blockquote>\n<p><code>import( f &quot;fmt&quot; )</code>   别名操作调用包函数时前缀变成了重命名的前缀，即 <code>f.Println(&quot;hello world&quot;)</code></p>\n</blockquote>\n</li>\n<li><p>_操作   这个操作经常是让很多人费解的一个操作符，请看下面这个import</p>\n <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"database/sql\"</span></span><br><span class=\"line\">  _ <span class=\"string\">\"github.com/ziutek/mymysql/godrv\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>_</code> 操作其实只是引入该包. 当导入一个包时, 它所有的 <code>init()</code> 函数就会被执行，但有些时候并非真的需要使用这些包, 仅仅是希望它的 <code>init()</code> 函数被执行而已. 这个时候就可以使用_操作引用该包了. 即使用_操作引用包是无法通过包名来调用包中的导出函数, 而是只是为了简单的调用其init函数(). </p>\n</blockquote>\n</li>\n</ol>\n<h2 id=\"Import-Dot\"><a href=\"#Import-Dot\" class=\"headerlink\" title=\"Import Dot\"></a>Import Dot</h2><p><code>import .</code> 的形式可以用于测试场景, 由于循环依赖, 不能成为被测试包的一部分</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> foo_test</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">\"bar/testutil\"</span> <span class=\"comment\">// 同样也 import \"foo\"</span></span><br><span class=\"line\">\t. <span class=\"string\">\"foo\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>这种情况下, 由于 <code>bar/testtuil</code> 包中导入了 <code>foo</code>, 所以 <code>foo_test</code> 不能再次包含 <code>foo</code> 这个包. 所以我们使用 <code>import .</code> 的形式. 除了这种情况外, 不要使用 <code>import .</code>. 它让程序更难阅读.</p>\n<h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"声明空的切片-Slices\"><a href=\"#声明空的切片-Slices\" class=\"headerlink\" title=\"声明空的切片 (Slices)\"></a>声明空的切片 (Slices)</h2><p>相对于 <code>t := []string{}</code> 更推崇 <code>var t []string</code></p>\n<p>前者是 <code>non-nil</code>, 但是长度为0, 而后者声明了一个 <code>nil</code> 的 <code>slice</code>. 都能实现相应的功能 ( 函数 <code>len</code> 和 <code>cap</code> 都为 0 ), 但应该首选 <code>nil</code> <code>slice</code></p>\n<p>只有在特定的情况下, 选择 <code>non-nil</code> 但长度为 0 的 <code>slice</code></p>\n<ul>\n<li>编码 JSON 对象的时候<blockquote>\n<p><code>nil slice</code> 编码为 <code>null</code>, 而 <code>[]string{}</code> 编码为 JSON 数组 <code>[]</code></p>\n</blockquote>\n</li>\n</ul>\n<p>设计接口时, 不区分两者的区别, 可能导致微妙的编程错误</p>\n<h2 id=\"Crypto-Rand\"><a href=\"#Crypto-Rand\" class=\"headerlink\" title=\"Crypto Rand\"></a>Crypto Rand</h2><p>即便使用一次, 也不要使用 <code>math/rand</code> 生成键.</p>\n<p>使用 <code>crypto/rand</code> 的 Reader:</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"crypto/rand\"</span></span><br><span class=\"line\">  <span class=\"comment\">// \"encoding/base64\"</span></span><br><span class=\"line\">  <span class=\"comment\">// \"encoding/hex\"</span></span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Key</span><span class=\"params\">()</span> <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">  buf := <span class=\"built_in\">make</span>([]<span class=\"keyword\">byte</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">  _, err = rand.Read(buf)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">panic</span>(err)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fmt.Sprintf(<span class=\"string\">\"%x\"</span>, buf)</span><br><span class=\"line\">  <span class=\"comment\">// or hex.EncodeToString(buf)</span></span><br><span class=\"line\">  <span class=\"comment\">// or base64.StdEncoding.EncodeToString(buf)</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Imports\"><a href=\"#Imports\" class=\"headerlink\" title=\"Imports\"></a>Imports</h2><p>避免重命名导入从而避免名称冲突; 如果发生冲突, 最好重命名本地或特殊项目的导入包.</p>\n<p>导入时, 应组织分组, 之间添加空行. 标准库的包总在第一组内.</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">  <span class=\"string\">\"hash/adler32\"</span></span><br><span class=\"line\">  <span class=\"string\">\"os\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">\"appengine/foo\"</span></span><br><span class=\"line\">  <span class=\"string\">\"appengine/user\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">\"code.google.com/p/x/y\"</span></span><br><span class=\"line\">  <span class=\"string\">\"github.com/foo/bar\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Import-三种方式\"><a href=\"#Import-三种方式\" class=\"headerlink\" title=\"Import 三种方式\"></a>Import 三种方式</h2><ol>\n<li><p>点操作<br> <code>import( . &quot;fmt&quot;)</code></p>\n<blockquote>\n<p>这个点操作的含义就是这个包导入之后在你调用这个包的函数时，你可以省略前缀的包名，也就是前面你调用的 <code>fmt.Println(&quot;hello world&quot;)</code> 可以省略的写成 <code>Println(&quot;hello world&quot;)</code></p>\n</blockquote>\n</li>\n<li><p>别名操作 ( 别名操作顾名思义可以把包命名成另一个用起来容易记忆的名字 )</p>\n<blockquote>\n<p><code>import( f &quot;fmt&quot; )</code>   别名操作调用包函数时前缀变成了重命名的前缀，即 <code>f.Println(&quot;hello world&quot;)</code></p>\n</blockquote>\n</li>\n<li><p>_操作   这个操作经常是让很多人费解的一个操作符，请看下面这个import</p>\n <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">  <span class=\"string\">\"database/sql\"</span></span><br><span class=\"line\">  _ <span class=\"string\">\"github.com/ziutek/mymysql/godrv\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>_</code> 操作其实只是引入该包. 当导入一个包时, 它所有的 <code>init()</code> 函数就会被执行，但有些时候并非真的需要使用这些包, 仅仅是希望它的 <code>init()</code> 函数被执行而已. 这个时候就可以使用_操作引用该包了. 即使用_操作引用包是无法通过包名来调用包中的导出函数, 而是只是为了简单的调用其init函数(). </p>\n</blockquote>\n</li>\n</ol>\n<h2 id=\"Import-Dot\"><a href=\"#Import-Dot\" class=\"headerlink\" title=\"Import Dot\"></a>Import Dot</h2><p><code>import .</code> 的形式可以用于测试场景, 由于循环依赖, 不能成为被测试包的一部分</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> foo_test</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">\"bar/testutil\"</span> <span class=\"comment\">// 同样也 import \"foo\"</span></span><br><span class=\"line\">\t. <span class=\"string\">\"foo\"</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<p>这种情况下, 由于 <code>bar/testtuil</code> 包中导入了 <code>foo</code>, 所以 <code>foo_test</code> 不能再次包含 <code>foo</code> 这个包. 所以我们使用 <code>import .</code> 的形式. 除了这种情况外, 不要使用 <code>import .</code>. 它让程序更难阅读.</p>\n<h2 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h2>"},{"title":"在 Visual Studio 中使用 gulp","date":"2016-10-28T09:37:22.000Z","_content":"\n## What is Gulp?\nGulp calls itself *the streaming build system*. No, this isn’t a replacement for build systems like msbuild or nant. In this case, we are talking about building the client side parts of our applications like JavaScript files, StyleSheets (CSS, SASS or LESS) and HTML files.\n\nThe basic idea with Gulp is that you use pipes to stream a set of data (usually files) through some kind of processing. As it turns out, it is pretty easy to use and is probably best described using an example.\n\n### Installing Node and Gulp\nIf you don’t already have it installed, [download and install node.js](http://nodejs.org/).\n\n> If you are using VS 2015 and ASP.NET 5, Visual Studio will install npm and gulp for you automatically.\n\nOnce node is installed, we need to install gulp using the node package manager (npm). From the command line, run\n```\nnpm install gulp -g\n```\n\n<!--more-->\n\n### Setting up your Visual Studio project\nRather than create a new sample project here, I’m going to use the [Hot Towel SPA template](http://www.johnpapa.net/hot-towel-angular/) from [John Papa](http://www.johnpapa.net/). First, I will create an new empty web application and then install the HotTowel.Angular nuget package.\n\n```\nInstall-Package HotTowel.Angular\n```\n\nI wanted to use this template as an example because it is a perfect candidate for Gulp. The application is written using AngularJS and the code is split across 14 different JS files. From a code maintenance / readability standpoint, it is definitely good to split the code into files like this. From an application loading performance standpoint however, loading 14 separate JS files is generally not a great idea.\n\n### Initializing our project for Gulp\nFirst, we need to create a package.json file in the root directory of the your project. We can do this by running npm init on the command line or simply creating a file with the following contents:\n\n```\n{\n\n   \"name\": \"YourProjectName\",\n\n   \"version\": \"1.0.0\"\n\n}\n```\n\nNext, we will install a few packages that we will use for this project. Run the following commands from the same folder that you added the `package.json` file.\n\n```\nnpm install gulp --save-dev\nnpm install gulp-concat --save-dev\nnpm install gulp-uglify --save-dev\nnpm install del --save-dev\n```\n\nNote, the --save-dev option here is telling node to add these packages to a devDependencies section in the package.json file and install the packages in a node_modules folder in the current folder . At any time, you or another developer on your team can re-install all the devDependencies by simply running **`npm install`**.\n\n> the gulpfile.js content can change whatever you want\n\nFinally, create a gulpfile.js file in the same folder.\n\n```\n// include plug-ins\nvar gulp = require('gulp');\nvar concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nvar del = require('del');\n\nvar config = {\n    //Include all js files but exclude any min.js files\n    src: ['app/**/*.js', '!app/**/*.min.js']\n}\n\n//delete the output file(s)\ngulp.task('clean', function () {\n    //del is an async function and not a gulp plugin (just standard nodejs)\n    //It returns a promise, so make sure you return that from this task function\n    //  so gulp knows when the delete is complete\n    return del(['app/all.min.js']);\n});\n\n// Combine and minify all files from the app folder\n// This tasks depends on the clean task which means gulp will ensure that the \n// Clean task is completed before running the scripts task.\ngulp.task('scripts', ['clean'], function () {\n\n    return gulp.src(config.src)\n      .pipe(uglify())\n      .pipe(concat('all.min.js'))\n      .pipe(gulp.dest('app/'));\n});\n\n//Set a default tasks\ngulp.task('default', ['scripts'], function () { });\n```\n\nNow, run gulp from the command line and you should see some output stating that scripts task is completed successfully.\n\nThis will have created an all.min.js file that contains minified JavaScript from all the js files in the app folder.\n\nNow we include all.min.js in the Visual Studio project and replace the 14 separate script includes with a single include to the new script.\n\n```\n<script src=\"app/all.min.js\"></script>\n```\n\n### Watching for changes\nWouldn’t it be nice gulp could automatically re-run the scripts task whenever we make a change any of our js files? Sure, we can do that!\n\nAdd the following to our `gulpfile.js`:\n\n```\ngulp.task('watch', function(){\n    return gulp.watch(config.src, ['scripts']);\n});\n```\n\nNow, if we run `gulp watch` from the command line, our new `watch` task will watch for changes to any of our js files. When a change is detected it will trigger the `scripts` task to execute, regenerating the all.min.js file.\n\nYou can learn more about gulp.watch [here](https://github.com/gulpjs/gulp/blob/master/docs/API.md#gulpwatchglob--opts-tasks-or-gulpwatchglob--opts-cb). Note that at this time, the built in gulp.watch has some bugs that stop it from watching new files. These should be fixed soon but in the mean time you might want to use use the popular [gulp-watch plugin](https://github.com/floatdrop/gulp-watch/blob/master/docs/readme.md#starting-tasks-on-events).\n\n### Integrating with Visual Studio\n\nSo far, we have been working primarily in the command line. It would be nice if we could integrate with our existing Visual Studio experience.\n\nLuckily, we can with the new [Task Runner Explorer](http://visualstudiogallery.msdn.microsoft.com/8e1b4368-4afb-467a-bc13-9650572db708) plugin. Once the plugin is installed, open the Task Runner Explorer from the View –> Other Windows –> Task Runner Explorer menu.\n\nThis window will show you all the tasks in the gulp file and allow you to bind those tasks to certain Visual Studio events. This way, we don’t need to remember to run the gulp tasks from the command line. The IDE can handle it for us.\n\nWhat I like to do is bind the `watch` task to the Solution Open event and bind the `scripts` task to the *Before Build* event.\n\nWith these bindings, we can make sure that all.min.js is correctly generated when we build the application and also regenerated anytime I make changes to the js files.\n\nThe Task Runner Explorer also shows the output of any running tasks. Here you can see the output from the watch task, which is always running in the background in this configuration.\n\n### Development vs Production\nTo simplify debugging, you may want to include all your individual scripts in a development build and only include the single concatenated/minified script in your production build. Take a look at my post on [Web Optimization in ASP.NET Core MVC](http://www.davepaquette.com/archive/2015/05/05/web-optimization-development-and-production-in-asp-net-mvc6.aspx) for some ideas on how to this can be accomplished. That post covers ASP.NET Core MVC but a similar approach could be used in MVC 5. With the following in your cshtml file, the individual files would be included when debug=”true” is set in your web.config. If debug=”false”, then only the single concatenated/minified file is included.\n\n```\n@if (HttpContext.Current.IsDebuggingEnabled)\n{\n    <!-- Bootstrapping -->\n    <script src=\"app/app.js\"></script>\n    <script src=\"app/config.js\"></script>\n    <script src=\"app/config.exceptionHandler.js\"></script>\n    <script src=\"app/config.route.js\"></script>\n\n    <!-- common Modules -->\n    <script src=\"app/common/common.js\"></script>\n    <script src=\"app/common/logger.js\"></script>\n    <script src=\"app/common/spinner.js\"></script>\n\n    <!-- common.bootstrap Modules -->\n    <script src=\"app/common/bootstrap/bootstrap.dialog.js\"></script>\n\n    <!-- app -->\n    <script src=\"app/admin/admin.js\"></script>\n    <script src=\"app/dashboard/dashboard.js\"></script>\n    <script src=\"app/layout/shell.js\"></script>\n    <script src=\"app/layout/sidebar.js\"></script>\n\n    <!-- app Services -->\n    <script src=\"app/services/datacontext.js\"></script>\n    <script src=\"app/services/directives.js\"></script>\n}\nelse\n{\n    <script src=\"app/all.min.js\"></script>\n}\n```\n\nNote that this only works for cshtml files in an MVC application as it requires the Razor view engine.","source":"_posts/gulp_in_visualStudio.md","raw":"---\ntitle: 在 Visual Studio 中使用 gulp\ndate: 2016-10-28 17:37:22\ntags: [gulp, Visual Stduio]\n---\n\n## What is Gulp?\nGulp calls itself *the streaming build system*. No, this isn’t a replacement for build systems like msbuild or nant. In this case, we are talking about building the client side parts of our applications like JavaScript files, StyleSheets (CSS, SASS or LESS) and HTML files.\n\nThe basic idea with Gulp is that you use pipes to stream a set of data (usually files) through some kind of processing. As it turns out, it is pretty easy to use and is probably best described using an example.\n\n### Installing Node and Gulp\nIf you don’t already have it installed, [download and install node.js](http://nodejs.org/).\n\n> If you are using VS 2015 and ASP.NET 5, Visual Studio will install npm and gulp for you automatically.\n\nOnce node is installed, we need to install gulp using the node package manager (npm). From the command line, run\n```\nnpm install gulp -g\n```\n\n<!--more-->\n\n### Setting up your Visual Studio project\nRather than create a new sample project here, I’m going to use the [Hot Towel SPA template](http://www.johnpapa.net/hot-towel-angular/) from [John Papa](http://www.johnpapa.net/). First, I will create an new empty web application and then install the HotTowel.Angular nuget package.\n\n```\nInstall-Package HotTowel.Angular\n```\n\nI wanted to use this template as an example because it is a perfect candidate for Gulp. The application is written using AngularJS and the code is split across 14 different JS files. From a code maintenance / readability standpoint, it is definitely good to split the code into files like this. From an application loading performance standpoint however, loading 14 separate JS files is generally not a great idea.\n\n### Initializing our project for Gulp\nFirst, we need to create a package.json file in the root directory of the your project. We can do this by running npm init on the command line or simply creating a file with the following contents:\n\n```\n{\n\n   \"name\": \"YourProjectName\",\n\n   \"version\": \"1.0.0\"\n\n}\n```\n\nNext, we will install a few packages that we will use for this project. Run the following commands from the same folder that you added the `package.json` file.\n\n```\nnpm install gulp --save-dev\nnpm install gulp-concat --save-dev\nnpm install gulp-uglify --save-dev\nnpm install del --save-dev\n```\n\nNote, the --save-dev option here is telling node to add these packages to a devDependencies section in the package.json file and install the packages in a node_modules folder in the current folder . At any time, you or another developer on your team can re-install all the devDependencies by simply running **`npm install`**.\n\n> the gulpfile.js content can change whatever you want\n\nFinally, create a gulpfile.js file in the same folder.\n\n```\n// include plug-ins\nvar gulp = require('gulp');\nvar concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nvar del = require('del');\n\nvar config = {\n    //Include all js files but exclude any min.js files\n    src: ['app/**/*.js', '!app/**/*.min.js']\n}\n\n//delete the output file(s)\ngulp.task('clean', function () {\n    //del is an async function and not a gulp plugin (just standard nodejs)\n    //It returns a promise, so make sure you return that from this task function\n    //  so gulp knows when the delete is complete\n    return del(['app/all.min.js']);\n});\n\n// Combine and minify all files from the app folder\n// This tasks depends on the clean task which means gulp will ensure that the \n// Clean task is completed before running the scripts task.\ngulp.task('scripts', ['clean'], function () {\n\n    return gulp.src(config.src)\n      .pipe(uglify())\n      .pipe(concat('all.min.js'))\n      .pipe(gulp.dest('app/'));\n});\n\n//Set a default tasks\ngulp.task('default', ['scripts'], function () { });\n```\n\nNow, run gulp from the command line and you should see some output stating that scripts task is completed successfully.\n\nThis will have created an all.min.js file that contains minified JavaScript from all the js files in the app folder.\n\nNow we include all.min.js in the Visual Studio project and replace the 14 separate script includes with a single include to the new script.\n\n```\n<script src=\"app/all.min.js\"></script>\n```\n\n### Watching for changes\nWouldn’t it be nice gulp could automatically re-run the scripts task whenever we make a change any of our js files? Sure, we can do that!\n\nAdd the following to our `gulpfile.js`:\n\n```\ngulp.task('watch', function(){\n    return gulp.watch(config.src, ['scripts']);\n});\n```\n\nNow, if we run `gulp watch` from the command line, our new `watch` task will watch for changes to any of our js files. When a change is detected it will trigger the `scripts` task to execute, regenerating the all.min.js file.\n\nYou can learn more about gulp.watch [here](https://github.com/gulpjs/gulp/blob/master/docs/API.md#gulpwatchglob--opts-tasks-or-gulpwatchglob--opts-cb). Note that at this time, the built in gulp.watch has some bugs that stop it from watching new files. These should be fixed soon but in the mean time you might want to use use the popular [gulp-watch plugin](https://github.com/floatdrop/gulp-watch/blob/master/docs/readme.md#starting-tasks-on-events).\n\n### Integrating with Visual Studio\n\nSo far, we have been working primarily in the command line. It would be nice if we could integrate with our existing Visual Studio experience.\n\nLuckily, we can with the new [Task Runner Explorer](http://visualstudiogallery.msdn.microsoft.com/8e1b4368-4afb-467a-bc13-9650572db708) plugin. Once the plugin is installed, open the Task Runner Explorer from the View –> Other Windows –> Task Runner Explorer menu.\n\nThis window will show you all the tasks in the gulp file and allow you to bind those tasks to certain Visual Studio events. This way, we don’t need to remember to run the gulp tasks from the command line. The IDE can handle it for us.\n\nWhat I like to do is bind the `watch` task to the Solution Open event and bind the `scripts` task to the *Before Build* event.\n\nWith these bindings, we can make sure that all.min.js is correctly generated when we build the application and also regenerated anytime I make changes to the js files.\n\nThe Task Runner Explorer also shows the output of any running tasks. Here you can see the output from the watch task, which is always running in the background in this configuration.\n\n### Development vs Production\nTo simplify debugging, you may want to include all your individual scripts in a development build and only include the single concatenated/minified script in your production build. Take a look at my post on [Web Optimization in ASP.NET Core MVC](http://www.davepaquette.com/archive/2015/05/05/web-optimization-development-and-production-in-asp-net-mvc6.aspx) for some ideas on how to this can be accomplished. That post covers ASP.NET Core MVC but a similar approach could be used in MVC 5. With the following in your cshtml file, the individual files would be included when debug=”true” is set in your web.config. If debug=”false”, then only the single concatenated/minified file is included.\n\n```\n@if (HttpContext.Current.IsDebuggingEnabled)\n{\n    <!-- Bootstrapping -->\n    <script src=\"app/app.js\"></script>\n    <script src=\"app/config.js\"></script>\n    <script src=\"app/config.exceptionHandler.js\"></script>\n    <script src=\"app/config.route.js\"></script>\n\n    <!-- common Modules -->\n    <script src=\"app/common/common.js\"></script>\n    <script src=\"app/common/logger.js\"></script>\n    <script src=\"app/common/spinner.js\"></script>\n\n    <!-- common.bootstrap Modules -->\n    <script src=\"app/common/bootstrap/bootstrap.dialog.js\"></script>\n\n    <!-- app -->\n    <script src=\"app/admin/admin.js\"></script>\n    <script src=\"app/dashboard/dashboard.js\"></script>\n    <script src=\"app/layout/shell.js\"></script>\n    <script src=\"app/layout/sidebar.js\"></script>\n\n    <!-- app Services -->\n    <script src=\"app/services/datacontext.js\"></script>\n    <script src=\"app/services/directives.js\"></script>\n}\nelse\n{\n    <script src=\"app/all.min.js\"></script>\n}\n```\n\nNote that this only works for cshtml files in an MVC application as it requires the Razor view engine.","slug":"gulp_in_visualStudio","published":1,"updated":"2020-01-09T20:21:18.093Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8qz000zbicavflsxj5j","content":"<h2 id=\"What-is-Gulp\"><a href=\"#What-is-Gulp\" class=\"headerlink\" title=\"What is Gulp?\"></a>What is Gulp?</h2><p>Gulp calls itself <em>the streaming build system</em>. No, this isn’t a replacement for build systems like msbuild or nant. In this case, we are talking about building the client side parts of our applications like JavaScript files, StyleSheets (CSS, SASS or LESS) and HTML files.</p>\n<p>The basic idea with Gulp is that you use pipes to stream a set of data (usually files) through some kind of processing. As it turns out, it is pretty easy to use and is probably best described using an example.</p>\n<h3 id=\"Installing-Node-and-Gulp\"><a href=\"#Installing-Node-and-Gulp\" class=\"headerlink\" title=\"Installing Node and Gulp\"></a>Installing Node and Gulp</h3><p>If you don’t already have it installed, <a href=\"http://nodejs.org/\" target=\"_blank\" rel=\"noopener\">download and install node.js</a>.</p>\n<blockquote>\n<p>If you are using VS 2015 and ASP.NET 5, Visual Studio will install npm and gulp for you automatically.</p>\n</blockquote>\n<p>Once node is installed, we need to install gulp using the node package manager (npm). From the command line, run</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install gulp -g</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h3 id=\"Setting-up-your-Visual-Studio-project\"><a href=\"#Setting-up-your-Visual-Studio-project\" class=\"headerlink\" title=\"Setting up your Visual Studio project\"></a>Setting up your Visual Studio project</h3><p>Rather than create a new sample project here, I’m going to use the <a href=\"http://www.johnpapa.net/hot-towel-angular/\" target=\"_blank\" rel=\"noopener\">Hot Towel SPA template</a> from <a href=\"http://www.johnpapa.net/\" target=\"_blank\" rel=\"noopener\">John Papa</a>. First, I will create an new empty web application and then install the HotTowel.Angular nuget package.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Install-Package HotTowel.Angular</span><br></pre></td></tr></table></figure>\n\n<p>I wanted to use this template as an example because it is a perfect candidate for Gulp. The application is written using AngularJS and the code is split across 14 different JS files. From a code maintenance / readability standpoint, it is definitely good to split the code into files like this. From an application loading performance standpoint however, loading 14 separate JS files is generally not a great idea.</p>\n<h3 id=\"Initializing-our-project-for-Gulp\"><a href=\"#Initializing-our-project-for-Gulp\" class=\"headerlink\" title=\"Initializing our project for Gulp\"></a>Initializing our project for Gulp</h3><p>First, we need to create a package.json file in the root directory of the your project. We can do this by running npm init on the command line or simply creating a file with the following contents:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   &quot;name&quot;: &quot;YourProjectName&quot;,</span><br><span class=\"line\"></span><br><span class=\"line\">   &quot;version&quot;: &quot;1.0.0&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Next, we will install a few packages that we will use for this project. Run the following commands from the same folder that you added the <code>package.json</code> file.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install gulp --save-dev</span><br><span class=\"line\">npm install gulp-concat --save-dev</span><br><span class=\"line\">npm install gulp-uglify --save-dev</span><br><span class=\"line\">npm install del --save-dev</span><br></pre></td></tr></table></figure>\n\n<p>Note, the –save-dev option here is telling node to add these packages to a devDependencies section in the package.json file and install the packages in a node_modules folder in the current folder . At any time, you or another developer on your team can re-install all the devDependencies by simply running <strong><code>npm install</code></strong>.</p>\n<blockquote>\n<p>the gulpfile.js content can change whatever you want</p>\n</blockquote>\n<p>Finally, create a gulpfile.js file in the same folder.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// include plug-ins</span><br><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\">var concat = require(&apos;gulp-concat&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var del = require(&apos;del&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">var config = &#123;</span><br><span class=\"line\">    //Include all js files but exclude any min.js files</span><br><span class=\"line\">    src: [&apos;app/**/*.js&apos;, &apos;!app/**/*.min.js&apos;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//delete the output file(s)</span><br><span class=\"line\">gulp.task(&apos;clean&apos;, function () &#123;</span><br><span class=\"line\">    //del is an async function and not a gulp plugin (just standard nodejs)</span><br><span class=\"line\">    //It returns a promise, so make sure you return that from this task function</span><br><span class=\"line\">    //  so gulp knows when the delete is complete</span><br><span class=\"line\">    return del([&apos;app/all.min.js&apos;]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Combine and minify all files from the app folder</span><br><span class=\"line\">// This tasks depends on the clean task which means gulp will ensure that the </span><br><span class=\"line\">// Clean task is completed before running the scripts task.</span><br><span class=\"line\">gulp.task(&apos;scripts&apos;, [&apos;clean&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    return gulp.src(config.src)</span><br><span class=\"line\">      .pipe(uglify())</span><br><span class=\"line\">      .pipe(concat(&apos;all.min.js&apos;))</span><br><span class=\"line\">      .pipe(gulp.dest(&apos;app/&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Set a default tasks</span><br><span class=\"line\">gulp.task(&apos;default&apos;, [&apos;scripts&apos;], function () &#123; &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Now, run gulp from the command line and you should see some output stating that scripts task is completed successfully.</p>\n<p>This will have created an all.min.js file that contains minified JavaScript from all the js files in the app folder.</p>\n<p>Now we include all.min.js in the Visual Studio project and replace the 14 separate script includes with a single include to the new script.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;app/all.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Watching-for-changes\"><a href=\"#Watching-for-changes\" class=\"headerlink\" title=\"Watching for changes\"></a>Watching for changes</h3><p>Wouldn’t it be nice gulp could automatically re-run the scripts task whenever we make a change any of our js files? Sure, we can do that!</p>\n<p>Add the following to our <code>gulpfile.js</code>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gulp.task(&apos;watch&apos;, function()&#123;</span><br><span class=\"line\">    return gulp.watch(config.src, [&apos;scripts&apos;]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Now, if we run <code>gulp watch</code> from the command line, our new <code>watch</code> task will watch for changes to any of our js files. When a change is detected it will trigger the <code>scripts</code> task to execute, regenerating the all.min.js file.</p>\n<p>You can learn more about gulp.watch <a href=\"https://github.com/gulpjs/gulp/blob/master/docs/API.md#gulpwatchglob--opts-tasks-or-gulpwatchglob--opts-cb\" target=\"_blank\" rel=\"noopener\">here</a>. Note that at this time, the built in gulp.watch has some bugs that stop it from watching new files. These should be fixed soon but in the mean time you might want to use use the popular <a href=\"https://github.com/floatdrop/gulp-watch/blob/master/docs/readme.md#starting-tasks-on-events\" target=\"_blank\" rel=\"noopener\">gulp-watch plugin</a>.</p>\n<h3 id=\"Integrating-with-Visual-Studio\"><a href=\"#Integrating-with-Visual-Studio\" class=\"headerlink\" title=\"Integrating with Visual Studio\"></a>Integrating with Visual Studio</h3><p>So far, we have been working primarily in the command line. It would be nice if we could integrate with our existing Visual Studio experience.</p>\n<p>Luckily, we can with the new <a href=\"http://visualstudiogallery.msdn.microsoft.com/8e1b4368-4afb-467a-bc13-9650572db708\" target=\"_blank\" rel=\"noopener\">Task Runner Explorer</a> plugin. Once the plugin is installed, open the Task Runner Explorer from the View –&gt; Other Windows –&gt; Task Runner Explorer menu.</p>\n<p>This window will show you all the tasks in the gulp file and allow you to bind those tasks to certain Visual Studio events. This way, we don’t need to remember to run the gulp tasks from the command line. The IDE can handle it for us.</p>\n<p>What I like to do is bind the <code>watch</code> task to the Solution Open event and bind the <code>scripts</code> task to the <em>Before Build</em> event.</p>\n<p>With these bindings, we can make sure that all.min.js is correctly generated when we build the application and also regenerated anytime I make changes to the js files.</p>\n<p>The Task Runner Explorer also shows the output of any running tasks. Here you can see the output from the watch task, which is always running in the background in this configuration.</p>\n<h3 id=\"Development-vs-Production\"><a href=\"#Development-vs-Production\" class=\"headerlink\" title=\"Development vs Production\"></a>Development vs Production</h3><p>To simplify debugging, you may want to include all your individual scripts in a development build and only include the single concatenated/minified script in your production build. Take a look at my post on <a href=\"http://www.davepaquette.com/archive/2015/05/05/web-optimization-development-and-production-in-asp-net-mvc6.aspx\" target=\"_blank\" rel=\"noopener\">Web Optimization in ASP.NET Core MVC</a> for some ideas on how to this can be accomplished. That post covers ASP.NET Core MVC but a similar approach could be used in MVC 5. With the following in your cshtml file, the individual files would be included when debug=”true” is set in your web.config. If debug=”false”, then only the single concatenated/minified file is included.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@if (HttpContext.Current.IsDebuggingEnabled)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &lt;!-- Bootstrapping --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/app.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/config.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/config.exceptionHandler.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/config.route.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- common Modules --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/common.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/logger.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/spinner.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- common.bootstrap Modules --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/bootstrap/bootstrap.dialog.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- app --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/admin/admin.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/dashboard/dashboard.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/layout/shell.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/layout/sidebar.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- app Services --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/services/datacontext.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/services/directives.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">else</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &lt;script src=&quot;app/all.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Note that this only works for cshtml files in an MVC application as it requires the Razor view engine.</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"What-is-Gulp\"><a href=\"#What-is-Gulp\" class=\"headerlink\" title=\"What is Gulp?\"></a>What is Gulp?</h2><p>Gulp calls itself <em>the streaming build system</em>. No, this isn’t a replacement for build systems like msbuild or nant. In this case, we are talking about building the client side parts of our applications like JavaScript files, StyleSheets (CSS, SASS or LESS) and HTML files.</p>\n<p>The basic idea with Gulp is that you use pipes to stream a set of data (usually files) through some kind of processing. As it turns out, it is pretty easy to use and is probably best described using an example.</p>\n<h3 id=\"Installing-Node-and-Gulp\"><a href=\"#Installing-Node-and-Gulp\" class=\"headerlink\" title=\"Installing Node and Gulp\"></a>Installing Node and Gulp</h3><p>If you don’t already have it installed, <a href=\"http://nodejs.org/\" target=\"_blank\" rel=\"noopener\">download and install node.js</a>.</p>\n<blockquote>\n<p>If you are using VS 2015 and ASP.NET 5, Visual Studio will install npm and gulp for you automatically.</p>\n</blockquote>\n<p>Once node is installed, we need to install gulp using the node package manager (npm). From the command line, run</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install gulp -g</span><br></pre></td></tr></table></figure>","more":"<h3 id=\"Setting-up-your-Visual-Studio-project\"><a href=\"#Setting-up-your-Visual-Studio-project\" class=\"headerlink\" title=\"Setting up your Visual Studio project\"></a>Setting up your Visual Studio project</h3><p>Rather than create a new sample project here, I’m going to use the <a href=\"http://www.johnpapa.net/hot-towel-angular/\" target=\"_blank\" rel=\"noopener\">Hot Towel SPA template</a> from <a href=\"http://www.johnpapa.net/\" target=\"_blank\" rel=\"noopener\">John Papa</a>. First, I will create an new empty web application and then install the HotTowel.Angular nuget package.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Install-Package HotTowel.Angular</span><br></pre></td></tr></table></figure>\n\n<p>I wanted to use this template as an example because it is a perfect candidate for Gulp. The application is written using AngularJS and the code is split across 14 different JS files. From a code maintenance / readability standpoint, it is definitely good to split the code into files like this. From an application loading performance standpoint however, loading 14 separate JS files is generally not a great idea.</p>\n<h3 id=\"Initializing-our-project-for-Gulp\"><a href=\"#Initializing-our-project-for-Gulp\" class=\"headerlink\" title=\"Initializing our project for Gulp\"></a>Initializing our project for Gulp</h3><p>First, we need to create a package.json file in the root directory of the your project. We can do this by running npm init on the command line or simply creating a file with the following contents:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   &quot;name&quot;: &quot;YourProjectName&quot;,</span><br><span class=\"line\"></span><br><span class=\"line\">   &quot;version&quot;: &quot;1.0.0&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Next, we will install a few packages that we will use for this project. Run the following commands from the same folder that you added the <code>package.json</code> file.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install gulp --save-dev</span><br><span class=\"line\">npm install gulp-concat --save-dev</span><br><span class=\"line\">npm install gulp-uglify --save-dev</span><br><span class=\"line\">npm install del --save-dev</span><br></pre></td></tr></table></figure>\n\n<p>Note, the –save-dev option here is telling node to add these packages to a devDependencies section in the package.json file and install the packages in a node_modules folder in the current folder . At any time, you or another developer on your team can re-install all the devDependencies by simply running <strong><code>npm install</code></strong>.</p>\n<blockquote>\n<p>the gulpfile.js content can change whatever you want</p>\n</blockquote>\n<p>Finally, create a gulpfile.js file in the same folder.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// include plug-ins</span><br><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\">var concat = require(&apos;gulp-concat&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var del = require(&apos;del&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">var config = &#123;</span><br><span class=\"line\">    //Include all js files but exclude any min.js files</span><br><span class=\"line\">    src: [&apos;app/**/*.js&apos;, &apos;!app/**/*.min.js&apos;]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//delete the output file(s)</span><br><span class=\"line\">gulp.task(&apos;clean&apos;, function () &#123;</span><br><span class=\"line\">    //del is an async function and not a gulp plugin (just standard nodejs)</span><br><span class=\"line\">    //It returns a promise, so make sure you return that from this task function</span><br><span class=\"line\">    //  so gulp knows when the delete is complete</span><br><span class=\"line\">    return del([&apos;app/all.min.js&apos;]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Combine and minify all files from the app folder</span><br><span class=\"line\">// This tasks depends on the clean task which means gulp will ensure that the </span><br><span class=\"line\">// Clean task is completed before running the scripts task.</span><br><span class=\"line\">gulp.task(&apos;scripts&apos;, [&apos;clean&apos;], function () &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    return gulp.src(config.src)</span><br><span class=\"line\">      .pipe(uglify())</span><br><span class=\"line\">      .pipe(concat(&apos;all.min.js&apos;))</span><br><span class=\"line\">      .pipe(gulp.dest(&apos;app/&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">//Set a default tasks</span><br><span class=\"line\">gulp.task(&apos;default&apos;, [&apos;scripts&apos;], function () &#123; &#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Now, run gulp from the command line and you should see some output stating that scripts task is completed successfully.</p>\n<p>This will have created an all.min.js file that contains minified JavaScript from all the js files in the app folder.</p>\n<p>Now we include all.min.js in the Visual Studio project and replace the 14 separate script includes with a single include to the new script.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;app/all.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Watching-for-changes\"><a href=\"#Watching-for-changes\" class=\"headerlink\" title=\"Watching for changes\"></a>Watching for changes</h3><p>Wouldn’t it be nice gulp could automatically re-run the scripts task whenever we make a change any of our js files? Sure, we can do that!</p>\n<p>Add the following to our <code>gulpfile.js</code>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gulp.task(&apos;watch&apos;, function()&#123;</span><br><span class=\"line\">    return gulp.watch(config.src, [&apos;scripts&apos;]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>Now, if we run <code>gulp watch</code> from the command line, our new <code>watch</code> task will watch for changes to any of our js files. When a change is detected it will trigger the <code>scripts</code> task to execute, regenerating the all.min.js file.</p>\n<p>You can learn more about gulp.watch <a href=\"https://github.com/gulpjs/gulp/blob/master/docs/API.md#gulpwatchglob--opts-tasks-or-gulpwatchglob--opts-cb\" target=\"_blank\" rel=\"noopener\">here</a>. Note that at this time, the built in gulp.watch has some bugs that stop it from watching new files. These should be fixed soon but in the mean time you might want to use use the popular <a href=\"https://github.com/floatdrop/gulp-watch/blob/master/docs/readme.md#starting-tasks-on-events\" target=\"_blank\" rel=\"noopener\">gulp-watch plugin</a>.</p>\n<h3 id=\"Integrating-with-Visual-Studio\"><a href=\"#Integrating-with-Visual-Studio\" class=\"headerlink\" title=\"Integrating with Visual Studio\"></a>Integrating with Visual Studio</h3><p>So far, we have been working primarily in the command line. It would be nice if we could integrate with our existing Visual Studio experience.</p>\n<p>Luckily, we can with the new <a href=\"http://visualstudiogallery.msdn.microsoft.com/8e1b4368-4afb-467a-bc13-9650572db708\" target=\"_blank\" rel=\"noopener\">Task Runner Explorer</a> plugin. Once the plugin is installed, open the Task Runner Explorer from the View –&gt; Other Windows –&gt; Task Runner Explorer menu.</p>\n<p>This window will show you all the tasks in the gulp file and allow you to bind those tasks to certain Visual Studio events. This way, we don’t need to remember to run the gulp tasks from the command line. The IDE can handle it for us.</p>\n<p>What I like to do is bind the <code>watch</code> task to the Solution Open event and bind the <code>scripts</code> task to the <em>Before Build</em> event.</p>\n<p>With these bindings, we can make sure that all.min.js is correctly generated when we build the application and also regenerated anytime I make changes to the js files.</p>\n<p>The Task Runner Explorer also shows the output of any running tasks. Here you can see the output from the watch task, which is always running in the background in this configuration.</p>\n<h3 id=\"Development-vs-Production\"><a href=\"#Development-vs-Production\" class=\"headerlink\" title=\"Development vs Production\"></a>Development vs Production</h3><p>To simplify debugging, you may want to include all your individual scripts in a development build and only include the single concatenated/minified script in your production build. Take a look at my post on <a href=\"http://www.davepaquette.com/archive/2015/05/05/web-optimization-development-and-production-in-asp-net-mvc6.aspx\" target=\"_blank\" rel=\"noopener\">Web Optimization in ASP.NET Core MVC</a> for some ideas on how to this can be accomplished. That post covers ASP.NET Core MVC but a similar approach could be used in MVC 5. With the following in your cshtml file, the individual files would be included when debug=”true” is set in your web.config. If debug=”false”, then only the single concatenated/minified file is included.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@if (HttpContext.Current.IsDebuggingEnabled)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &lt;!-- Bootstrapping --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/app.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/config.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/config.exceptionHandler.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/config.route.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- common Modules --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/common.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/logger.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/spinner.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- common.bootstrap Modules --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/common/bootstrap/bootstrap.dialog.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- app --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/admin/admin.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/dashboard/dashboard.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/layout/shell.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/layout/sidebar.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!-- app Services --&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/services/datacontext.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script src=&quot;app/services/directives.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">else</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    &lt;script src=&quot;app/all.min.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Note that this only works for cshtml files in an MVC application as it requires the Razor view engine.</p>"},{"title":"hexo 在遇到 “{% raw %}{{{% endraw %}” 符号时出现解析报错","date":"2017-10-12T08:51:50.000Z","_content":"\n> 原文链接: [https://icewing.cc/post/hexo-bug-of-quot.html](https://icewing.cc/post/hexo-bug-of-quot.html)\n\n最近在更新一篇文章后，无论是 hexo g 生成，还是 hexo s 预览都会报解析错误， 大致如下，后面还有很长的信息，就不贴了：\n\n```\nFATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html\nTemplate render error: (unknown path) [Line 25, Column 85]\n  unexpected token: .\n```\n\n而把那篇文章移除后一切又是正常的。从错误上来看基本可以判断是模板解析错误，从 `unexpected token: .` 又看不出来具体是哪里出错，一直找不到原因。\n\n今天查找资料发现有人遇到和我类似的问题，但报的是 `unexpected token: }}` 的错误。搜索一下我那篇文章，果然有好几处带有 `}}` 符号。尝试着把几处符号删除，果然正常了。看来问题真的出在 `}}` 上面。\n\n直接说解决方案吧，参考别人的解决方法是在 `}}` 中间加一个空格，但因为我的是有部分教程含义的文章，所以并不想这样误导人。于是去 github 上找解决方案。\n\ngithub 上给出的方法是在需要显示 `}}`符号的地方加上 `{% raw %}{% endraw %}` 标签，标记这部分不需要解析。例如文章中可能会出现 `{{ something }}` 的片段，写成 `{% raw %}{{ something }}{% endraw %}` 就可以了。\n\n虽然有点麻烦，但也算临时解决了这个问题，这是个已知 bug ，希望后续的版本能修复吧，毕竟使用太多 hexo 专属的标签对博客以后的迁移、改版什么的来说还是很麻烦的。\n","source":"_posts/hexo_exceptions.md","raw":"---\ntitle: hexo 在遇到 “{% raw %}{{{% endraw %}” 符号时出现解析报错\ndate: 2017-10-12 16:51:50\ntags: [hexo excetpion]\ncategories: [hexo]\n---\n\n> 原文链接: [https://icewing.cc/post/hexo-bug-of-quot.html](https://icewing.cc/post/hexo-bug-of-quot.html)\n\n最近在更新一篇文章后，无论是 hexo g 生成，还是 hexo s 预览都会报解析错误， 大致如下，后面还有很长的信息，就不贴了：\n\n```\nFATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html\nTemplate render error: (unknown path) [Line 25, Column 85]\n  unexpected token: .\n```\n\n而把那篇文章移除后一切又是正常的。从错误上来看基本可以判断是模板解析错误，从 `unexpected token: .` 又看不出来具体是哪里出错，一直找不到原因。\n\n今天查找资料发现有人遇到和我类似的问题，但报的是 `unexpected token: }}` 的错误。搜索一下我那篇文章，果然有好几处带有 `}}` 符号。尝试着把几处符号删除，果然正常了。看来问题真的出在 `}}` 上面。\n\n直接说解决方案吧，参考别人的解决方法是在 `}}` 中间加一个空格，但因为我的是有部分教程含义的文章，所以并不想这样误导人。于是去 github 上找解决方案。\n\ngithub 上给出的方法是在需要显示 `}}`符号的地方加上 `{% raw %}{% endraw %}` 标签，标记这部分不需要解析。例如文章中可能会出现 `{{ something }}` 的片段，写成 `{% raw %}{{ something }}{% endraw %}` 就可以了。\n\n虽然有点麻烦，但也算临时解决了这个问题，这是个已知 bug ，希望后续的版本能修复吧，毕竟使用太多 hexo 专属的标签对博客以后的迁移、改版什么的来说还是很麻烦的。\n","slug":"hexo_exceptions","published":1,"updated":"2020-01-09T20:21:18.093Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r00011bicapkdh6awe","content":"<blockquote>\n<p>原文链接: <a href=\"https://icewing.cc/post/hexo-bug-of-quot.html\" target=\"_blank\" rel=\"noopener\">https://icewing.cc/post/hexo-bug-of-quot.html</a></p>\n</blockquote>\n<p>最近在更新一篇文章后，无论是 hexo g 生成，还是 hexo s 预览都会报解析错误， 大致如下，后面还有很长的信息，就不贴了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FATAL Something&apos;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class=\"line\">Template render error: (unknown path) [Line 25, Column 85]</span><br><span class=\"line\">  unexpected token: .</span><br></pre></td></tr></table></figure>\n\n<p>而把那篇文章移除后一切又是正常的。从错误上来看基本可以判断是模板解析错误，从 <code>unexpected token: .</code> 又看不出来具体是哪里出错，一直找不到原因。</p>\n<p>今天查找资料发现有人遇到和我类似的问题，但报的是 <code>unexpected token: }}</code> 的错误。搜索一下我那篇文章，果然有好几处带有 <code>}}</code> 符号。尝试着把几处符号删除，果然正常了。看来问题真的出在 <code>}}</code> 上面。</p>\n<p>直接说解决方案吧，参考别人的解决方法是在 <code>}}</code> 中间加一个空格，但因为我的是有部分教程含义的文章，所以并不想这样误导人。于是去 github 上找解决方案。</p>\n<p>github 上给出的方法是在需要显示 <code>}}</code>符号的地方加上 <code>` 标签，标记这部分不需要解析。例如文章中可能会出现 `` 的片段，写成 `{{ something }}</code> 就可以了。</p>\n<p>虽然有点麻烦，但也算临时解决了这个问题，这是个已知 bug ，希望后续的版本能修复吧，毕竟使用太多 hexo 专属的标签对博客以后的迁移、改版什么的来说还是很麻烦的。</p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>原文链接: <a href=\"https://icewing.cc/post/hexo-bug-of-quot.html\" target=\"_blank\" rel=\"noopener\">https://icewing.cc/post/hexo-bug-of-quot.html</a></p>\n</blockquote>\n<p>最近在更新一篇文章后，无论是 hexo g 生成，还是 hexo s 预览都会报解析错误， 大致如下，后面还有很长的信息，就不贴了：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FATAL Something&apos;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class=\"line\">Template render error: (unknown path) [Line 25, Column 85]</span><br><span class=\"line\">  unexpected token: .</span><br></pre></td></tr></table></figure>\n\n<p>而把那篇文章移除后一切又是正常的。从错误上来看基本可以判断是模板解析错误，从 <code>unexpected token: .</code> 又看不出来具体是哪里出错，一直找不到原因。</p>\n<p>今天查找资料发现有人遇到和我类似的问题，但报的是 <code>unexpected token: }}</code> 的错误。搜索一下我那篇文章，果然有好几处带有 <code>}}</code> 符号。尝试着把几处符号删除，果然正常了。看来问题真的出在 <code>}}</code> 上面。</p>\n<p>直接说解决方案吧，参考别人的解决方法是在 <code>}}</code> 中间加一个空格，但因为我的是有部分教程含义的文章，所以并不想这样误导人。于是去 github 上找解决方案。</p>\n<p>github 上给出的方法是在需要显示 <code>}}</code>符号的地方加上 <code>` 标签，标记这部分不需要解析。例如文章中可能会出现 `` 的片段，写成 `{{ something }}</code> 就可以了。</p>\n<p>虽然有点麻烦，但也算临时解决了这个问题，这是个已知 bug ，希望后续的版本能修复吧，毕竟使用太多 hexo 专属的标签对博客以后的迁移、改版什么的来说还是很麻烦的。</p>\n"},{"title":"ASP.NET MVC 源码控制里保持私有设置的 web.config 或 app.config","date":"2016-12-07T07:18:25.000Z","_content":"\n> 原英文博客地址: [ASP.NET MVC: Keep Private Settings Out of Source Control](http://johnatten.com/2014/04/06/asp-net-mvc-keep-private-settings-out-of-source-control/#Use-configSource-Attribute-to-move-an-Entire-Configuration-Section-to-Its-Own-File)\n\n在使用 git 管理 ASP.NET MVC 代码时, 当别人意外 push 了自己修改过的 web.config 或 app.config 文件, 我们每次在 pull 时总要修改数据库连接字符串或者一些其他私有设置. 很麻烦\n\n现有以下解决方式:\n* [使用 configSource Attribute 把整体配置部分移动到单独的文件中](#use-configSource-attr)\n* [使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件](#use-file-attr)\n* [在 .gitignore 中添加特殊文件](#add-ignore)\n* [Documentation is Key](#document-is-key)\n\n<!--more-->\n\n以 ASP.NET Web.config 文件为例:\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\n  A bunch of ASP.NET MVC web config stuff goes here . . . \n  -->\n<configuration>\n  <connectionStrings>\n    <add name=\"DefaultConnection\" value=\"YourConnectionStringAndPassword\"/>\n  </connectionStrings>\n  <appSettings file=\"PrivateSettings.config\">\n    <add key=\"owin:AppStartup\" value=\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\" />\n    <add key=\"webpages:Version\" value=\"3.0.0.0\" />\n    <add key=\"webpages:Enabled\" value=\"false\" />\n    <add key=\"ClientValidationEnabled\" value=\"true\" />\n    <add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" />\n    <add key=\"EMAIL_PASSWORD\" value=\"YourEmailPassword\"/>\n  </appSettings>\n</configuration>\n```\n\n由于不同开发人员可能有不同的数据库连接字符串配置, 根据 .NET `ConfigurationManager` 提供了解决的方案. \n\n<span id=\"use-configSource-attr\"></span>\n## 使用 configSource Attribute 把整体配置部分移动到单独的文件中\n我们可以添加单独的配置文件 ConnectionStrings.config, 并且在 Web.config 文件中的 `configSource` 特性中使用它.\n* 新建 ConnectionStrings.config 文件\n* 把先面的内容添加到 ConnectionStrings.config 中 (不需要 xml 头声明, 只有 `connectionStrings` 标签, 然后在标签里添加 `<add>` 元素)\n\n    **ConnectionStrings.config 文件例子:** <label style=\"color: red;\">这里面的 &lt;connectionStrings&gt; 中不要添加 configSource 标签, 否则报错 </label>\n    ```xml\n    <connectionStrings>\n    <add name=\"DefaultConnection\" value=\"YourConnectionStringAndPassword\"/>\n    </connectionStrings>\n    ```\n* 修改 Web.config 文件, 移除 **<connectionStrings>** 下面的 **<add>** 元素, 在 **<connectionStrings>** 便签中添加 `configSource` 特性, 值为新创建的文件 (ConnectionStrings.config)\n\n    **例子:**\n    ```xml\n    <connectionStrings configSource=\"ConnectionStrings.config\">\n    </connectionStrings>\n    ```\n*  右键文件选择属性, 设置 **Copy to Output Directory** 为 `Copy if newer` 或者 `Copy always`.\n\n**同以前访问连接字符串方式相同, 可直接使用如下代码访问:**\n```csharp\nvar conn = ConfigurationManager.ConnectionStrings[\"DefaultConnection\"];\nstring connString = conn.ConnectionString;\n// Etc...\n```\n\n<span id=\"use-file-attr\"></span>\n## 使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件\n在 `<appSettings>` 标签里可以配置许多全局值供项目使用, 但有很多不需要提交到源码控制中 (如: 邮箱密码配置).\n这种情况下, `<appSettings>` 标签里有一个特殊的 `file` 特性, 允许将一些配置放到独立的文件中.\n* 添加新的文件 *PrivateSettings.config*, 也不带 XML 头, 只包含 `<appSettings>` 标签和其里面的内容\n   \n    **PrivateSettings.config文件:**\n    ```xml\n    <appSettings>\n    <add key=\"MAIL_PASSWORD\" value=\"123456\"/>\n    </appSettings>\n    ```\n* 移除 Web.config 中 `<appSettings>` 标签里要变为私有的内容, 并且添加 `file` 特性, 值为 *PrivateSettings.config*\n\n  **修改后的 Web.config 文件:**\n  ```xml\n  <appSettings file=\"PrivateSettings.config\">\n    <add key=\"owin:AppStartup\" value=\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\" />\n    <add key=\"webpages:Version\" value=\"3.0.0.0\" />\n    <add key=\"webpages:Enabled\" value=\"false\" />\n    <add key=\"ClientValidationEnabled\" value=\"true\" />\n    <add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" />\n  </appSettings>\n  ```\n\n* 右键文件选择属性, 设置 **Copy to Output Directory** 为 `Copy if newer` 或者 `Copy always`.\n  \n**在项目中也可以直接使用如下代码来访问:**\n  ```csharp\n  var pwd = ConfigurationManager.AppSettings[\"MAIL_PASSWORD\"];\n  ```\n\n<span id=\"add-ignore\"></span>\n## 在 .gitignore 中添加特殊文件\nNow we can add our Web.config file to source and commit, and add the two special files, ConnectionStrings.config and PrivateSettings.config to our .gitignore file, and commit away. When it’s time to push to a shared repo, our private information will stay private.\n\n<span id=\"document-is-key\"></span>\n## Documentation is Key\nOf course, when we take this type of approach, it will be helpful to other developers if our documentation clearly indicates what is going on here. We might do this in our project README file, and/or add some XML comments at each point in our modified Web.config informing others that they will need to add the proper files to their local version of the project, and what those files should contain.","source":"_posts/keep_private_setting_out_of_source_control.md","raw":"---\ntitle: ASP.NET MVC 源码控制里保持私有设置的 web.config 或 app.config\ndate: 2016-12-07 15:18:25\ntags: [git, ASP.NET MVC]\n---\n\n> 原英文博客地址: [ASP.NET MVC: Keep Private Settings Out of Source Control](http://johnatten.com/2014/04/06/asp-net-mvc-keep-private-settings-out-of-source-control/#Use-configSource-Attribute-to-move-an-Entire-Configuration-Section-to-Its-Own-File)\n\n在使用 git 管理 ASP.NET MVC 代码时, 当别人意外 push 了自己修改过的 web.config 或 app.config 文件, 我们每次在 pull 时总要修改数据库连接字符串或者一些其他私有设置. 很麻烦\n\n现有以下解决方式:\n* [使用 configSource Attribute 把整体配置部分移动到单独的文件中](#use-configSource-attr)\n* [使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件](#use-file-attr)\n* [在 .gitignore 中添加特殊文件](#add-ignore)\n* [Documentation is Key](#document-is-key)\n\n<!--more-->\n\n以 ASP.NET Web.config 文件为例:\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!--\n  A bunch of ASP.NET MVC web config stuff goes here . . . \n  -->\n<configuration>\n  <connectionStrings>\n    <add name=\"DefaultConnection\" value=\"YourConnectionStringAndPassword\"/>\n  </connectionStrings>\n  <appSettings file=\"PrivateSettings.config\">\n    <add key=\"owin:AppStartup\" value=\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\" />\n    <add key=\"webpages:Version\" value=\"3.0.0.0\" />\n    <add key=\"webpages:Enabled\" value=\"false\" />\n    <add key=\"ClientValidationEnabled\" value=\"true\" />\n    <add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" />\n    <add key=\"EMAIL_PASSWORD\" value=\"YourEmailPassword\"/>\n  </appSettings>\n</configuration>\n```\n\n由于不同开发人员可能有不同的数据库连接字符串配置, 根据 .NET `ConfigurationManager` 提供了解决的方案. \n\n<span id=\"use-configSource-attr\"></span>\n## 使用 configSource Attribute 把整体配置部分移动到单独的文件中\n我们可以添加单独的配置文件 ConnectionStrings.config, 并且在 Web.config 文件中的 `configSource` 特性中使用它.\n* 新建 ConnectionStrings.config 文件\n* 把先面的内容添加到 ConnectionStrings.config 中 (不需要 xml 头声明, 只有 `connectionStrings` 标签, 然后在标签里添加 `<add>` 元素)\n\n    **ConnectionStrings.config 文件例子:** <label style=\"color: red;\">这里面的 &lt;connectionStrings&gt; 中不要添加 configSource 标签, 否则报错 </label>\n    ```xml\n    <connectionStrings>\n    <add name=\"DefaultConnection\" value=\"YourConnectionStringAndPassword\"/>\n    </connectionStrings>\n    ```\n* 修改 Web.config 文件, 移除 **<connectionStrings>** 下面的 **<add>** 元素, 在 **<connectionStrings>** 便签中添加 `configSource` 特性, 值为新创建的文件 (ConnectionStrings.config)\n\n    **例子:**\n    ```xml\n    <connectionStrings configSource=\"ConnectionStrings.config\">\n    </connectionStrings>\n    ```\n*  右键文件选择属性, 设置 **Copy to Output Directory** 为 `Copy if newer` 或者 `Copy always`.\n\n**同以前访问连接字符串方式相同, 可直接使用如下代码访问:**\n```csharp\nvar conn = ConfigurationManager.ConnectionStrings[\"DefaultConnection\"];\nstring connString = conn.ConnectionString;\n// Etc...\n```\n\n<span id=\"use-file-attr\"></span>\n## 使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件\n在 `<appSettings>` 标签里可以配置许多全局值供项目使用, 但有很多不需要提交到源码控制中 (如: 邮箱密码配置).\n这种情况下, `<appSettings>` 标签里有一个特殊的 `file` 特性, 允许将一些配置放到独立的文件中.\n* 添加新的文件 *PrivateSettings.config*, 也不带 XML 头, 只包含 `<appSettings>` 标签和其里面的内容\n   \n    **PrivateSettings.config文件:**\n    ```xml\n    <appSettings>\n    <add key=\"MAIL_PASSWORD\" value=\"123456\"/>\n    </appSettings>\n    ```\n* 移除 Web.config 中 `<appSettings>` 标签里要变为私有的内容, 并且添加 `file` 特性, 值为 *PrivateSettings.config*\n\n  **修改后的 Web.config 文件:**\n  ```xml\n  <appSettings file=\"PrivateSettings.config\">\n    <add key=\"owin:AppStartup\" value=\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\" />\n    <add key=\"webpages:Version\" value=\"3.0.0.0\" />\n    <add key=\"webpages:Enabled\" value=\"false\" />\n    <add key=\"ClientValidationEnabled\" value=\"true\" />\n    <add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" />\n  </appSettings>\n  ```\n\n* 右键文件选择属性, 设置 **Copy to Output Directory** 为 `Copy if newer` 或者 `Copy always`.\n  \n**在项目中也可以直接使用如下代码来访问:**\n  ```csharp\n  var pwd = ConfigurationManager.AppSettings[\"MAIL_PASSWORD\"];\n  ```\n\n<span id=\"add-ignore\"></span>\n## 在 .gitignore 中添加特殊文件\nNow we can add our Web.config file to source and commit, and add the two special files, ConnectionStrings.config and PrivateSettings.config to our .gitignore file, and commit away. When it’s time to push to a shared repo, our private information will stay private.\n\n<span id=\"document-is-key\"></span>\n## Documentation is Key\nOf course, when we take this type of approach, it will be helpful to other developers if our documentation clearly indicates what is going on here. We might do this in our project README file, and/or add some XML comments at each point in our modified Web.config informing others that they will need to add the proper files to their local version of the project, and what those files should contain.","slug":"keep_private_setting_out_of_source_control","published":1,"updated":"2020-01-09T20:21:18.093Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r10012bicaq28ocjr1","content":"<blockquote>\n<p>原英文博客地址: <a href=\"http://johnatten.com/2014/04/06/asp-net-mvc-keep-private-settings-out-of-source-control/#Use-configSource-Attribute-to-move-an-Entire-Configuration-Section-to-Its-Own-File\" target=\"_blank\" rel=\"noopener\">ASP.NET MVC: Keep Private Settings Out of Source Control</a></p>\n</blockquote>\n<p>在使用 git 管理 ASP.NET MVC 代码时, 当别人意外 push 了自己修改过的 web.config 或 app.config 文件, 我们每次在 pull 时总要修改数据库连接字符串或者一些其他私有设置. 很麻烦</p>\n<p>现有以下解决方式:</p>\n<ul>\n<li><a href=\"#use-configSource-attr\">使用 configSource Attribute 把整体配置部分移动到单独的文件中</a></li>\n<li><a href=\"#use-file-attr\">使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件</a></li>\n<li><a href=\"#add-ignore\">在 .gitignore 中添加特殊文件</a></li>\n<li><a href=\"#document-is-key\">Documentation is Key</a></li>\n</ul>\n<a id=\"more\"></a>\n\n<p>以 ASP.NET Web.config 文件为例:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">  A bunch of ASP.NET MVC web config stuff goes here . . . </span></span><br><span class=\"line\"><span class=\"comment\">  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">connectionStrings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">name</span>=<span class=\"string\">\"DefaultConnection\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"YourConnectionStringAndPassword\"</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">connectionStrings</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">appSettings</span> <span class=\"attr\">file</span>=<span class=\"string\">\"PrivateSettings.config\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"owin:AppStartup\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Version\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"3.0.0.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Enabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"ClientValidationEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"UnobtrusiveJavaScriptEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"EMAIL_PASSWORD\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"YourEmailPassword\"</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>由于不同开发人员可能有不同的数据库连接字符串配置, 根据 .NET <code>ConfigurationManager</code> 提供了解决的方案. </p>\n<p><span id=\"use-configSource-attr\"></span></p>\n<h2 id=\"使用-configSource-Attribute-把整体配置部分移动到单独的文件中\"><a href=\"#使用-configSource-Attribute-把整体配置部分移动到单独的文件中\" class=\"headerlink\" title=\"使用 configSource Attribute 把整体配置部分移动到单独的文件中\"></a>使用 configSource Attribute 把整体配置部分移动到单独的文件中</h2><p>我们可以添加单独的配置文件 ConnectionStrings.config, 并且在 Web.config 文件中的 <code>configSource</code> 特性中使用它.</p>\n<ul>\n<li><p>新建 ConnectionStrings.config 文件</p>\n</li>\n<li><p>把先面的内容添加到 ConnectionStrings.config 中 (不需要 xml 头声明, 只有 <code>connectionStrings</code> 标签, 然后在标签里添加 <code>&lt;add&gt;</code> 元素)</p>\n<p>  <strong>ConnectionStrings.config 文件例子:</strong> <label style=\"color: red;\">这里面的 &lt;connectionStrings&gt; 中不要添加 configSource 标签, 否则报错 </label></p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">connectionStrings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">name</span>=<span class=\"string\">\"DefaultConnection\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"YourConnectionStringAndPassword\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">connectionStrings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改 Web.config 文件, 移除 <strong><connectionstrings></connectionstrings></strong> 下面的 <strong><add></add></strong> 元素, 在 <strong><connectionstrings></connectionstrings></strong> 便签中添加 <code>configSource</code> 特性, 值为新创建的文件 (ConnectionStrings.config)</p>\n<p>  <strong>例子:</strong></p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">connectionStrings</span> <span class=\"attr\">configSource</span>=<span class=\"string\">\"ConnectionStrings.config\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">connectionStrings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>右键文件选择属性, 设置 <strong>Copy to Output Directory</strong> 为 <code>Copy if newer</code> 或者 <code>Copy always</code>.</p>\n</li>\n</ul>\n<p><strong>同以前访问连接字符串方式相同, 可直接使用如下代码访问:</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> conn = ConfigurationManager.ConnectionStrings[<span class=\"string\">\"DefaultConnection\"</span>];</span><br><span class=\"line\"><span class=\"keyword\">string</span> connString = conn.ConnectionString;</span><br><span class=\"line\"><span class=\"comment\">// Etc...</span></span><br></pre></td></tr></table></figure>\n\n<p><span id=\"use-file-attr\"></span></p>\n<h2 id=\"使用-File-Attribute-有选择的移动-Application-Settings-appSettings-标签下的设置-到外部文件\"><a href=\"#使用-File-Attribute-有选择的移动-Application-Settings-appSettings-标签下的设置-到外部文件\" class=\"headerlink\" title=\"使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件\"></a>使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件</h2><p>在 <code>&lt;appSettings&gt;</code> 标签里可以配置许多全局值供项目使用, 但有很多不需要提交到源码控制中 (如: 邮箱密码配置).<br>这种情况下, <code>&lt;appSettings&gt;</code> 标签里有一个特殊的 <code>file</code> 特性, 允许将一些配置放到独立的文件中.</p>\n<ul>\n<li><p>添加新的文件 <em>PrivateSettings.config</em>, 也不带 XML 头, 只包含 <code>&lt;appSettings&gt;</code> 标签和其里面的内容</p>\n<p>  <strong>PrivateSettings.config文件:</strong></p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"MAIL_PASSWORD\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"123456\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>移除 Web.config 中 <code>&lt;appSettings&gt;</code> 标签里要变为私有的内容, 并且添加 <code>file</code> 特性, 值为 <em>PrivateSettings.config</em></p>\n<p><strong>修改后的 Web.config 文件:</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">appSettings</span> <span class=\"attr\">file</span>=<span class=\"string\">\"PrivateSettings.config\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"owin:AppStartup\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Version\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"3.0.0.0\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Enabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"ClientValidationEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"UnobtrusiveJavaScriptEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>右键文件选择属性, 设置 <strong>Copy to Output Directory</strong> 为 <code>Copy if newer</code> 或者 <code>Copy always</code>.</p>\n</li>\n</ul>\n<p><strong>在项目中也可以直接使用如下代码来访问:</strong><br>  <figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pwd = ConfigurationManager.AppSettings[<span class=\"string\">\"MAIL_PASSWORD\"</span>];</span><br></pre></td></tr></table></figure></p>\n<p><span id=\"add-ignore\"></span></p>\n<h2 id=\"在-gitignore-中添加特殊文件\"><a href=\"#在-gitignore-中添加特殊文件\" class=\"headerlink\" title=\"在 .gitignore 中添加特殊文件\"></a>在 .gitignore 中添加特殊文件</h2><p>Now we can add our Web.config file to source and commit, and add the two special files, ConnectionStrings.config and PrivateSettings.config to our .gitignore file, and commit away. When it’s time to push to a shared repo, our private information will stay private.</p>\n<p><span id=\"document-is-key\"></span></p>\n<h2 id=\"Documentation-is-Key\"><a href=\"#Documentation-is-Key\" class=\"headerlink\" title=\"Documentation is Key\"></a>Documentation is Key</h2><p>Of course, when we take this type of approach, it will be helpful to other developers if our documentation clearly indicates what is going on here. We might do this in our project README file, and/or add some XML comments at each point in our modified Web.config informing others that they will need to add the proper files to their local version of the project, and what those files should contain.</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>原英文博客地址: <a href=\"http://johnatten.com/2014/04/06/asp-net-mvc-keep-private-settings-out-of-source-control/#Use-configSource-Attribute-to-move-an-Entire-Configuration-Section-to-Its-Own-File\" target=\"_blank\" rel=\"noopener\">ASP.NET MVC: Keep Private Settings Out of Source Control</a></p>\n</blockquote>\n<p>在使用 git 管理 ASP.NET MVC 代码时, 当别人意外 push 了自己修改过的 web.config 或 app.config 文件, 我们每次在 pull 时总要修改数据库连接字符串或者一些其他私有设置. 很麻烦</p>\n<p>现有以下解决方式:</p>\n<ul>\n<li><a href=\"#use-configSource-attr\">使用 configSource Attribute 把整体配置部分移动到单独的文件中</a></li>\n<li><a href=\"#use-file-attr\">使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件</a></li>\n<li><a href=\"#add-ignore\">在 .gitignore 中添加特殊文件</a></li>\n<li><a href=\"#document-is-key\">Documentation is Key</a></li>\n</ul>","more":"<p>以 ASP.NET Web.config 文件为例:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">  A bunch of ASP.NET MVC web config stuff goes here . . . </span></span><br><span class=\"line\"><span class=\"comment\">  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">connectionStrings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">name</span>=<span class=\"string\">\"DefaultConnection\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"YourConnectionStringAndPassword\"</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">connectionStrings</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">appSettings</span> <span class=\"attr\">file</span>=<span class=\"string\">\"PrivateSettings.config\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"owin:AppStartup\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Version\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"3.0.0.0\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Enabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"ClientValidationEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"UnobtrusiveJavaScriptEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"EMAIL_PASSWORD\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"YourEmailPassword\"</span>/&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>由于不同开发人员可能有不同的数据库连接字符串配置, 根据 .NET <code>ConfigurationManager</code> 提供了解决的方案. </p>\n<p><span id=\"use-configSource-attr\"></span></p>\n<h2 id=\"使用-configSource-Attribute-把整体配置部分移动到单独的文件中\"><a href=\"#使用-configSource-Attribute-把整体配置部分移动到单独的文件中\" class=\"headerlink\" title=\"使用 configSource Attribute 把整体配置部分移动到单独的文件中\"></a>使用 configSource Attribute 把整体配置部分移动到单独的文件中</h2><p>我们可以添加单独的配置文件 ConnectionStrings.config, 并且在 Web.config 文件中的 <code>configSource</code> 特性中使用它.</p>\n<ul>\n<li><p>新建 ConnectionStrings.config 文件</p>\n</li>\n<li><p>把先面的内容添加到 ConnectionStrings.config 中 (不需要 xml 头声明, 只有 <code>connectionStrings</code> 标签, 然后在标签里添加 <code>&lt;add&gt;</code> 元素)</p>\n<p>  <strong>ConnectionStrings.config 文件例子:</strong> <label style=\"color: red;\">这里面的 &lt;connectionStrings&gt; 中不要添加 configSource 标签, 否则报错 </label></p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">connectionStrings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">name</span>=<span class=\"string\">\"DefaultConnection\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"YourConnectionStringAndPassword\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">connectionStrings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改 Web.config 文件, 移除 <strong><connectionstrings></connectionstrings></strong> 下面的 <strong><add></add></strong> 元素, 在 <strong><connectionstrings></connectionstrings></strong> 便签中添加 <code>configSource</code> 特性, 值为新创建的文件 (ConnectionStrings.config)</p>\n<p>  <strong>例子:</strong></p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">connectionStrings</span> <span class=\"attr\">configSource</span>=<span class=\"string\">\"ConnectionStrings.config\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">connectionStrings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>右键文件选择属性, 设置 <strong>Copy to Output Directory</strong> 为 <code>Copy if newer</code> 或者 <code>Copy always</code>.</p>\n</li>\n</ul>\n<p><strong>同以前访问连接字符串方式相同, 可直接使用如下代码访问:</strong></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> conn = ConfigurationManager.ConnectionStrings[<span class=\"string\">\"DefaultConnection\"</span>];</span><br><span class=\"line\"><span class=\"keyword\">string</span> connString = conn.ConnectionString;</span><br><span class=\"line\"><span class=\"comment\">// Etc...</span></span><br></pre></td></tr></table></figure>\n\n<p><span id=\"use-file-attr\"></span></p>\n<h2 id=\"使用-File-Attribute-有选择的移动-Application-Settings-appSettings-标签下的设置-到外部文件\"><a href=\"#使用-File-Attribute-有选择的移动-Application-Settings-appSettings-标签下的设置-到外部文件\" class=\"headerlink\" title=\"使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件\"></a>使用 File Attribute 有选择的移动 Application Settings (appSettings 标签下的设置) 到外部文件</h2><p>在 <code>&lt;appSettings&gt;</code> 标签里可以配置许多全局值供项目使用, 但有很多不需要提交到源码控制中 (如: 邮箱密码配置).<br>这种情况下, <code>&lt;appSettings&gt;</code> 标签里有一个特殊的 <code>file</code> 特性, 允许将一些配置放到独立的文件中.</p>\n<ul>\n<li><p>添加新的文件 <em>PrivateSettings.config</em>, 也不带 XML 头, 只包含 <code>&lt;appSettings&gt;</code> 标签和其里面的内容</p>\n<p>  <strong>PrivateSettings.config文件:</strong></p>\n  <figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">appSettings</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"MAIL_PASSWORD\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"123456\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>移除 Web.config 中 <code>&lt;appSettings&gt;</code> 标签里要变为私有的内容, 并且添加 <code>file</code> 特性, 值为 <em>PrivateSettings.config</em></p>\n<p><strong>修改后的 Web.config 文件:</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">appSettings</span> <span class=\"attr\">file</span>=<span class=\"string\">\"PrivateSettings.config\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"owin:AppStartup\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"AspNetIdentity2ExtendingApplicationUser.Startup,AspNetIdentity2ExtendingApplicationUser\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Version\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"3.0.0.0\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"webpages:Enabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"false\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"ClientValidationEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">key</span>=<span class=\"string\">\"UnobtrusiveJavaScriptEnabled\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"true\"</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">appSettings</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>右键文件选择属性, 设置 <strong>Copy to Output Directory</strong> 为 <code>Copy if newer</code> 或者 <code>Copy always</code>.</p>\n</li>\n</ul>\n<p><strong>在项目中也可以直接使用如下代码来访问:</strong><br>  <figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pwd = ConfigurationManager.AppSettings[<span class=\"string\">\"MAIL_PASSWORD\"</span>];</span><br></pre></td></tr></table></figure></p>\n<p><span id=\"add-ignore\"></span></p>\n<h2 id=\"在-gitignore-中添加特殊文件\"><a href=\"#在-gitignore-中添加特殊文件\" class=\"headerlink\" title=\"在 .gitignore 中添加特殊文件\"></a>在 .gitignore 中添加特殊文件</h2><p>Now we can add our Web.config file to source and commit, and add the two special files, ConnectionStrings.config and PrivateSettings.config to our .gitignore file, and commit away. When it’s time to push to a shared repo, our private information will stay private.</p>\n<p><span id=\"document-is-key\"></span></p>\n<h2 id=\"Documentation-is-Key\"><a href=\"#Documentation-is-Key\" class=\"headerlink\" title=\"Documentation is Key\"></a>Documentation is Key</h2><p>Of course, when we take this type of approach, it will be helpful to other developers if our documentation clearly indicates what is going on here. We might do this in our project README file, and/or add some XML comments at each point in our modified Web.config informing others that they will need to add the proper files to their local version of the project, and what those files should contain.</p>"},{"title":"Markdown 常用语法","date":"2016-10-08T06:37:22.000Z","_content":"## 标题\n标题可分为六级标题, # 逐级递加.\n```\n# 一级标题\n## 二级标题\n### 三级标题\n#### 司机标题\n##### 五级标题\n###### 六级标题\n```\n\n<!--more-->\n\n## 列表\n#### 无序列表\n无序列表以 `*` 或者 `-` 开头\n```\n* 文本1\n* 文本1\n* 文本1\n\n- 文本1\n- 文本1\n- 文本1\n```\n#### 有序列表\n有序列表以 `1.` `2.` `3.`开头\n```\n1. 文本1\n2. 文本2\n3. 文本3\n```\n\n## 链接和图片\n#### 链接\n```\n[Google](www.google.com)\n```\n#### 锚点\n跳转到<a href=\"#abcd\">bookmark_text</a>位置\n或者\n跳转到[abcd](#abcd)位置\n```\n跳转到<a href=\"#abcd\">bookmark_text</a>位置\n或者\n跳转到[abcd](#abcd)位置\n```\n\n<span id=\"abcd\">我是abcd</span>\n\n#### 图片\n```\n![](http://bogerv.wang/favicon.png)\n```\n\n## 引用\n```\n> 披繡闥, 俯雕甍, 山原曠其盈視, 川澤紆其駭矚. 閭閻撲地, 鐘鳴鼎食之家;\n> 舸艦迷津, 青雀黃龍之舳. 雲銷雨霽, 彩徹區明. 落霞與孤鶩齊飛, 秋水共長天一色.\n> 漁舟唱晚, 響窮彭蠡之濱, 雁陣驚寒, 聲斷衡陽之浦.\n```\n\n## 粗体和斜体\n```\n**粗体**\n*斜体*\n```\n\n## 代码引用\n#### 单行引用\n```\n`console.log('hello, world!')`\n```\n#### 多行引用\n```\n`` ` csharp\nvar hello = \"hello, world!\";\nSystem.WriteLine(hello);\n`` `\n`` ` javascript\nvar hello = 'hello, world!';\nconsole.log(hello);\n`` `\n注: 去掉上面`` `中的空格\n```\n\n## 表格\n```\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |\n```\n\n## 显示链接中带括号的图片\n```\n![][1]\n[1]: http://latex.codecogs.com/gif.latex?\\prod%20\\(n_{i}\\)+1\n```","source":"_posts/markdown.md","raw":"---\ntitle: Markdown 常用语法\ndate: 2016-10-08 14:37:22\ntags: [markdown]\n---\n## 标题\n标题可分为六级标题, # 逐级递加.\n```\n# 一级标题\n## 二级标题\n### 三级标题\n#### 司机标题\n##### 五级标题\n###### 六级标题\n```\n\n<!--more-->\n\n## 列表\n#### 无序列表\n无序列表以 `*` 或者 `-` 开头\n```\n* 文本1\n* 文本1\n* 文本1\n\n- 文本1\n- 文本1\n- 文本1\n```\n#### 有序列表\n有序列表以 `1.` `2.` `3.`开头\n```\n1. 文本1\n2. 文本2\n3. 文本3\n```\n\n## 链接和图片\n#### 链接\n```\n[Google](www.google.com)\n```\n#### 锚点\n跳转到<a href=\"#abcd\">bookmark_text</a>位置\n或者\n跳转到[abcd](#abcd)位置\n```\n跳转到<a href=\"#abcd\">bookmark_text</a>位置\n或者\n跳转到[abcd](#abcd)位置\n```\n\n<span id=\"abcd\">我是abcd</span>\n\n#### 图片\n```\n![](http://bogerv.wang/favicon.png)\n```\n\n## 引用\n```\n> 披繡闥, 俯雕甍, 山原曠其盈視, 川澤紆其駭矚. 閭閻撲地, 鐘鳴鼎食之家;\n> 舸艦迷津, 青雀黃龍之舳. 雲銷雨霽, 彩徹區明. 落霞與孤鶩齊飛, 秋水共長天一色.\n> 漁舟唱晚, 響窮彭蠡之濱, 雁陣驚寒, 聲斷衡陽之浦.\n```\n\n## 粗体和斜体\n```\n**粗体**\n*斜体*\n```\n\n## 代码引用\n#### 单行引用\n```\n`console.log('hello, world!')`\n```\n#### 多行引用\n```\n`` ` csharp\nvar hello = \"hello, world!\";\nSystem.WriteLine(hello);\n`` `\n`` ` javascript\nvar hello = 'hello, world!';\nconsole.log(hello);\n`` `\n注: 去掉上面`` `中的空格\n```\n\n## 表格\n```\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |\n```\n\n## 显示链接中带括号的图片\n```\n![][1]\n[1]: http://latex.codecogs.com/gif.latex?\\prod%20\\(n_{i}\\)+1\n```","slug":"markdown","published":1,"updated":"2020-01-09T20:21:18.093Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r10013bicaqyhwixay","content":"<h2 id=\"标题\"><a href=\"#标题\" class=\"headerlink\" title=\"标题\"></a>标题</h2><p>标题可分为六级标题, # 逐级递加.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 一级标题</span><br><span class=\"line\">## 二级标题</span><br><span class=\"line\">### 三级标题</span><br><span class=\"line\">#### 司机标题</span><br><span class=\"line\">##### 五级标题</span><br><span class=\"line\">###### 六级标题</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<h2 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h2><h4 id=\"无序列表\"><a href=\"#无序列表\" class=\"headerlink\" title=\"无序列表\"></a>无序列表</h4><p>无序列表以 <code>*</code> 或者 <code>-</code> 开头</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* 文本1</span><br><span class=\"line\">* 文本1</span><br><span class=\"line\">* 文本1</span><br><span class=\"line\"></span><br><span class=\"line\">- 文本1</span><br><span class=\"line\">- 文本1</span><br><span class=\"line\">- 文本1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"有序列表\"><a href=\"#有序列表\" class=\"headerlink\" title=\"有序列表\"></a>有序列表</h4><p>有序列表以 <code>1.</code> <code>2.</code> <code>3.</code>开头</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 文本1</span><br><span class=\"line\">2. 文本2</span><br><span class=\"line\">3. 文本3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"链接和图片\"><a href=\"#链接和图片\" class=\"headerlink\" title=\"链接和图片\"></a>链接和图片</h2><h4 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Google](www.google.com)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"锚点\"><a href=\"#锚点\" class=\"headerlink\" title=\"锚点\"></a>锚点</h4><p>跳转到<a href=\"#abcd\">bookmark_text</a>位置<br>或者<br>跳转到<a href=\"#abcd\">abcd</a>位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">跳转到&lt;a href=&quot;#abcd&quot;&gt;bookmark_text&lt;/a&gt;位置</span><br><span class=\"line\">或者</span><br><span class=\"line\">跳转到[abcd](#abcd)位置</span><br></pre></td></tr></table></figure>\n\n<p><span id=\"abcd\">我是abcd</span></p>\n<h4 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![](http://bogerv.wang/favicon.png)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"引用\"><a href=\"#引用\" class=\"headerlink\" title=\"引用\"></a>引用</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; 披繡闥, 俯雕甍, 山原曠其盈視, 川澤紆其駭矚. 閭閻撲地, 鐘鳴鼎食之家;</span><br><span class=\"line\">&gt; 舸艦迷津, 青雀黃龍之舳. 雲銷雨霽, 彩徹區明. 落霞與孤鶩齊飛, 秋水共長天一色.</span><br><span class=\"line\">&gt; 漁舟唱晚, 響窮彭蠡之濱, 雁陣驚寒, 聲斷衡陽之浦.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"粗体和斜体\"><a href=\"#粗体和斜体\" class=\"headerlink\" title=\"粗体和斜体\"></a>粗体和斜体</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">**粗体**</span><br><span class=\"line\">*斜体*</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码引用\"><a href=\"#代码引用\" class=\"headerlink\" title=\"代码引用\"></a>代码引用</h2><h4 id=\"单行引用\"><a href=\"#单行引用\" class=\"headerlink\" title=\"单行引用\"></a>单行引用</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">`console.log(&apos;hello, world!&apos;)`</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"多行引用\"><a href=\"#多行引用\" class=\"headerlink\" title=\"多行引用\"></a>多行引用</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">`` ` csharp</span><br><span class=\"line\">var hello = &quot;hello, world!&quot;;</span><br><span class=\"line\">System.WriteLine(hello);</span><br><span class=\"line\">`` `</span><br><span class=\"line\">`` ` javascript</span><br><span class=\"line\">var hello = &apos;hello, world!&apos;;</span><br><span class=\"line\">console.log(hello);</span><br><span class=\"line\">`` `</span><br><span class=\"line\">注: 去掉上面`` `中的空格</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"表格\"><a href=\"#表格\" class=\"headerlink\" title=\"表格\"></a>表格</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">| Tables        | Are           | Cool  |</span><br><span class=\"line\">| ------------- |:-------------:| -----:|</span><br><span class=\"line\">| col 3 is      | right-aligned | $1600 |</span><br><span class=\"line\">| col 2 is      | centered      |   $12 |</span><br><span class=\"line\">| zebra stripes | are neat      |    $1 |</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"显示链接中带括号的图片\"><a href=\"#显示链接中带括号的图片\" class=\"headerlink\" title=\"显示链接中带括号的图片\"></a>显示链接中带括号的图片</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![][1]</span><br><span class=\"line\">[1]: http://latex.codecogs.com/gif.latex?\\prod%20\\(n_&#123;i&#125;\\)+1</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h2 id=\"标题\"><a href=\"#标题\" class=\"headerlink\" title=\"标题\"></a>标题</h2><p>标题可分为六级标题, # 逐级递加.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 一级标题</span><br><span class=\"line\">## 二级标题</span><br><span class=\"line\">### 三级标题</span><br><span class=\"line\">#### 司机标题</span><br><span class=\"line\">##### 五级标题</span><br><span class=\"line\">###### 六级标题</span><br></pre></td></tr></table></figure>","more":"<h2 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h2><h4 id=\"无序列表\"><a href=\"#无序列表\" class=\"headerlink\" title=\"无序列表\"></a>无序列表</h4><p>无序列表以 <code>*</code> 或者 <code>-</code> 开头</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* 文本1</span><br><span class=\"line\">* 文本1</span><br><span class=\"line\">* 文本1</span><br><span class=\"line\"></span><br><span class=\"line\">- 文本1</span><br><span class=\"line\">- 文本1</span><br><span class=\"line\">- 文本1</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"有序列表\"><a href=\"#有序列表\" class=\"headerlink\" title=\"有序列表\"></a>有序列表</h4><p>有序列表以 <code>1.</code> <code>2.</code> <code>3.</code>开头</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 文本1</span><br><span class=\"line\">2. 文本2</span><br><span class=\"line\">3. 文本3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"链接和图片\"><a href=\"#链接和图片\" class=\"headerlink\" title=\"链接和图片\"></a>链接和图片</h2><h4 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Google](www.google.com)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"锚点\"><a href=\"#锚点\" class=\"headerlink\" title=\"锚点\"></a>锚点</h4><p>跳转到<a href=\"#abcd\">bookmark_text</a>位置<br>或者<br>跳转到<a href=\"#abcd\">abcd</a>位置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">跳转到&lt;a href=&quot;#abcd&quot;&gt;bookmark_text&lt;/a&gt;位置</span><br><span class=\"line\">或者</span><br><span class=\"line\">跳转到[abcd](#abcd)位置</span><br></pre></td></tr></table></figure>\n\n<p><span id=\"abcd\">我是abcd</span></p>\n<h4 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![](http://bogerv.wang/favicon.png)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"引用\"><a href=\"#引用\" class=\"headerlink\" title=\"引用\"></a>引用</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; 披繡闥, 俯雕甍, 山原曠其盈視, 川澤紆其駭矚. 閭閻撲地, 鐘鳴鼎食之家;</span><br><span class=\"line\">&gt; 舸艦迷津, 青雀黃龍之舳. 雲銷雨霽, 彩徹區明. 落霞與孤鶩齊飛, 秋水共長天一色.</span><br><span class=\"line\">&gt; 漁舟唱晚, 響窮彭蠡之濱, 雁陣驚寒, 聲斷衡陽之浦.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"粗体和斜体\"><a href=\"#粗体和斜体\" class=\"headerlink\" title=\"粗体和斜体\"></a>粗体和斜体</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">**粗体**</span><br><span class=\"line\">*斜体*</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"代码引用\"><a href=\"#代码引用\" class=\"headerlink\" title=\"代码引用\"></a>代码引用</h2><h4 id=\"单行引用\"><a href=\"#单行引用\" class=\"headerlink\" title=\"单行引用\"></a>单行引用</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">`console.log(&apos;hello, world!&apos;)`</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"多行引用\"><a href=\"#多行引用\" class=\"headerlink\" title=\"多行引用\"></a>多行引用</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">`` ` csharp</span><br><span class=\"line\">var hello = &quot;hello, world!&quot;;</span><br><span class=\"line\">System.WriteLine(hello);</span><br><span class=\"line\">`` `</span><br><span class=\"line\">`` ` javascript</span><br><span class=\"line\">var hello = &apos;hello, world!&apos;;</span><br><span class=\"line\">console.log(hello);</span><br><span class=\"line\">`` `</span><br><span class=\"line\">注: 去掉上面`` `中的空格</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"表格\"><a href=\"#表格\" class=\"headerlink\" title=\"表格\"></a>表格</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">| Tables        | Are           | Cool  |</span><br><span class=\"line\">| ------------- |:-------------:| -----:|</span><br><span class=\"line\">| col 3 is      | right-aligned | $1600 |</span><br><span class=\"line\">| col 2 is      | centered      |   $12 |</span><br><span class=\"line\">| zebra stripes | are neat      |    $1 |</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"显示链接中带括号的图片\"><a href=\"#显示链接中带括号的图片\" class=\"headerlink\" title=\"显示链接中带括号的图片\"></a>显示链接中带括号的图片</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">![][1]</span><br><span class=\"line\">[1]: http://latex.codecogs.com/gif.latex?\\prod%20\\(n_&#123;i&#125;\\)+1</span><br></pre></td></tr></table></figure>"},{"title":"统一命名规则","date":"2020-01-09T20:21:18.094Z","_content":"盘D:\n手动安装的应用         --> Applications\n\n盘E:\n自己写程序的目录       --> Apps","source":"_posts/rules.md","raw":"---\ntitle: 统一命名规则\ndate: \n---\n盘D:\n手动安装的应用         --> Applications\n\n盘E:\n自己写程序的目录       --> Apps","slug":"rules","published":1,"updated":"2020-01-09T20:21:18.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r20014bicabhtqplz9","content":"<p>盘D:<br>手动安装的应用         –&gt; Applications</p>\n<p>盘E:<br>自己写程序的目录       –&gt; Apps</p>\n","site":{"data":{}},"excerpt":"","more":"<p>盘D:<br>手动安装的应用         –&gt; Applications</p>\n<p>盘E:<br>自己写程序的目录       –&gt; Apps</p>\n"},{"title":"关键字 readonly 和 const","date":"2016-11-29T09:37:22.000Z","_content":"\n使用 readonly 修饰一个属性时, 只能在此类中声明时或者构造函数体里为其赋值\n\n> readonly 关键字和 const 不同. 一个 const 属性只能在声明的时候初始化. 而 readonly 还可以在构造函数中初始化.","source":"_posts/readonly_const.md","raw":"---\ntitle: 关键字 readonly 和 const\ndate: 2016-11-29 17:37:22\ntags: [C#, readonly]\n---\n\n使用 readonly 修饰一个属性时, 只能在此类中声明时或者构造函数体里为其赋值\n\n> readonly 关键字和 const 不同. 一个 const 属性只能在声明的时候初始化. 而 readonly 还可以在构造函数中初始化.","slug":"readonly_const","published":1,"updated":"2020-01-09T20:21:18.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r20015bicaajguf0j9","content":"<p>使用 readonly 修饰一个属性时, 只能在此类中声明时或者构造函数体里为其赋值</p>\n<blockquote>\n<p>readonly 关键字和 const 不同. 一个 const 属性只能在声明的时候初始化. 而 readonly 还可以在构造函数中初始化.</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>使用 readonly 修饰一个属性时, 只能在此类中声明时或者构造函数体里为其赋值</p>\n<blockquote>\n<p>readonly 关键字和 const 不同. 一个 const 属性只能在声明的时候初始化. 而 readonly 还可以在构造函数中初始化.</p>\n</blockquote>\n"},{"title":"使用Areas分离ASP.NET MVC项目","date":"2016-11-29T09:37:22.000Z","_content":"\n> 原文地址: http://www.cnblogs.com/dingji/archive/2012/05/30/2506420.html\n\n## 使用Areas分离ASP.NET MVC项目\n随着项目规模的不断扩大, Controller 控制器也随之不断增多. 如果在 Controllers 文件夹下面有超过两位数, 即便采用良好的命名规范, 或者用子文件夹的形式区分不同功能的控制器, 还是会影响项目的可阅读性和可维护性. 因此, 在一些场景下, 如果能把与某功能相关的文件分离到一个独立的项目中是非常有用的. Asp.Net MVC 提供了 Areas(区域) 的概念达到这一目的.\n\n<!--more-->\n\n### **1. 新建 Areas**\n在 MVC 项目上右键新建 Areas, 输入名字, 如: Admin\n\n![](/assets/161129_usearea_01.png)\n\n在Areas/Admin/Controllers文件夹下面新建HomeController并添加一个Index的方法和对应的View文件. 这里可以发现Areas的另一个好处：你可以在不同Areas下面添加相同名称的Controller. 当然, 如果你直接这么运行会得到一个错误：\n\n![](/assets/161129_error_02.png)\n\n> 这种情况需要修改一下AdminAreaRegistration.cs和Global.asax, 分别为路由加上命名空间限制：\n\n**/Areas/Admin/AdminAreaRegistration.cs**\n```\ncontext.MapRoute(\n     \"Admin_default\",\n     \"Admin/{controller}/{action}/{id}\",\n     new { action = \"Index\", id = UrlParameter.Optional },\n     new string[] { \"[项目名称].Areas.Admin.Controllers\" }\n );\n```\n\n**/Global.asax.cs 或者 RouteConfig.cs**\n```\nroutes.MapRoute(    //Default Route\n     \"Default\", // Route name\n     \"{controller}/{action}/{id}\", // URL with parameters\n     new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n     new string[] { \"[项目名称].Controllers\" }\n );\n```\n\n### **2. 改进**\n我们需要对现有项目进行一下改造：\n\n1.  在解决方案上面新建一个MyMvcAreasDemo.Admin的MVC3项目, 并且删除Global.asax和Web.config两个文件\n\n2.  在根目录新建一个AdminAreaRegistration的类, 输入如下内容：\n\n```\npublic class AdminAreaRegistration : AreaRegistration\n{\n    public override string AreaName\n    {\n        get\n        {\n            return \"Admin\";\n        }\n    }\n \n    public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n            \"Admin_default\",\n            \"Admin/{controller}/{action}/{id}\",\n            new { action = \"Index\", id = UrlParameter.Optional }               \n        );\n    }\n}\n```\n\n3.  删除MyMvcAreasDemo项目/Areas/Admin文件夹下面的AdminAreaRegistration.cs文件以及Controllers文件夹（包括HomeController）\n\n4.  在MyMvcAreasDemo.Admin项目的Controllers里面新建一个HomeController\n\n5.  记得保留MyMvcAreasDemo/Areas/Admin下面的Views, 并且在MyMvcAreasDemo项目里面引用MyMvcAreasDemo.Admin项目, 如图：\n\n![](/assets/161129_update_03.png)\n\n现在运行程序并访问/Admin/Home/Index可以发现Admin项目生效了. 这样, 我们可以将所有的与后台管理相关的Controller都放到这个新的项目中来. 但是很快你会发现, 一个新的“问题”又出现了：\n\n当你在MyMvcAreasDemo.Admin里面的HomeController添加新的Action（例如List）, 然后习惯性在上面右键-\"Add View\"后, 你会发现新增的List.cshtml文件会出现在MyMvcAreasDemo.Admin/Views/Home下面, 然后当你访问/Admin/Home/List的时候浏览器会得到错误提示：\"The view 'List' or its master was not found or no view engine supports the searched locations…\". 原来它只会在主程序MyMvcAreasDemo中的对应目录去寻找View. 这么一来, MVC框架提供给我们的脚手架功能就大打折扣, 当然你可以手动在MyMvcAreasDemo/Areas/Admin/Views中对应添加View, 或者在MyMvcAreasDemo.Admin项目中自动生成了View之后再拷贝过去. 有没有更好的办法呢？\n\n### **3. 自动复制新生成的 View 到 Areas 的 View 文件夹下**\n\n为了使我们在MyMvcAreasDemo.Admin自动生成的View自动同步到MyMvcAreasDemo/Areas/Admin/Views文件夹中，可以使用“生成事件（Build Event）”里的“Post-Build Event”，打开MyMvcAreasDemo.Admin的属性，修改如下图所示：\n\n![](/assets/161129_autocopybuidevent_04.png)\n\n生成事件为：\n\n```\nmkdir \"$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views\"\nxcopy \"$(ProjectDir)Views\" \"$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views\" /S /E /C /Y\n```\n\n意思其实很简单，相信大家都能看得懂，就是完全复制MyMvcAreasDemo.Admin的Views文件夹下所有文件至MyMvcAreasDemo/Areas/Admin/Views中。\n\n现在再次访问/Admin/Home/List就可以得到正确结果了，并且你可以发现List.cshtml已经被复制到MyMvcAreasDemo/Areas/Admin/Views/Home目录里。\n\n### **4. 另一种思路**\n\n可以直接把 MyMvcAreasDemo.Admin 这个项目创建在 Area 文件夹里, 这里就可以省去 步骤3 的自动复制了","source":"_posts/use_area_in_mvc.md","raw":"---\ntitle: 使用Areas分离ASP.NET MVC项目\ndate: 2016-11-29 17:37:22\ntags: [asp.net, mvc, area, route]\n---\n\n> 原文地址: http://www.cnblogs.com/dingji/archive/2012/05/30/2506420.html\n\n## 使用Areas分离ASP.NET MVC项目\n随着项目规模的不断扩大, Controller 控制器也随之不断增多. 如果在 Controllers 文件夹下面有超过两位数, 即便采用良好的命名规范, 或者用子文件夹的形式区分不同功能的控制器, 还是会影响项目的可阅读性和可维护性. 因此, 在一些场景下, 如果能把与某功能相关的文件分离到一个独立的项目中是非常有用的. Asp.Net MVC 提供了 Areas(区域) 的概念达到这一目的.\n\n<!--more-->\n\n### **1. 新建 Areas**\n在 MVC 项目上右键新建 Areas, 输入名字, 如: Admin\n\n![](/assets/161129_usearea_01.png)\n\n在Areas/Admin/Controllers文件夹下面新建HomeController并添加一个Index的方法和对应的View文件. 这里可以发现Areas的另一个好处：你可以在不同Areas下面添加相同名称的Controller. 当然, 如果你直接这么运行会得到一个错误：\n\n![](/assets/161129_error_02.png)\n\n> 这种情况需要修改一下AdminAreaRegistration.cs和Global.asax, 分别为路由加上命名空间限制：\n\n**/Areas/Admin/AdminAreaRegistration.cs**\n```\ncontext.MapRoute(\n     \"Admin_default\",\n     \"Admin/{controller}/{action}/{id}\",\n     new { action = \"Index\", id = UrlParameter.Optional },\n     new string[] { \"[项目名称].Areas.Admin.Controllers\" }\n );\n```\n\n**/Global.asax.cs 或者 RouteConfig.cs**\n```\nroutes.MapRoute(    //Default Route\n     \"Default\", // Route name\n     \"{controller}/{action}/{id}\", // URL with parameters\n     new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n     new string[] { \"[项目名称].Controllers\" }\n );\n```\n\n### **2. 改进**\n我们需要对现有项目进行一下改造：\n\n1.  在解决方案上面新建一个MyMvcAreasDemo.Admin的MVC3项目, 并且删除Global.asax和Web.config两个文件\n\n2.  在根目录新建一个AdminAreaRegistration的类, 输入如下内容：\n\n```\npublic class AdminAreaRegistration : AreaRegistration\n{\n    public override string AreaName\n    {\n        get\n        {\n            return \"Admin\";\n        }\n    }\n \n    public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n            \"Admin_default\",\n            \"Admin/{controller}/{action}/{id}\",\n            new { action = \"Index\", id = UrlParameter.Optional }               \n        );\n    }\n}\n```\n\n3.  删除MyMvcAreasDemo项目/Areas/Admin文件夹下面的AdminAreaRegistration.cs文件以及Controllers文件夹（包括HomeController）\n\n4.  在MyMvcAreasDemo.Admin项目的Controllers里面新建一个HomeController\n\n5.  记得保留MyMvcAreasDemo/Areas/Admin下面的Views, 并且在MyMvcAreasDemo项目里面引用MyMvcAreasDemo.Admin项目, 如图：\n\n![](/assets/161129_update_03.png)\n\n现在运行程序并访问/Admin/Home/Index可以发现Admin项目生效了. 这样, 我们可以将所有的与后台管理相关的Controller都放到这个新的项目中来. 但是很快你会发现, 一个新的“问题”又出现了：\n\n当你在MyMvcAreasDemo.Admin里面的HomeController添加新的Action（例如List）, 然后习惯性在上面右键-\"Add View\"后, 你会发现新增的List.cshtml文件会出现在MyMvcAreasDemo.Admin/Views/Home下面, 然后当你访问/Admin/Home/List的时候浏览器会得到错误提示：\"The view 'List' or its master was not found or no view engine supports the searched locations…\". 原来它只会在主程序MyMvcAreasDemo中的对应目录去寻找View. 这么一来, MVC框架提供给我们的脚手架功能就大打折扣, 当然你可以手动在MyMvcAreasDemo/Areas/Admin/Views中对应添加View, 或者在MyMvcAreasDemo.Admin项目中自动生成了View之后再拷贝过去. 有没有更好的办法呢？\n\n### **3. 自动复制新生成的 View 到 Areas 的 View 文件夹下**\n\n为了使我们在MyMvcAreasDemo.Admin自动生成的View自动同步到MyMvcAreasDemo/Areas/Admin/Views文件夹中，可以使用“生成事件（Build Event）”里的“Post-Build Event”，打开MyMvcAreasDemo.Admin的属性，修改如下图所示：\n\n![](/assets/161129_autocopybuidevent_04.png)\n\n生成事件为：\n\n```\nmkdir \"$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views\"\nxcopy \"$(ProjectDir)Views\" \"$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views\" /S /E /C /Y\n```\n\n意思其实很简单，相信大家都能看得懂，就是完全复制MyMvcAreasDemo.Admin的Views文件夹下所有文件至MyMvcAreasDemo/Areas/Admin/Views中。\n\n现在再次访问/Admin/Home/List就可以得到正确结果了，并且你可以发现List.cshtml已经被复制到MyMvcAreasDemo/Areas/Admin/Views/Home目录里。\n\n### **4. 另一种思路**\n\n可以直接把 MyMvcAreasDemo.Admin 这个项目创建在 Area 文件夹里, 这里就可以省去 步骤3 的自动复制了","slug":"use_area_in_mvc","published":1,"updated":"2020-01-09T20:21:18.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r30016bicawmammyw5","content":"<blockquote>\n<p>原文地址: <a href=\"http://www.cnblogs.com/dingji/archive/2012/05/30/2506420.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/dingji/archive/2012/05/30/2506420.html</a></p>\n</blockquote>\n<h2 id=\"使用Areas分离ASP-NET-MVC项目\"><a href=\"#使用Areas分离ASP-NET-MVC项目\" class=\"headerlink\" title=\"使用Areas分离ASP.NET MVC项目\"></a>使用Areas分离ASP.NET MVC项目</h2><p>随着项目规模的不断扩大, Controller 控制器也随之不断增多. 如果在 Controllers 文件夹下面有超过两位数, 即便采用良好的命名规范, 或者用子文件夹的形式区分不同功能的控制器, 还是会影响项目的可阅读性和可维护性. 因此, 在一些场景下, 如果能把与某功能相关的文件分离到一个独立的项目中是非常有用的. Asp.Net MVC 提供了 Areas(区域) 的概念达到这一目的.</p>\n<a id=\"more\"></a>\n\n<h3 id=\"1-新建-Areas\"><a href=\"#1-新建-Areas\" class=\"headerlink\" title=\"1. 新建 Areas\"></a><strong>1. 新建 Areas</strong></h3><p>在 MVC 项目上右键新建 Areas, 输入名字, 如: Admin</p>\n<p><img src=\"/assets/161129_usearea_01.png\" alt></p>\n<p>在Areas/Admin/Controllers文件夹下面新建HomeController并添加一个Index的方法和对应的View文件. 这里可以发现Areas的另一个好处：你可以在不同Areas下面添加相同名称的Controller. 当然, 如果你直接这么运行会得到一个错误：</p>\n<p><img src=\"/assets/161129_error_02.png\" alt></p>\n<blockquote>\n<p>这种情况需要修改一下AdminAreaRegistration.cs和Global.asax, 分别为路由加上命名空间限制：</p>\n</blockquote>\n<p><strong>/Areas/Admin/AdminAreaRegistration.cs</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">context.MapRoute(</span><br><span class=\"line\">     &quot;Admin_default&quot;,</span><br><span class=\"line\">     &quot;Admin/&#123;controller&#125;/&#123;action&#125;/&#123;id&#125;&quot;,</span><br><span class=\"line\">     new &#123; action = &quot;Index&quot;, id = UrlParameter.Optional &#125;,</span><br><span class=\"line\">     new string[] &#123; &quot;[项目名称].Areas.Admin.Controllers&quot; &#125;</span><br><span class=\"line\"> );</span><br></pre></td></tr></table></figure>\n\n<p><strong>/Global.asax.cs 或者 RouteConfig.cs</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">routes.MapRoute(    //Default Route</span><br><span class=\"line\">     &quot;Default&quot;, // Route name</span><br><span class=\"line\">     &quot;&#123;controller&#125;/&#123;action&#125;/&#123;id&#125;&quot;, // URL with parameters</span><br><span class=\"line\">     new &#123; controller = &quot;Home&quot;, action = &quot;Index&quot;, id = UrlParameter.Optional &#125;, // Parameter defaults</span><br><span class=\"line\">     new string[] &#123; &quot;[项目名称].Controllers&quot; &#125;</span><br><span class=\"line\"> );</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-改进\"><a href=\"#2-改进\" class=\"headerlink\" title=\"2. 改进\"></a><strong>2. 改进</strong></h3><p>我们需要对现有项目进行一下改造：</p>\n<ol>\n<li><p>在解决方案上面新建一个MyMvcAreasDemo.Admin的MVC3项目, 并且删除Global.asax和Web.config两个文件</p>\n</li>\n<li><p>在根目录新建一个AdminAreaRegistration的类, 输入如下内容：</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AdminAreaRegistration : AreaRegistration</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    public override string AreaName</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        get</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            return &quot;Admin&quot;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    public override void RegisterArea(AreaRegistrationContext context)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        context.MapRoute(</span><br><span class=\"line\">            &quot;Admin_default&quot;,</span><br><span class=\"line\">            &quot;Admin/&#123;controller&#125;/&#123;action&#125;/&#123;id&#125;&quot;,</span><br><span class=\"line\">            new &#123; action = &quot;Index&quot;, id = UrlParameter.Optional &#125;               </span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><p>删除MyMvcAreasDemo项目/Areas/Admin文件夹下面的AdminAreaRegistration.cs文件以及Controllers文件夹（包括HomeController）</p>\n</li>\n<li><p>在MyMvcAreasDemo.Admin项目的Controllers里面新建一个HomeController</p>\n</li>\n<li><p>记得保留MyMvcAreasDemo/Areas/Admin下面的Views, 并且在MyMvcAreasDemo项目里面引用MyMvcAreasDemo.Admin项目, 如图：</p>\n</li>\n</ol>\n<p><img src=\"/assets/161129_update_03.png\" alt></p>\n<p>现在运行程序并访问/Admin/Home/Index可以发现Admin项目生效了. 这样, 我们可以将所有的与后台管理相关的Controller都放到这个新的项目中来. 但是很快你会发现, 一个新的“问题”又出现了：</p>\n<p>当你在MyMvcAreasDemo.Admin里面的HomeController添加新的Action（例如List）, 然后习惯性在上面右键-“Add View”后, 你会发现新增的List.cshtml文件会出现在MyMvcAreasDemo.Admin/Views/Home下面, 然后当你访问/Admin/Home/List的时候浏览器会得到错误提示：”The view ‘List’ or its master was not found or no view engine supports the searched locations…”. 原来它只会在主程序MyMvcAreasDemo中的对应目录去寻找View. 这么一来, MVC框架提供给我们的脚手架功能就大打折扣, 当然你可以手动在MyMvcAreasDemo/Areas/Admin/Views中对应添加View, 或者在MyMvcAreasDemo.Admin项目中自动生成了View之后再拷贝过去. 有没有更好的办法呢？</p>\n<h3 id=\"3-自动复制新生成的-View-到-Areas-的-View-文件夹下\"><a href=\"#3-自动复制新生成的-View-到-Areas-的-View-文件夹下\" class=\"headerlink\" title=\"3. 自动复制新生成的 View 到 Areas 的 View 文件夹下\"></a><strong>3. 自动复制新生成的 View 到 Areas 的 View 文件夹下</strong></h3><p>为了使我们在MyMvcAreasDemo.Admin自动生成的View自动同步到MyMvcAreasDemo/Areas/Admin/Views文件夹中，可以使用“生成事件（Build Event）”里的“Post-Build Event”，打开MyMvcAreasDemo.Admin的属性，修改如下图所示：</p>\n<p><img src=\"/assets/161129_autocopybuidevent_04.png\" alt></p>\n<p>生成事件为：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &quot;$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views&quot;</span><br><span class=\"line\">xcopy &quot;$(ProjectDir)Views&quot; &quot;$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views&quot; /S /E /C /Y</span><br></pre></td></tr></table></figure>\n\n<p>意思其实很简单，相信大家都能看得懂，就是完全复制MyMvcAreasDemo.Admin的Views文件夹下所有文件至MyMvcAreasDemo/Areas/Admin/Views中。</p>\n<p>现在再次访问/Admin/Home/List就可以得到正确结果了，并且你可以发现List.cshtml已经被复制到MyMvcAreasDemo/Areas/Admin/Views/Home目录里。</p>\n<h3 id=\"4-另一种思路\"><a href=\"#4-另一种思路\" class=\"headerlink\" title=\"4. 另一种思路\"></a><strong>4. 另一种思路</strong></h3><p>可以直接把 MyMvcAreasDemo.Admin 这个项目创建在 Area 文件夹里, 这里就可以省去 步骤3 的自动复制了</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>原文地址: <a href=\"http://www.cnblogs.com/dingji/archive/2012/05/30/2506420.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/dingji/archive/2012/05/30/2506420.html</a></p>\n</blockquote>\n<h2 id=\"使用Areas分离ASP-NET-MVC项目\"><a href=\"#使用Areas分离ASP-NET-MVC项目\" class=\"headerlink\" title=\"使用Areas分离ASP.NET MVC项目\"></a>使用Areas分离ASP.NET MVC项目</h2><p>随着项目规模的不断扩大, Controller 控制器也随之不断增多. 如果在 Controllers 文件夹下面有超过两位数, 即便采用良好的命名规范, 或者用子文件夹的形式区分不同功能的控制器, 还是会影响项目的可阅读性和可维护性. 因此, 在一些场景下, 如果能把与某功能相关的文件分离到一个独立的项目中是非常有用的. Asp.Net MVC 提供了 Areas(区域) 的概念达到这一目的.</p>","more":"<h3 id=\"1-新建-Areas\"><a href=\"#1-新建-Areas\" class=\"headerlink\" title=\"1. 新建 Areas\"></a><strong>1. 新建 Areas</strong></h3><p>在 MVC 项目上右键新建 Areas, 输入名字, 如: Admin</p>\n<p><img src=\"/assets/161129_usearea_01.png\" alt></p>\n<p>在Areas/Admin/Controllers文件夹下面新建HomeController并添加一个Index的方法和对应的View文件. 这里可以发现Areas的另一个好处：你可以在不同Areas下面添加相同名称的Controller. 当然, 如果你直接这么运行会得到一个错误：</p>\n<p><img src=\"/assets/161129_error_02.png\" alt></p>\n<blockquote>\n<p>这种情况需要修改一下AdminAreaRegistration.cs和Global.asax, 分别为路由加上命名空间限制：</p>\n</blockquote>\n<p><strong>/Areas/Admin/AdminAreaRegistration.cs</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">context.MapRoute(</span><br><span class=\"line\">     &quot;Admin_default&quot;,</span><br><span class=\"line\">     &quot;Admin/&#123;controller&#125;/&#123;action&#125;/&#123;id&#125;&quot;,</span><br><span class=\"line\">     new &#123; action = &quot;Index&quot;, id = UrlParameter.Optional &#125;,</span><br><span class=\"line\">     new string[] &#123; &quot;[项目名称].Areas.Admin.Controllers&quot; &#125;</span><br><span class=\"line\"> );</span><br></pre></td></tr></table></figure>\n\n<p><strong>/Global.asax.cs 或者 RouteConfig.cs</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">routes.MapRoute(    //Default Route</span><br><span class=\"line\">     &quot;Default&quot;, // Route name</span><br><span class=\"line\">     &quot;&#123;controller&#125;/&#123;action&#125;/&#123;id&#125;&quot;, // URL with parameters</span><br><span class=\"line\">     new &#123; controller = &quot;Home&quot;, action = &quot;Index&quot;, id = UrlParameter.Optional &#125;, // Parameter defaults</span><br><span class=\"line\">     new string[] &#123; &quot;[项目名称].Controllers&quot; &#125;</span><br><span class=\"line\"> );</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-改进\"><a href=\"#2-改进\" class=\"headerlink\" title=\"2. 改进\"></a><strong>2. 改进</strong></h3><p>我们需要对现有项目进行一下改造：</p>\n<ol>\n<li><p>在解决方案上面新建一个MyMvcAreasDemo.Admin的MVC3项目, 并且删除Global.asax和Web.config两个文件</p>\n</li>\n<li><p>在根目录新建一个AdminAreaRegistration的类, 输入如下内容：</p>\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class AdminAreaRegistration : AreaRegistration</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    public override string AreaName</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        get</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            return &quot;Admin&quot;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    public override void RegisterArea(AreaRegistrationContext context)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        context.MapRoute(</span><br><span class=\"line\">            &quot;Admin_default&quot;,</span><br><span class=\"line\">            &quot;Admin/&#123;controller&#125;/&#123;action&#125;/&#123;id&#125;&quot;,</span><br><span class=\"line\">            new &#123; action = &quot;Index&quot;, id = UrlParameter.Optional &#125;               </span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><p>删除MyMvcAreasDemo项目/Areas/Admin文件夹下面的AdminAreaRegistration.cs文件以及Controllers文件夹（包括HomeController）</p>\n</li>\n<li><p>在MyMvcAreasDemo.Admin项目的Controllers里面新建一个HomeController</p>\n</li>\n<li><p>记得保留MyMvcAreasDemo/Areas/Admin下面的Views, 并且在MyMvcAreasDemo项目里面引用MyMvcAreasDemo.Admin项目, 如图：</p>\n</li>\n</ol>\n<p><img src=\"/assets/161129_update_03.png\" alt></p>\n<p>现在运行程序并访问/Admin/Home/Index可以发现Admin项目生效了. 这样, 我们可以将所有的与后台管理相关的Controller都放到这个新的项目中来. 但是很快你会发现, 一个新的“问题”又出现了：</p>\n<p>当你在MyMvcAreasDemo.Admin里面的HomeController添加新的Action（例如List）, 然后习惯性在上面右键-“Add View”后, 你会发现新增的List.cshtml文件会出现在MyMvcAreasDemo.Admin/Views/Home下面, 然后当你访问/Admin/Home/List的时候浏览器会得到错误提示：”The view ‘List’ or its master was not found or no view engine supports the searched locations…”. 原来它只会在主程序MyMvcAreasDemo中的对应目录去寻找View. 这么一来, MVC框架提供给我们的脚手架功能就大打折扣, 当然你可以手动在MyMvcAreasDemo/Areas/Admin/Views中对应添加View, 或者在MyMvcAreasDemo.Admin项目中自动生成了View之后再拷贝过去. 有没有更好的办法呢？</p>\n<h3 id=\"3-自动复制新生成的-View-到-Areas-的-View-文件夹下\"><a href=\"#3-自动复制新生成的-View-到-Areas-的-View-文件夹下\" class=\"headerlink\" title=\"3. 自动复制新生成的 View 到 Areas 的 View 文件夹下\"></a><strong>3. 自动复制新生成的 View 到 Areas 的 View 文件夹下</strong></h3><p>为了使我们在MyMvcAreasDemo.Admin自动生成的View自动同步到MyMvcAreasDemo/Areas/Admin/Views文件夹中，可以使用“生成事件（Build Event）”里的“Post-Build Event”，打开MyMvcAreasDemo.Admin的属性，修改如下图所示：</p>\n<p><img src=\"/assets/161129_autocopybuidevent_04.png\" alt></p>\n<p>生成事件为：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir &quot;$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views&quot;</span><br><span class=\"line\">xcopy &quot;$(ProjectDir)Views&quot; &quot;$(SolutionDir)$(SolutionName)\\Areas\\Admin\\Views&quot; /S /E /C /Y</span><br></pre></td></tr></table></figure>\n\n<p>意思其实很简单，相信大家都能看得懂，就是完全复制MyMvcAreasDemo.Admin的Views文件夹下所有文件至MyMvcAreasDemo/Areas/Admin/Views中。</p>\n<p>现在再次访问/Admin/Home/List就可以得到正确结果了，并且你可以发现List.cshtml已经被复制到MyMvcAreasDemo/Areas/Admin/Views/Home目录里。</p>\n<h3 id=\"4-另一种思路\"><a href=\"#4-另一种思路\" class=\"headerlink\" title=\"4. 另一种思路\"></a><strong>4. 另一种思路</strong></h3><p>可以直接把 MyMvcAreasDemo.Admin 这个项目创建在 Area 文件夹里, 这里就可以省去 步骤3 的自动复制了</p>"},{"title":"在新的环境使搭建Hexo操作步骤","date":"2016-10-19T08:37:50.000Z","_content":"\n## 步骤\n\n<!--more-->\n\n0. 确保已经安装了 [Hexo](https://hexo.io/zh-cn/)\n1. 从 [Github](www.github.com) Clone项目到一个文件夹\n2. 进入Clone完成后的文件夹内\n3. 执行 `git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia`\n4. 根据 `theme_source_config` 里的文件对比修改 `themes/yilia/` 里的文件\n5. 之后就可以在根目录的 `source` 文件夹 (注意: 不是`theme/yilia`下的 `source`) 中添加`Markdown`文件了\n6. 执行 `hexo` 的相应操作\n\n## yilia主题操作\n地址: **[https://github.com/litten/hexo-theme-yilia](https://github.com/litten/hexo-theme-yilia)**\n\n### 使用\n#### 安装\n`$ git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia`\n<p style=\"color:red;\">可以更改名称, 但要与 _config.yml 中填写的主题名称一致</p>\n\n#### 配置\n> 修改 hexo根目录(Clone完成后的文件夹) 下的_config.yml ： theme: yilia\n\n#### 更新\n```\ncd themes/yilia\ngit pull\n```\n\n### 配置文件说明\n```\n# Header\n\nmenu:\n  主页: /\n  随笔: /essay\n  心独白: /inner_monologue\n\n# SubNav\nsubnav:\n  github: \"https://github.com/bogerv\"\n  weibo: \"#\"\n  #rss: \"#\"\n  zhihu: \"#\"\n  #douban: \"#\"\n  #mail: \"mailto:litten225@qq.com\"\n  #facebook: \"#\"\n  #google: \"#\"\n  #twitter: \"#\"\n  #linkedin: \"#\"\n\nrss: /atom.xml\n\n# 是否需要修改 root 路径\n# 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，\n# 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。\nroot: \n\n# Content\n\n# 文章太长，截断按钮文字\nexcerpt_link: more\n# 文章卡片右下角常驻链接，不需要请设置为false\nshow_all_link: '展开全文'\n# 数学公式\nmathjax: false\n# 是否在新窗口打开链接\nopen_in_new: false\n\n# 打赏\n# 请在需要打赏的文章的md文件头部，设置属性reward: true\n\n# 打赏基础设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏\nreward_type: 1\n# 打赏wording\nreward_wording: '谢谢你请我吃糖果'\n# 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg\nalipay: \n# 微信二维码图片地址\nweixin: \n\n# Miscellaneous\ngoogle_analytics: ''\nfavicon: favicon.png\n\n#你的头像url\navatar: /assets/img/favicon.jpg\n\n#是否开启分享\nshare_jia: false\n\n#是否开启多说评论，填写你在多说申请的项目名称 duoshuo: duoshuo-key\n#若使用disqus，请在博客config文件中填写disqus_shortname，并关闭多说评论\nduoshuo: false\n\n# 智能菜单\n# 如不需要，将该对应项置为false\n# 比如\n#smart_menu:\n#  friends: false\nsmart_menu:\n  innerArchive: '所有文章'\n  friends: '友链'\n  aboutme: '关于我'\n\nfriends:\n  友情链接1: http://localhost:4000/\n  友情链接2: http://localhost:4000/\n  友情链接3: http://localhost:4000/\n  友情链接4: http://localhost:4000/\n  友情链接5: http://localhost:4000/\n  友情链接6: http://localhost:4000/\n\naboutme: 很惭愧<br><br>只做了一点微小的工作<br>谢谢大家\n```","source":"_posts/steps.md","raw":"---\ntitle: 在新的环境使搭建Hexo操作步骤\ndate: 2016-10-19 16:37:50\n---\n\n## 步骤\n\n<!--more-->\n\n0. 确保已经安装了 [Hexo](https://hexo.io/zh-cn/)\n1. 从 [Github](www.github.com) Clone项目到一个文件夹\n2. 进入Clone完成后的文件夹内\n3. 执行 `git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia`\n4. 根据 `theme_source_config` 里的文件对比修改 `themes/yilia/` 里的文件\n5. 之后就可以在根目录的 `source` 文件夹 (注意: 不是`theme/yilia`下的 `source`) 中添加`Markdown`文件了\n6. 执行 `hexo` 的相应操作\n\n## yilia主题操作\n地址: **[https://github.com/litten/hexo-theme-yilia](https://github.com/litten/hexo-theme-yilia)**\n\n### 使用\n#### 安装\n`$ git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia`\n<p style=\"color:red;\">可以更改名称, 但要与 _config.yml 中填写的主题名称一致</p>\n\n#### 配置\n> 修改 hexo根目录(Clone完成后的文件夹) 下的_config.yml ： theme: yilia\n\n#### 更新\n```\ncd themes/yilia\ngit pull\n```\n\n### 配置文件说明\n```\n# Header\n\nmenu:\n  主页: /\n  随笔: /essay\n  心独白: /inner_monologue\n\n# SubNav\nsubnav:\n  github: \"https://github.com/bogerv\"\n  weibo: \"#\"\n  #rss: \"#\"\n  zhihu: \"#\"\n  #douban: \"#\"\n  #mail: \"mailto:litten225@qq.com\"\n  #facebook: \"#\"\n  #google: \"#\"\n  #twitter: \"#\"\n  #linkedin: \"#\"\n\nrss: /atom.xml\n\n# 是否需要修改 root 路径\n# 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，\n# 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。\nroot: \n\n# Content\n\n# 文章太长，截断按钮文字\nexcerpt_link: more\n# 文章卡片右下角常驻链接，不需要请设置为false\nshow_all_link: '展开全文'\n# 数学公式\nmathjax: false\n# 是否在新窗口打开链接\nopen_in_new: false\n\n# 打赏\n# 请在需要打赏的文章的md文件头部，设置属性reward: true\n\n# 打赏基础设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏\nreward_type: 1\n# 打赏wording\nreward_wording: '谢谢你请我吃糖果'\n# 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg\nalipay: \n# 微信二维码图片地址\nweixin: \n\n# Miscellaneous\ngoogle_analytics: ''\nfavicon: favicon.png\n\n#你的头像url\navatar: /assets/img/favicon.jpg\n\n#是否开启分享\nshare_jia: false\n\n#是否开启多说评论，填写你在多说申请的项目名称 duoshuo: duoshuo-key\n#若使用disqus，请在博客config文件中填写disqus_shortname，并关闭多说评论\nduoshuo: false\n\n# 智能菜单\n# 如不需要，将该对应项置为false\n# 比如\n#smart_menu:\n#  friends: false\nsmart_menu:\n  innerArchive: '所有文章'\n  friends: '友链'\n  aboutme: '关于我'\n\nfriends:\n  友情链接1: http://localhost:4000/\n  友情链接2: http://localhost:4000/\n  友情链接3: http://localhost:4000/\n  友情链接4: http://localhost:4000/\n  友情链接5: http://localhost:4000/\n  友情链接6: http://localhost:4000/\n\naboutme: 很惭愧<br><br>只做了一点微小的工作<br>谢谢大家\n```","slug":"steps","published":1,"updated":"2020-01-09T20:21:18.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r40017bicasrm5v67s","content":"<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2><a id=\"more\"></a>\n\n<ol start=\"0\">\n<li>确保已经安装了 <a href=\"https://hexo.io/zh-cn/\" target=\"_blank\" rel=\"noopener\">Hexo</a></li>\n<li>从 <a href=\"www.github.com\">Github</a> Clone项目到一个文件夹</li>\n<li>进入Clone完成后的文件夹内</li>\n<li>执行 <code>git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</code></li>\n<li>根据 <code>theme_source_config</code> 里的文件对比修改 <code>themes/yilia/</code> 里的文件</li>\n<li>之后就可以在根目录的 <code>source</code> 文件夹 (注意: 不是<code>theme/yilia</code>下的 <code>source</code>) 中添加<code>Markdown</code>文件了</li>\n<li>执行 <code>hexo</code> 的相应操作</li>\n</ol>\n<h2 id=\"yilia主题操作\"><a href=\"#yilia主题操作\" class=\"headerlink\" title=\"yilia主题操作\"></a>yilia主题操作</h2><p>地址: <strong><a href=\"https://github.com/litten/hexo-theme-yilia\" target=\"_blank\" rel=\"noopener\">https://github.com/litten/hexo-theme-yilia</a></strong></p>\n<h3 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h3><h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><p><code>$ git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</code></p>\n<p style=\"color:red;\">可以更改名称, 但要与 _config.yml 中填写的主题名称一致</p>\n\n<h4 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h4><blockquote>\n<p>修改 hexo根目录(Clone完成后的文件夹) 下的_config.yml ： theme: yilia</p>\n</blockquote>\n<h4 id=\"更新\"><a href=\"#更新\" class=\"headerlink\" title=\"更新\"></a>更新</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd themes/yilia</span><br><span class=\"line\">git pull</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置文件说明\"><a href=\"#配置文件说明\" class=\"headerlink\" title=\"配置文件说明\"></a>配置文件说明</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Header</span><br><span class=\"line\"></span><br><span class=\"line\">menu:</span><br><span class=\"line\">  主页: /</span><br><span class=\"line\">  随笔: /essay</span><br><span class=\"line\">  心独白: /inner_monologue</span><br><span class=\"line\"></span><br><span class=\"line\"># SubNav</span><br><span class=\"line\">subnav:</span><br><span class=\"line\">  github: &quot;https://github.com/bogerv&quot;</span><br><span class=\"line\">  weibo: &quot;#&quot;</span><br><span class=\"line\">  #rss: &quot;#&quot;</span><br><span class=\"line\">  zhihu: &quot;#&quot;</span><br><span class=\"line\">  #douban: &quot;#&quot;</span><br><span class=\"line\">  #mail: &quot;mailto:litten225@qq.com&quot;</span><br><span class=\"line\">  #facebook: &quot;#&quot;</span><br><span class=\"line\">  #google: &quot;#&quot;</span><br><span class=\"line\">  #twitter: &quot;#&quot;</span><br><span class=\"line\">  #linkedin: &quot;#&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">rss: /atom.xml</span><br><span class=\"line\"></span><br><span class=\"line\"># 是否需要修改 root 路径</span><br><span class=\"line\"># 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，</span><br><span class=\"line\"># 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。</span><br><span class=\"line\">root: </span><br><span class=\"line\"></span><br><span class=\"line\"># Content</span><br><span class=\"line\"></span><br><span class=\"line\"># 文章太长，截断按钮文字</span><br><span class=\"line\">excerpt_link: more</span><br><span class=\"line\"># 文章卡片右下角常驻链接，不需要请设置为false</span><br><span class=\"line\">show_all_link: &apos;展开全文&apos;</span><br><span class=\"line\"># 数学公式</span><br><span class=\"line\">mathjax: false</span><br><span class=\"line\"># 是否在新窗口打开链接</span><br><span class=\"line\">open_in_new: false</span><br><span class=\"line\"></span><br><span class=\"line\"># 打赏</span><br><span class=\"line\"># 请在需要打赏的文章的md文件头部，设置属性reward: true</span><br><span class=\"line\"></span><br><span class=\"line\"># 打赏基础设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span><br><span class=\"line\">reward_type: 1</span><br><span class=\"line\"># 打赏wording</span><br><span class=\"line\">reward_wording: &apos;谢谢你请我吃糖果&apos;</span><br><span class=\"line\"># 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span><br><span class=\"line\">alipay: </span><br><span class=\"line\"># 微信二维码图片地址</span><br><span class=\"line\">weixin: </span><br><span class=\"line\"></span><br><span class=\"line\"># Miscellaneous</span><br><span class=\"line\">google_analytics: &apos;&apos;</span><br><span class=\"line\">favicon: favicon.png</span><br><span class=\"line\"></span><br><span class=\"line\">#你的头像url</span><br><span class=\"line\">avatar: /assets/img/favicon.jpg</span><br><span class=\"line\"></span><br><span class=\"line\">#是否开启分享</span><br><span class=\"line\">share_jia: false</span><br><span class=\"line\"></span><br><span class=\"line\">#是否开启多说评论，填写你在多说申请的项目名称 duoshuo: duoshuo-key</span><br><span class=\"line\">#若使用disqus，请在博客config文件中填写disqus_shortname，并关闭多说评论</span><br><span class=\"line\">duoshuo: false</span><br><span class=\"line\"></span><br><span class=\"line\"># 智能菜单</span><br><span class=\"line\"># 如不需要，将该对应项置为false</span><br><span class=\"line\"># 比如</span><br><span class=\"line\">#smart_menu:</span><br><span class=\"line\">#  friends: false</span><br><span class=\"line\">smart_menu:</span><br><span class=\"line\">  innerArchive: &apos;所有文章&apos;</span><br><span class=\"line\">  friends: &apos;友链&apos;</span><br><span class=\"line\">  aboutme: &apos;关于我&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">friends:</span><br><span class=\"line\">  友情链接1: http://localhost:4000/</span><br><span class=\"line\">  友情链接2: http://localhost:4000/</span><br><span class=\"line\">  友情链接3: http://localhost:4000/</span><br><span class=\"line\">  友情链接4: http://localhost:4000/</span><br><span class=\"line\">  友情链接5: http://localhost:4000/</span><br><span class=\"line\">  友情链接6: http://localhost:4000/</span><br><span class=\"line\"></span><br><span class=\"line\">aboutme: 很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<h2 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h2>","more":"<ol start=\"0\">\n<li>确保已经安装了 <a href=\"https://hexo.io/zh-cn/\" target=\"_blank\" rel=\"noopener\">Hexo</a></li>\n<li>从 <a href=\"www.github.com\">Github</a> Clone项目到一个文件夹</li>\n<li>进入Clone完成后的文件夹内</li>\n<li>执行 <code>git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</code></li>\n<li>根据 <code>theme_source_config</code> 里的文件对比修改 <code>themes/yilia/</code> 里的文件</li>\n<li>之后就可以在根目录的 <code>source</code> 文件夹 (注意: 不是<code>theme/yilia</code>下的 <code>source</code>) 中添加<code>Markdown</code>文件了</li>\n<li>执行 <code>hexo</code> 的相应操作</li>\n</ol>\n<h2 id=\"yilia主题操作\"><a href=\"#yilia主题操作\" class=\"headerlink\" title=\"yilia主题操作\"></a>yilia主题操作</h2><p>地址: <strong><a href=\"https://github.com/litten/hexo-theme-yilia\" target=\"_blank\" rel=\"noopener\">https://github.com/litten/hexo-theme-yilia</a></strong></p>\n<h3 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h3><h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><p><code>$ git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</code></p>\n<p style=\"color:red;\">可以更改名称, 但要与 _config.yml 中填写的主题名称一致</p>\n\n<h4 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h4><blockquote>\n<p>修改 hexo根目录(Clone完成后的文件夹) 下的_config.yml ： theme: yilia</p>\n</blockquote>\n<h4 id=\"更新\"><a href=\"#更新\" class=\"headerlink\" title=\"更新\"></a>更新</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd themes/yilia</span><br><span class=\"line\">git pull</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"配置文件说明\"><a href=\"#配置文件说明\" class=\"headerlink\" title=\"配置文件说明\"></a>配置文件说明</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Header</span><br><span class=\"line\"></span><br><span class=\"line\">menu:</span><br><span class=\"line\">  主页: /</span><br><span class=\"line\">  随笔: /essay</span><br><span class=\"line\">  心独白: /inner_monologue</span><br><span class=\"line\"></span><br><span class=\"line\"># SubNav</span><br><span class=\"line\">subnav:</span><br><span class=\"line\">  github: &quot;https://github.com/bogerv&quot;</span><br><span class=\"line\">  weibo: &quot;#&quot;</span><br><span class=\"line\">  #rss: &quot;#&quot;</span><br><span class=\"line\">  zhihu: &quot;#&quot;</span><br><span class=\"line\">  #douban: &quot;#&quot;</span><br><span class=\"line\">  #mail: &quot;mailto:litten225@qq.com&quot;</span><br><span class=\"line\">  #facebook: &quot;#&quot;</span><br><span class=\"line\">  #google: &quot;#&quot;</span><br><span class=\"line\">  #twitter: &quot;#&quot;</span><br><span class=\"line\">  #linkedin: &quot;#&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">rss: /atom.xml</span><br><span class=\"line\"></span><br><span class=\"line\"># 是否需要修改 root 路径</span><br><span class=\"line\"># 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，</span><br><span class=\"line\"># 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。</span><br><span class=\"line\">root: </span><br><span class=\"line\"></span><br><span class=\"line\"># Content</span><br><span class=\"line\"></span><br><span class=\"line\"># 文章太长，截断按钮文字</span><br><span class=\"line\">excerpt_link: more</span><br><span class=\"line\"># 文章卡片右下角常驻链接，不需要请设置为false</span><br><span class=\"line\">show_all_link: &apos;展开全文&apos;</span><br><span class=\"line\"># 数学公式</span><br><span class=\"line\">mathjax: false</span><br><span class=\"line\"># 是否在新窗口打开链接</span><br><span class=\"line\">open_in_new: false</span><br><span class=\"line\"></span><br><span class=\"line\"># 打赏</span><br><span class=\"line\"># 请在需要打赏的文章的md文件头部，设置属性reward: true</span><br><span class=\"line\"></span><br><span class=\"line\"># 打赏基础设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span><br><span class=\"line\">reward_type: 1</span><br><span class=\"line\"># 打赏wording</span><br><span class=\"line\">reward_wording: &apos;谢谢你请我吃糖果&apos;</span><br><span class=\"line\"># 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span><br><span class=\"line\">alipay: </span><br><span class=\"line\"># 微信二维码图片地址</span><br><span class=\"line\">weixin: </span><br><span class=\"line\"></span><br><span class=\"line\"># Miscellaneous</span><br><span class=\"line\">google_analytics: &apos;&apos;</span><br><span class=\"line\">favicon: favicon.png</span><br><span class=\"line\"></span><br><span class=\"line\">#你的头像url</span><br><span class=\"line\">avatar: /assets/img/favicon.jpg</span><br><span class=\"line\"></span><br><span class=\"line\">#是否开启分享</span><br><span class=\"line\">share_jia: false</span><br><span class=\"line\"></span><br><span class=\"line\">#是否开启多说评论，填写你在多说申请的项目名称 duoshuo: duoshuo-key</span><br><span class=\"line\">#若使用disqus，请在博客config文件中填写disqus_shortname，并关闭多说评论</span><br><span class=\"line\">duoshuo: false</span><br><span class=\"line\"></span><br><span class=\"line\"># 智能菜单</span><br><span class=\"line\"># 如不需要，将该对应项置为false</span><br><span class=\"line\"># 比如</span><br><span class=\"line\">#smart_menu:</span><br><span class=\"line\">#  friends: false</span><br><span class=\"line\">smart_menu:</span><br><span class=\"line\">  innerArchive: &apos;所有文章&apos;</span><br><span class=\"line\">  friends: &apos;友链&apos;</span><br><span class=\"line\">  aboutme: &apos;关于我&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">friends:</span><br><span class=\"line\">  友情链接1: http://localhost:4000/</span><br><span class=\"line\">  友情链接2: http://localhost:4000/</span><br><span class=\"line\">  友情链接3: http://localhost:4000/</span><br><span class=\"line\">  友情链接4: http://localhost:4000/</span><br><span class=\"line\">  友情链接5: http://localhost:4000/</span><br><span class=\"line\">  友情链接6: http://localhost:4000/</span><br><span class=\"line\"></span><br><span class=\"line\">aboutme: 很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</span><br></pre></td></tr></table></figure>"},{"title":"在 VS 中远程部署 ASP.NET MVC 项目到服务器","date":"2017-02-22T12:35:03.000Z","_content":"\n## 前言\n想必以前我们都有过将 ASP.NET MVC 项目部署到远程服务器的经历, 最普通也最麻烦的方法就是将发布后的项目打包上传到远程服务器, 操作起来非常不方便. VS 其实从很早就支持将项目 Publish 到远程的操作.\n> 现在也有很多自动化部署工具, Jenkins, PowerShell 脚本等等, 暂不讨论\n\n## 部署环境\nWindows Server 2008 R2 Enterprise\nVisual Studio 13 +\n\n## 配置远程服务器\n\n### 安装 Web Deploy\nWeb Deploy, 下载地址: [http://www.iis.net/downloads/microsoft/web-deploy](http://www.iis.net/downloads/microsoft/web-deploy)\n> 安装 3.5 以上版本, 否则发布项目时会出项 \"无法连接到远程服务器\" 的错误提示\n\n<!--more-->\n\n### 启用 IIS 的管理服务\n在管理服务中添加 IIS 的 Management Service 功能.\n\n![](/assets/webdeploy/1.server_manager_add_features.png)\n\n![](/assets/webdeploy/2.iis_management_service.png)\n\n安装完成之后, 确保在 \"服务\" 中将其启动:\n\n![](/assets/webdeploy/3.as_service_started.png)\n\n> 如果该服务没有启动, 或者没有启用 \"Management Service\" 功能, 则在使用 Web Deploy 部署项目时会遇到如下错误: ![](/assets/webdeploy/4.error.png)\n\n### IIS 设置\n启用管理服务后, 进入 IIS, 会多出 Management Service 选项:\n\n![](/assets/webdeploy/5.iis_home.png)\n\n双击进行配置:\n\n![](/assets/webdeploy/6.management_service_setting.png)\n\n### 配置远部署项目的账户\n双击 IIS Manager Users:\n\n![](/assets/webdeploy/7.iis_user.png)\n\n点击 Add User...:\n\n![](/assets/webdeploy/8.iis_user_add.png)\n\n输入用户名密码:\n> 在 VS 中发布是也需要此次输入的用户名和密码\n\n![](/assets/webdeploy/9.iis_user_name_pass.png)\n\n### 配置站点用户权限\n点击要发布的站点, 然后选择 IIS Manager Persmissions:\n\n![](/assets/webdeploy/10.iis_user_permission.png)\n\n之后点击 \"Allow User\" :\n\n![](/assets/webdeploy/11.iis_allow_user.png)\n\n将之前添加的 test 用户加入:\n\n![](/assets/webdeploy/12.select_user.png)\n\n### 为站点目录添加本地服务的修改权限\n\"LOCAL SERVICE\" 账户要有修改 项目发布文件夹 的权限:\n\n![](/assets/webdeploy/17.floder_peimission.png)\n\n![](/assets/webdeploy/18.full_setting.png)\n\n\n## 使用 Visual Studio 2015 远程部署项目\n新建一个配置文件:\n\n![](/assets/webdeploy/13.pubish.png)\n\n配置 Web Deploy:\n\n![](/assets/webdeploy/15.connection.png)\n\n点击检查就可以了:\n\n![](/assets/webdeploy/16.check.png)\n\n> 默认会在本地浏览器打开","source":"_posts/vs_remote_deployment_webapp.md","raw":"---\ntitle: 在 VS 中远程部署 ASP.NET MVC 项目到服务器\ndate: 2017-02-22 20:35:03\ntags: [ASP.NET MVC,Visual Stduio]\n---\n\n## 前言\n想必以前我们都有过将 ASP.NET MVC 项目部署到远程服务器的经历, 最普通也最麻烦的方法就是将发布后的项目打包上传到远程服务器, 操作起来非常不方便. VS 其实从很早就支持将项目 Publish 到远程的操作.\n> 现在也有很多自动化部署工具, Jenkins, PowerShell 脚本等等, 暂不讨论\n\n## 部署环境\nWindows Server 2008 R2 Enterprise\nVisual Studio 13 +\n\n## 配置远程服务器\n\n### 安装 Web Deploy\nWeb Deploy, 下载地址: [http://www.iis.net/downloads/microsoft/web-deploy](http://www.iis.net/downloads/microsoft/web-deploy)\n> 安装 3.5 以上版本, 否则发布项目时会出项 \"无法连接到远程服务器\" 的错误提示\n\n<!--more-->\n\n### 启用 IIS 的管理服务\n在管理服务中添加 IIS 的 Management Service 功能.\n\n![](/assets/webdeploy/1.server_manager_add_features.png)\n\n![](/assets/webdeploy/2.iis_management_service.png)\n\n安装完成之后, 确保在 \"服务\" 中将其启动:\n\n![](/assets/webdeploy/3.as_service_started.png)\n\n> 如果该服务没有启动, 或者没有启用 \"Management Service\" 功能, 则在使用 Web Deploy 部署项目时会遇到如下错误: ![](/assets/webdeploy/4.error.png)\n\n### IIS 设置\n启用管理服务后, 进入 IIS, 会多出 Management Service 选项:\n\n![](/assets/webdeploy/5.iis_home.png)\n\n双击进行配置:\n\n![](/assets/webdeploy/6.management_service_setting.png)\n\n### 配置远部署项目的账户\n双击 IIS Manager Users:\n\n![](/assets/webdeploy/7.iis_user.png)\n\n点击 Add User...:\n\n![](/assets/webdeploy/8.iis_user_add.png)\n\n输入用户名密码:\n> 在 VS 中发布是也需要此次输入的用户名和密码\n\n![](/assets/webdeploy/9.iis_user_name_pass.png)\n\n### 配置站点用户权限\n点击要发布的站点, 然后选择 IIS Manager Persmissions:\n\n![](/assets/webdeploy/10.iis_user_permission.png)\n\n之后点击 \"Allow User\" :\n\n![](/assets/webdeploy/11.iis_allow_user.png)\n\n将之前添加的 test 用户加入:\n\n![](/assets/webdeploy/12.select_user.png)\n\n### 为站点目录添加本地服务的修改权限\n\"LOCAL SERVICE\" 账户要有修改 项目发布文件夹 的权限:\n\n![](/assets/webdeploy/17.floder_peimission.png)\n\n![](/assets/webdeploy/18.full_setting.png)\n\n\n## 使用 Visual Studio 2015 远程部署项目\n新建一个配置文件:\n\n![](/assets/webdeploy/13.pubish.png)\n\n配置 Web Deploy:\n\n![](/assets/webdeploy/15.connection.png)\n\n点击检查就可以了:\n\n![](/assets/webdeploy/16.check.png)\n\n> 默认会在本地浏览器打开","slug":"vs_remote_deployment_webapp","published":1,"updated":"2020-01-09T20:21:18.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r50018bicahvohcm47","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>想必以前我们都有过将 ASP.NET MVC 项目部署到远程服务器的经历, 最普通也最麻烦的方法就是将发布后的项目打包上传到远程服务器, 操作起来非常不方便. VS 其实从很早就支持将项目 Publish 到远程的操作.</p>\n<blockquote>\n<p>现在也有很多自动化部署工具, Jenkins, PowerShell 脚本等等, 暂不讨论</p>\n</blockquote>\n<h2 id=\"部署环境\"><a href=\"#部署环境\" class=\"headerlink\" title=\"部署环境\"></a>部署环境</h2><p>Windows Server 2008 R2 Enterprise<br>Visual Studio 13 +</p>\n<h2 id=\"配置远程服务器\"><a href=\"#配置远程服务器\" class=\"headerlink\" title=\"配置远程服务器\"></a>配置远程服务器</h2><h3 id=\"安装-Web-Deploy\"><a href=\"#安装-Web-Deploy\" class=\"headerlink\" title=\"安装 Web Deploy\"></a>安装 Web Deploy</h3><p>Web Deploy, 下载地址: <a href=\"http://www.iis.net/downloads/microsoft/web-deploy\" target=\"_blank\" rel=\"noopener\">http://www.iis.net/downloads/microsoft/web-deploy</a></p>\n<blockquote>\n<p>安装 3.5 以上版本, 否则发布项目时会出项 “无法连接到远程服务器” 的错误提示</p>\n</blockquote>\n<a id=\"more\"></a>\n\n<h3 id=\"启用-IIS-的管理服务\"><a href=\"#启用-IIS-的管理服务\" class=\"headerlink\" title=\"启用 IIS 的管理服务\"></a>启用 IIS 的管理服务</h3><p>在管理服务中添加 IIS 的 Management Service 功能.</p>\n<p><img src=\"/assets/webdeploy/1.server_manager_add_features.png\" alt></p>\n<p><img src=\"/assets/webdeploy/2.iis_management_service.png\" alt></p>\n<p>安装完成之后, 确保在 “服务” 中将其启动:</p>\n<p><img src=\"/assets/webdeploy/3.as_service_started.png\" alt></p>\n<blockquote>\n<p>如果该服务没有启动, 或者没有启用 “Management Service” 功能, 则在使用 Web Deploy 部署项目时会遇到如下错误: <img src=\"/assets/webdeploy/4.error.png\" alt></p>\n</blockquote>\n<h3 id=\"IIS-设置\"><a href=\"#IIS-设置\" class=\"headerlink\" title=\"IIS 设置\"></a>IIS 设置</h3><p>启用管理服务后, 进入 IIS, 会多出 Management Service 选项:</p>\n<p><img src=\"/assets/webdeploy/5.iis_home.png\" alt></p>\n<p>双击进行配置:</p>\n<p><img src=\"/assets/webdeploy/6.management_service_setting.png\" alt></p>\n<h3 id=\"配置远部署项目的账户\"><a href=\"#配置远部署项目的账户\" class=\"headerlink\" title=\"配置远部署项目的账户\"></a>配置远部署项目的账户</h3><p>双击 IIS Manager Users:</p>\n<p><img src=\"/assets/webdeploy/7.iis_user.png\" alt></p>\n<p>点击 Add User…:</p>\n<p><img src=\"/assets/webdeploy/8.iis_user_add.png\" alt></p>\n<p>输入用户名密码:</p>\n<blockquote>\n<p>在 VS 中发布是也需要此次输入的用户名和密码</p>\n</blockquote>\n<p><img src=\"/assets/webdeploy/9.iis_user_name_pass.png\" alt></p>\n<h3 id=\"配置站点用户权限\"><a href=\"#配置站点用户权限\" class=\"headerlink\" title=\"配置站点用户权限\"></a>配置站点用户权限</h3><p>点击要发布的站点, 然后选择 IIS Manager Persmissions:</p>\n<p><img src=\"/assets/webdeploy/10.iis_user_permission.png\" alt></p>\n<p>之后点击 “Allow User” :</p>\n<p><img src=\"/assets/webdeploy/11.iis_allow_user.png\" alt></p>\n<p>将之前添加的 test 用户加入:</p>\n<p><img src=\"/assets/webdeploy/12.select_user.png\" alt></p>\n<h3 id=\"为站点目录添加本地服务的修改权限\"><a href=\"#为站点目录添加本地服务的修改权限\" class=\"headerlink\" title=\"为站点目录添加本地服务的修改权限\"></a>为站点目录添加本地服务的修改权限</h3><p>“LOCAL SERVICE” 账户要有修改 项目发布文件夹 的权限:</p>\n<p><img src=\"/assets/webdeploy/17.floder_peimission.png\" alt></p>\n<p><img src=\"/assets/webdeploy/18.full_setting.png\" alt></p>\n<h2 id=\"使用-Visual-Studio-2015-远程部署项目\"><a href=\"#使用-Visual-Studio-2015-远程部署项目\" class=\"headerlink\" title=\"使用 Visual Studio 2015 远程部署项目\"></a>使用 Visual Studio 2015 远程部署项目</h2><p>新建一个配置文件:</p>\n<p><img src=\"/assets/webdeploy/13.pubish.png\" alt></p>\n<p>配置 Web Deploy:</p>\n<p><img src=\"/assets/webdeploy/15.connection.png\" alt></p>\n<p>点击检查就可以了:</p>\n<p><img src=\"/assets/webdeploy/16.check.png\" alt></p>\n<blockquote>\n<p>默认会在本地浏览器打开</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>想必以前我们都有过将 ASP.NET MVC 项目部署到远程服务器的经历, 最普通也最麻烦的方法就是将发布后的项目打包上传到远程服务器, 操作起来非常不方便. VS 其实从很早就支持将项目 Publish 到远程的操作.</p>\n<blockquote>\n<p>现在也有很多自动化部署工具, Jenkins, PowerShell 脚本等等, 暂不讨论</p>\n</blockquote>\n<h2 id=\"部署环境\"><a href=\"#部署环境\" class=\"headerlink\" title=\"部署环境\"></a>部署环境</h2><p>Windows Server 2008 R2 Enterprise<br>Visual Studio 13 +</p>\n<h2 id=\"配置远程服务器\"><a href=\"#配置远程服务器\" class=\"headerlink\" title=\"配置远程服务器\"></a>配置远程服务器</h2><h3 id=\"安装-Web-Deploy\"><a href=\"#安装-Web-Deploy\" class=\"headerlink\" title=\"安装 Web Deploy\"></a>安装 Web Deploy</h3><p>Web Deploy, 下载地址: <a href=\"http://www.iis.net/downloads/microsoft/web-deploy\" target=\"_blank\" rel=\"noopener\">http://www.iis.net/downloads/microsoft/web-deploy</a></p>\n<blockquote>\n<p>安装 3.5 以上版本, 否则发布项目时会出项 “无法连接到远程服务器” 的错误提示</p>\n</blockquote>","more":"<h3 id=\"启用-IIS-的管理服务\"><a href=\"#启用-IIS-的管理服务\" class=\"headerlink\" title=\"启用 IIS 的管理服务\"></a>启用 IIS 的管理服务</h3><p>在管理服务中添加 IIS 的 Management Service 功能.</p>\n<p><img src=\"/assets/webdeploy/1.server_manager_add_features.png\" alt></p>\n<p><img src=\"/assets/webdeploy/2.iis_management_service.png\" alt></p>\n<p>安装完成之后, 确保在 “服务” 中将其启动:</p>\n<p><img src=\"/assets/webdeploy/3.as_service_started.png\" alt></p>\n<blockquote>\n<p>如果该服务没有启动, 或者没有启用 “Management Service” 功能, 则在使用 Web Deploy 部署项目时会遇到如下错误: <img src=\"/assets/webdeploy/4.error.png\" alt></p>\n</blockquote>\n<h3 id=\"IIS-设置\"><a href=\"#IIS-设置\" class=\"headerlink\" title=\"IIS 设置\"></a>IIS 设置</h3><p>启用管理服务后, 进入 IIS, 会多出 Management Service 选项:</p>\n<p><img src=\"/assets/webdeploy/5.iis_home.png\" alt></p>\n<p>双击进行配置:</p>\n<p><img src=\"/assets/webdeploy/6.management_service_setting.png\" alt></p>\n<h3 id=\"配置远部署项目的账户\"><a href=\"#配置远部署项目的账户\" class=\"headerlink\" title=\"配置远部署项目的账户\"></a>配置远部署项目的账户</h3><p>双击 IIS Manager Users:</p>\n<p><img src=\"/assets/webdeploy/7.iis_user.png\" alt></p>\n<p>点击 Add User…:</p>\n<p><img src=\"/assets/webdeploy/8.iis_user_add.png\" alt></p>\n<p>输入用户名密码:</p>\n<blockquote>\n<p>在 VS 中发布是也需要此次输入的用户名和密码</p>\n</blockquote>\n<p><img src=\"/assets/webdeploy/9.iis_user_name_pass.png\" alt></p>\n<h3 id=\"配置站点用户权限\"><a href=\"#配置站点用户权限\" class=\"headerlink\" title=\"配置站点用户权限\"></a>配置站点用户权限</h3><p>点击要发布的站点, 然后选择 IIS Manager Persmissions:</p>\n<p><img src=\"/assets/webdeploy/10.iis_user_permission.png\" alt></p>\n<p>之后点击 “Allow User” :</p>\n<p><img src=\"/assets/webdeploy/11.iis_allow_user.png\" alt></p>\n<p>将之前添加的 test 用户加入:</p>\n<p><img src=\"/assets/webdeploy/12.select_user.png\" alt></p>\n<h3 id=\"为站点目录添加本地服务的修改权限\"><a href=\"#为站点目录添加本地服务的修改权限\" class=\"headerlink\" title=\"为站点目录添加本地服务的修改权限\"></a>为站点目录添加本地服务的修改权限</h3><p>“LOCAL SERVICE” 账户要有修改 项目发布文件夹 的权限:</p>\n<p><img src=\"/assets/webdeploy/17.floder_peimission.png\" alt></p>\n<p><img src=\"/assets/webdeploy/18.full_setting.png\" alt></p>\n<h2 id=\"使用-Visual-Studio-2015-远程部署项目\"><a href=\"#使用-Visual-Studio-2015-远程部署项目\" class=\"headerlink\" title=\"使用 Visual Studio 2015 远程部署项目\"></a>使用 Visual Studio 2015 远程部署项目</h2><p>新建一个配置文件:</p>\n<p><img src=\"/assets/webdeploy/13.pubish.png\" alt></p>\n<p>配置 Web Deploy:</p>\n<p><img src=\"/assets/webdeploy/15.connection.png\" alt></p>\n<p>点击检查就可以了:</p>\n<p><img src=\"/assets/webdeploy/16.check.png\" alt></p>\n<blockquote>\n<p>默认会在本地浏览器打开</p>\n</blockquote>"},{"title":"Yarn 基本使用","date":"2016-12-02T03:30:00.000Z","_content":"\n> Yarn 官网: https://yarnpkg.com\n\n## Yarn 简介\nYarn 可以作为类似 npm 的包管理工具, 相比 npm 速度更快\n\n<!--more-->\n\n### **初始化**\n```\nyarn init\n```\n输入一些基本参数后, 会在目录下生成 project.json 文件\n\n### **添加依赖项**\n```\nyarn add [package]\nyarn add [package]@[version]\nyarn add [package]@[tag]\n```\n也可以使用开源项目的地址, 如 jquery-confirm\n```\nyarn add https://github.com/craftpip/jquery-confirm.git\n```\n\n### **升级依赖项**\n```\nyarn upgrade [package]\nyarn upgrade [package]@[version]\nyarn upgrade [package]@[tag]\n```\n\n### **移除依赖项**\n```\nyarn remove [package]\n```\n\n### **安装所有依赖项**\n```\nyarn\n```\n或者\n```\nyarn install\n```\n\n> 更多 CLI Introduction: https://yarnpkg.com/en/docs/cli/","source":"_posts/yarn_basic_use.md","raw":"---\ntitle: Yarn 基本使用\ndate: 2016-12-02 11:30:00\ntags: [node, yarn, usage]\n---\n\n> Yarn 官网: https://yarnpkg.com\n\n## Yarn 简介\nYarn 可以作为类似 npm 的包管理工具, 相比 npm 速度更快\n\n<!--more-->\n\n### **初始化**\n```\nyarn init\n```\n输入一些基本参数后, 会在目录下生成 project.json 文件\n\n### **添加依赖项**\n```\nyarn add [package]\nyarn add [package]@[version]\nyarn add [package]@[tag]\n```\n也可以使用开源项目的地址, 如 jquery-confirm\n```\nyarn add https://github.com/craftpip/jquery-confirm.git\n```\n\n### **升级依赖项**\n```\nyarn upgrade [package]\nyarn upgrade [package]@[version]\nyarn upgrade [package]@[tag]\n```\n\n### **移除依赖项**\n```\nyarn remove [package]\n```\n\n### **安装所有依赖项**\n```\nyarn\n```\n或者\n```\nyarn install\n```\n\n> 更多 CLI Introduction: https://yarnpkg.com/en/docs/cli/","slug":"yarn_basic_use","published":1,"updated":"2020-01-09T20:21:18.094Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck7m7a8r50019bicaxjg9kftr","content":"<blockquote>\n<p>Yarn 官网: <a href=\"https://yarnpkg.com\" target=\"_blank\" rel=\"noopener\">https://yarnpkg.com</a></p>\n</blockquote>\n<h2 id=\"Yarn-简介\"><a href=\"#Yarn-简介\" class=\"headerlink\" title=\"Yarn 简介\"></a>Yarn 简介</h2><p>Yarn 可以作为类似 npm 的包管理工具, 相比 npm 速度更快</p>\n<a id=\"more\"></a>\n\n<h3 id=\"初始化\"><a href=\"#初始化\" class=\"headerlink\" title=\"初始化\"></a><strong>初始化</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn init</span><br></pre></td></tr></table></figure>\n\n<p>输入一些基本参数后, 会在目录下生成 project.json 文件</p>\n<h3 id=\"添加依赖项\"><a href=\"#添加依赖项\" class=\"headerlink\" title=\"添加依赖项\"></a><strong>添加依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add [package]</span><br><span class=\"line\">yarn add [package]@[version]</span><br><span class=\"line\">yarn add [package]@[tag]</span><br></pre></td></tr></table></figure>\n\n<p>也可以使用开源项目的地址, 如 jquery-confirm</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add https://github.com/craftpip/jquery-confirm.git</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"升级依赖项\"><a href=\"#升级依赖项\" class=\"headerlink\" title=\"升级依赖项\"></a><strong>升级依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn upgrade [package]</span><br><span class=\"line\">yarn upgrade [package]@[version]</span><br><span class=\"line\">yarn upgrade [package]@[tag]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"移除依赖项\"><a href=\"#移除依赖项\" class=\"headerlink\" title=\"移除依赖项\"></a><strong>移除依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn remove [package]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装所有依赖项\"><a href=\"#安装所有依赖项\" class=\"headerlink\" title=\"安装所有依赖项\"></a><strong>安装所有依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn</span><br></pre></td></tr></table></figure>\n\n<p>或者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn install</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>更多 CLI Introduction: <a href=\"https://yarnpkg.com/en/docs/cli/\" target=\"_blank\" rel=\"noopener\">https://yarnpkg.com/en/docs/cli/</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>Yarn 官网: <a href=\"https://yarnpkg.com\" target=\"_blank\" rel=\"noopener\">https://yarnpkg.com</a></p>\n</blockquote>\n<h2 id=\"Yarn-简介\"><a href=\"#Yarn-简介\" class=\"headerlink\" title=\"Yarn 简介\"></a>Yarn 简介</h2><p>Yarn 可以作为类似 npm 的包管理工具, 相比 npm 速度更快</p>","more":"<h3 id=\"初始化\"><a href=\"#初始化\" class=\"headerlink\" title=\"初始化\"></a><strong>初始化</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn init</span><br></pre></td></tr></table></figure>\n\n<p>输入一些基本参数后, 会在目录下生成 project.json 文件</p>\n<h3 id=\"添加依赖项\"><a href=\"#添加依赖项\" class=\"headerlink\" title=\"添加依赖项\"></a><strong>添加依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add [package]</span><br><span class=\"line\">yarn add [package]@[version]</span><br><span class=\"line\">yarn add [package]@[tag]</span><br></pre></td></tr></table></figure>\n\n<p>也可以使用开源项目的地址, 如 jquery-confirm</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add https://github.com/craftpip/jquery-confirm.git</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"升级依赖项\"><a href=\"#升级依赖项\" class=\"headerlink\" title=\"升级依赖项\"></a><strong>升级依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn upgrade [package]</span><br><span class=\"line\">yarn upgrade [package]@[version]</span><br><span class=\"line\">yarn upgrade [package]@[tag]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"移除依赖项\"><a href=\"#移除依赖项\" class=\"headerlink\" title=\"移除依赖项\"></a><strong>移除依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn remove [package]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"安装所有依赖项\"><a href=\"#安装所有依赖项\" class=\"headerlink\" title=\"安装所有依赖项\"></a><strong>安装所有依赖项</strong></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn</span><br></pre></td></tr></table></figure>\n\n<p>或者</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn install</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>更多 CLI Introduction: <a href=\"https://yarnpkg.com/en/docs/cli/\" target=\"_blank\" rel=\"noopener\">https://yarnpkg.com/en/docs/cli/</a></p>\n</blockquote>"}],"PostAsset":[],"PostCategory":[{"post_id":"ck7m7a8q90003bicakzp4tla7","category_id":"ck7m7a8rk001abica9vz7zin4","_id":"ck7m7a8se002nbicajwk0ea79"},{"post_id":"ck7m7a8qg0007bica7gv3t6pf","category_id":"ck7m7a8rk001abica9vz7zin4","_id":"ck7m7a8se002pbica4tqdneh0"},{"post_id":"ck7m7a8qi0009bicadys9cwi0","category_id":"ck7m7a8rs001ebicawp37mahf","_id":"ck7m7a8se002rbicaczc5fg5j"},{"post_id":"ck7m7a8qk000bbicaehez85s0","category_id":"ck7m7a8rk001abica9vz7zin4","_id":"ck7m7a8sf002tbicahi95oq74"},{"post_id":"ck7m7a8qq000jbicacmlpsrce","category_id":"ck7m7a8rw001ibicatxi1pz8y","_id":"ck7m7a8sf002vbicacxc2ma9d"},{"post_id":"ck7m7a8qs000nbicahtpudq8u","category_id":"ck7m7a8rx001kbicapp4o6tqd","_id":"ck7m7a8sf002xbica1bo38zyp"},{"post_id":"ck7m7a8qt000pbicagnn8tkvt","category_id":"ck7m7a8rx001mbicazyfxl738","_id":"ck7m7a8sf002zbicacuhj3zb1"},{"post_id":"ck7m7a8qu000rbica6detepqj","category_id":"ck7m7a8rx001mbicazyfxl738","_id":"ck7m7a8sg0031bicau77fmy89"},{"post_id":"ck7m7a8qv000tbicade56b00i","category_id":"ck7m7a8rx001mbicazyfxl738","_id":"ck7m7a8sg0033bicano13ubro"},{"post_id":"ck7m7a8qw000vbica6vs2higw","category_id":"ck7m7a8rx001mbicazyfxl738","_id":"ck7m7a8sg0035bicacx382lbo"},{"post_id":"ck7m7a8qy000xbica7buuts2j","category_id":"ck7m7a8rx001mbicazyfxl738","_id":"ck7m7a8sh0037bicaqi557dmy"},{"post_id":"ck7m7a8r00011bicapkdh6awe","category_id":"ck7m7a8s1001wbicazk6rrwc4","_id":"ck7m7a8sh0039bicahslippt9"}],"PostTag":[{"post_id":"ck7m7a8qe0005bicaalx1ysxm","tag_id":"ck7m7a8rq001bbicavd91olds","_id":"ck7m7a8se002mbicaa0xac7kf"},{"post_id":"ck7m7a8qe0005bicaalx1ysxm","tag_id":"ck7m7a8rr001dbicawimuictw","_id":"ck7m7a8se002obicajjoyhejl"},{"post_id":"ck7m7a8qe0005bicaalx1ysxm","tag_id":"ck7m7a8rv001fbicawo8pbil8","_id":"ck7m7a8se002qbicac7n539hy"},{"post_id":"ck7m7a8qg0007bica7gv3t6pf","tag_id":"ck7m7a8rw001hbicape9kj1gx","_id":"ck7m7a8sf002sbicaavtif5so"},{"post_id":"ck7m7a8qi0009bicadys9cwi0","tag_id":"ck7m7a8rx001jbica314dkgbk","_id":"ck7m7a8sf002ubicaxyb6aakf"},{"post_id":"ck7m7a8qi0009bicadys9cwi0","tag_id":"ck7m7a8rx001lbicaqaphszuj","_id":"ck7m7a8sf002wbica5plisrrn"},{"post_id":"ck7m7a8qi0009bicadys9cwi0","tag_id":"ck7m7a8ry001nbicasyq2xmy2","_id":"ck7m7a8sf002ybica9airjsrd"},{"post_id":"ck7m7a8qm000dbica3cpj0n1y","tag_id":"ck7m7a8ry001pbicazy0um753","_id":"ck7m7a8sf0030bica8nbngiwi"},{"post_id":"ck7m7a8qm000dbica3cpj0n1y","tag_id":"ck7m7a8rz001rbicapltt4md1","_id":"ck7m7a8sg0032bica8mj9mfxf"},{"post_id":"ck7m7a8qn000fbicahsy4pzyk","tag_id":"ck7m7a8rz001tbicasxg5yuv6","_id":"ck7m7a8sg0034bicatl60w3ct"},{"post_id":"ck7m7a8qn000fbicahsy4pzyk","tag_id":"ck7m7a8rq001bbicavd91olds","_id":"ck7m7a8sg0036bica9b8qyeqh"},{"post_id":"ck7m7a8qn000fbicahsy4pzyk","tag_id":"ck7m7a8rr001dbicawimuictw","_id":"ck7m7a8sh0038bica2mx8ro48"},{"post_id":"ck7m7a8qo000hbicabw2n17u0","tag_id":"ck7m7a8ry001pbicazy0um753","_id":"ck7m7a8sh003abicagqp50nty"},{"post_id":"ck7m7a8qo000hbicabw2n17u0","tag_id":"ck7m7a8rz001rbicapltt4md1","_id":"ck7m7a8sh003bbicaih59kt2h"},{"post_id":"ck7m7a8qq000jbicacmlpsrce","tag_id":"ck7m7a8ry001pbicazy0um753","_id":"ck7m7a8sh003cbicad4t58aqp"},{"post_id":"ck7m7a8qq000jbicacmlpsrce","tag_id":"ck7m7a8rz001rbicapltt4md1","_id":"ck7m7a8si003dbicavafpyeva"},{"post_id":"ck7m7a8qr000lbica7a20sen9","tag_id":"ck7m7a8rq001bbicavd91olds","_id":"ck7m7a8si003ebica7nfgxoc4"},{"post_id":"ck7m7a8qr000lbica7a20sen9","tag_id":"ck7m7a8s30023bica9s8p2shf","_id":"ck7m7a8si003fbicageaxbw3t"},{"post_id":"ck7m7a8qr000lbica7a20sen9","tag_id":"ck7m7a8rr001dbicawimuictw","_id":"ck7m7a8si003gbicaby3zqwwy"},{"post_id":"ck7m7a8qz000zbicavflsxj5j","tag_id":"ck7m7a8ry001nbicasyq2xmy2","_id":"ck7m7a8si003hbicaklcnrxbm"},{"post_id":"ck7m7a8qz000zbicavflsxj5j","tag_id":"ck7m7a8s40026bicacalsj93k","_id":"ck7m7a8si003ibica7twghidq"},{"post_id":"ck7m7a8r00011bicapkdh6awe","tag_id":"ck7m7a8s40027bicapbzvd86t","_id":"ck7m7a8si003jbicabv92fiwa"},{"post_id":"ck7m7a8r10012bicaq28ocjr1","tag_id":"ck7m7a8s50028bicadc7ib8wm","_id":"ck7m7a8si003kbican697o3zs"},{"post_id":"ck7m7a8r10012bicaq28ocjr1","tag_id":"ck7m7a8s50029bical9ohbqkg","_id":"ck7m7a8si003lbica36h3xfrm"},{"post_id":"ck7m7a8r10013bicaqyhwixay","tag_id":"ck7m7a8s5002abica00bjftla","_id":"ck7m7a8sj003mbicaeg6rcwn1"},{"post_id":"ck7m7a8r20015bicaajguf0j9","tag_id":"ck7m7a8s5002bbica0xy2xywx","_id":"ck7m7a8sj003nbica2x602xdl"},{"post_id":"ck7m7a8r20015bicaajguf0j9","tag_id":"ck7m7a8s6002cbica9obv32ne","_id":"ck7m7a8sj003obicalewq8tf2"},{"post_id":"ck7m7a8r30016bicawmammyw5","tag_id":"ck7m7a8s6002dbicaabi2iwnq","_id":"ck7m7a8sj003pbicadq4vczjv"},{"post_id":"ck7m7a8r30016bicawmammyw5","tag_id":"ck7m7a8s6002ebicankug7jq4","_id":"ck7m7a8sj003qbica9wptb33b"},{"post_id":"ck7m7a8r30016bicawmammyw5","tag_id":"ck7m7a8s6002fbica5lxlmfml","_id":"ck7m7a8sj003rbica35ngvfug"},{"post_id":"ck7m7a8r30016bicawmammyw5","tag_id":"ck7m7a8s6002gbicanutj7typ","_id":"ck7m7a8sj003sbicagip8ahvk"},{"post_id":"ck7m7a8r50018bicahvohcm47","tag_id":"ck7m7a8s50029bical9ohbqkg","_id":"ck7m7a8sj003tbicavzt4uhfi"},{"post_id":"ck7m7a8r50018bicahvohcm47","tag_id":"ck7m7a8s40026bicacalsj93k","_id":"ck7m7a8sj003ubicaz1te0ajl"},{"post_id":"ck7m7a8r50019bicaxjg9kftr","tag_id":"ck7m7a8s8002jbica2diqaq02","_id":"ck7m7a8sj003vbica7vfoi5fb"},{"post_id":"ck7m7a8r50019bicaxjg9kftr","tag_id":"ck7m7a8s8002kbicajefjuc4m","_id":"ck7m7a8sj003wbicazb86ejhn"},{"post_id":"ck7m7a8r50019bicaxjg9kftr","tag_id":"ck7m7a8s8002lbica85lli0bi","_id":"ck7m7a8sj003xbicaajkh1z2j"}],"Tag":[{"name":"async","_id":"ck7m7a8rq001bbicavd91olds"},{"name":".net","_id":"ck7m7a8rr001dbicawimuictw"},{"name":"await","_id":"ck7m7a8rv001fbicawo8pbil8"},{"name":"C# Syntax","_id":"ck7m7a8rw001hbicape9kj1gx"},{"name":"bower","_id":"ck7m7a8rx001jbica314dkgbk"},{"name":"VS2013","_id":"ck7m7a8rx001lbicaqaphszuj"},{"name":"gulp","_id":"ck7m7a8ry001nbicasyq2xmy2"},{"name":"Elasticsearch","_id":"ck7m7a8ry001pbicazy0um753"},{"name":"windows","_id":"ck7m7a8rz001rbicapltt4md1"},{"name":"IAsyncResult","_id":"ck7m7a8rz001tbicasxg5yuv6"},{"name":"event-based","_id":"ck7m7a8s30023bica9s8p2shf"},{"name":"Visual Stduio","_id":"ck7m7a8s40026bicacalsj93k"},{"name":"hexo excetpion","_id":"ck7m7a8s40027bicapbzvd86t"},{"name":"git","_id":"ck7m7a8s50028bicadc7ib8wm"},{"name":"ASP.NET MVC","_id":"ck7m7a8s50029bical9ohbqkg"},{"name":"markdown","_id":"ck7m7a8s5002abica00bjftla"},{"name":"C#","_id":"ck7m7a8s5002bbica0xy2xywx"},{"name":"readonly","_id":"ck7m7a8s6002cbica9obv32ne"},{"name":"asp.net","_id":"ck7m7a8s6002dbicaabi2iwnq"},{"name":"mvc","_id":"ck7m7a8s6002ebicankug7jq4"},{"name":"area","_id":"ck7m7a8s6002fbica5lxlmfml"},{"name":"route","_id":"ck7m7a8s6002gbicanutj7typ"},{"name":"node","_id":"ck7m7a8s8002jbica2diqaq02"},{"name":"yarn","_id":"ck7m7a8s8002kbicajefjuc4m"},{"name":"usage","_id":"ck7m7a8s8002lbica85lli0bi"}]}}